<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端开发文档 | M18 Developer Center</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="學習使用ERP系統的前端开发文档。 瀏覽、參考、範例程式碼、教學課程及更多資源。">
    <meta name="keywords" content="前端开发文档, ERP, ERP software, ERP system, ERP solution.">
    
    <link rel="preload" href="/assets/css/0.styles.4fdebc98.css" as="style"><link rel="preload" href="/assets/js/app.8db484b1.js" as="script"><link rel="preload" href="/assets/js/2.49458ffc.js" as="script"><link rel="preload" href="/assets/js/5.ffe98d41.js" as="script"><link rel="prefetch" href="/assets/js/10.4dc1277f.js"><link rel="prefetch" href="/assets/js/100.b38e9eac.js"><link rel="prefetch" href="/assets/js/101.6e068976.js"><link rel="prefetch" href="/assets/js/102.cc21c4d1.js"><link rel="prefetch" href="/assets/js/103.e9ada45c.js"><link rel="prefetch" href="/assets/js/104.b51f0294.js"><link rel="prefetch" href="/assets/js/105.14a6a22b.js"><link rel="prefetch" href="/assets/js/106.ad4ef3cb.js"><link rel="prefetch" href="/assets/js/107.1b8e89a7.js"><link rel="prefetch" href="/assets/js/108.c3015146.js"><link rel="prefetch" href="/assets/js/109.13e423fd.js"><link rel="prefetch" href="/assets/js/11.7cc94ade.js"><link rel="prefetch" href="/assets/js/110.bf0fe79d.js"><link rel="prefetch" href="/assets/js/111.f3d1c8bc.js"><link rel="prefetch" href="/assets/js/112.6af5858f.js"><link rel="prefetch" href="/assets/js/113.88095f33.js"><link rel="prefetch" href="/assets/js/114.af56ad8a.js"><link rel="prefetch" href="/assets/js/12.ed9518d0.js"><link rel="prefetch" href="/assets/js/13.56a29ff2.js"><link rel="prefetch" href="/assets/js/14.d84ac21f.js"><link rel="prefetch" href="/assets/js/15.d6fb83d8.js"><link rel="prefetch" href="/assets/js/16.ce80d341.js"><link rel="prefetch" href="/assets/js/17.22ccb87a.js"><link rel="prefetch" href="/assets/js/18.d530e723.js"><link rel="prefetch" href="/assets/js/19.367895fd.js"><link rel="prefetch" href="/assets/js/20.16283e01.js"><link rel="prefetch" href="/assets/js/21.218ad3e8.js"><link rel="prefetch" href="/assets/js/22.95924205.js"><link rel="prefetch" href="/assets/js/23.034d8009.js"><link rel="prefetch" href="/assets/js/24.f80edf11.js"><link rel="prefetch" href="/assets/js/25.62c263de.js"><link rel="prefetch" href="/assets/js/26.4210e1bf.js"><link rel="prefetch" href="/assets/js/27.ac075e38.js"><link rel="prefetch" href="/assets/js/28.5ef03a3c.js"><link rel="prefetch" href="/assets/js/29.3f59fa38.js"><link rel="prefetch" href="/assets/js/3.e8fefbdb.js"><link rel="prefetch" href="/assets/js/30.68cbe822.js"><link rel="prefetch" href="/assets/js/31.65be3b77.js"><link rel="prefetch" href="/assets/js/32.71b2e6c3.js"><link rel="prefetch" href="/assets/js/33.81390a36.js"><link rel="prefetch" href="/assets/js/34.34c0ac3a.js"><link rel="prefetch" href="/assets/js/35.38163f97.js"><link rel="prefetch" href="/assets/js/36.895a2d42.js"><link rel="prefetch" href="/assets/js/37.268145b0.js"><link rel="prefetch" href="/assets/js/38.d788fb7f.js"><link rel="prefetch" href="/assets/js/39.76d90c4f.js"><link rel="prefetch" href="/assets/js/4.0728c656.js"><link rel="prefetch" href="/assets/js/40.a6c77f72.js"><link rel="prefetch" href="/assets/js/41.23aaf4cd.js"><link rel="prefetch" href="/assets/js/42.40f21df8.js"><link rel="prefetch" href="/assets/js/43.9e7df093.js"><link rel="prefetch" href="/assets/js/44.2cde66ba.js"><link rel="prefetch" href="/assets/js/45.4b38833f.js"><link rel="prefetch" href="/assets/js/46.1eb656ab.js"><link rel="prefetch" href="/assets/js/47.33ae3499.js"><link rel="prefetch" href="/assets/js/48.e38e56f7.js"><link rel="prefetch" href="/assets/js/49.5ff8c823.js"><link rel="prefetch" href="/assets/js/50.5afeb8ed.js"><link rel="prefetch" href="/assets/js/51.f777cc45.js"><link rel="prefetch" href="/assets/js/52.a80d762c.js"><link rel="prefetch" href="/assets/js/53.ce2bbbfb.js"><link rel="prefetch" href="/assets/js/54.1cf38297.js"><link rel="prefetch" href="/assets/js/55.69f1ad8e.js"><link rel="prefetch" href="/assets/js/56.d784a033.js"><link rel="prefetch" href="/assets/js/57.add03cc0.js"><link rel="prefetch" href="/assets/js/58.9d25e0ca.js"><link rel="prefetch" href="/assets/js/59.1949468c.js"><link rel="prefetch" href="/assets/js/6.59fc5a26.js"><link rel="prefetch" href="/assets/js/60.924cbcf3.js"><link rel="prefetch" href="/assets/js/61.87e32c6d.js"><link rel="prefetch" href="/assets/js/62.28229ee6.js"><link rel="prefetch" href="/assets/js/63.f737ab67.js"><link rel="prefetch" href="/assets/js/64.af1ba686.js"><link rel="prefetch" href="/assets/js/65.28052f8c.js"><link rel="prefetch" href="/assets/js/66.25af280c.js"><link rel="prefetch" href="/assets/js/67.2eefa916.js"><link rel="prefetch" href="/assets/js/68.e753f985.js"><link rel="prefetch" href="/assets/js/69.e35d7738.js"><link rel="prefetch" href="/assets/js/7.dd8f2e9c.js"><link rel="prefetch" href="/assets/js/70.eb9cc609.js"><link rel="prefetch" href="/assets/js/71.0ba1732c.js"><link rel="prefetch" href="/assets/js/72.12f08f64.js"><link rel="prefetch" href="/assets/js/73.174e1851.js"><link rel="prefetch" href="/assets/js/74.fa913388.js"><link rel="prefetch" href="/assets/js/75.b1f88617.js"><link rel="prefetch" href="/assets/js/76.0cdcf3b8.js"><link rel="prefetch" href="/assets/js/77.688cd3bc.js"><link rel="prefetch" href="/assets/js/78.95b14b5c.js"><link rel="prefetch" href="/assets/js/79.506e0c7f.js"><link rel="prefetch" href="/assets/js/8.cb220e42.js"><link rel="prefetch" href="/assets/js/80.1b70c454.js"><link rel="prefetch" href="/assets/js/81.f8beff47.js"><link rel="prefetch" href="/assets/js/82.28f8470f.js"><link rel="prefetch" href="/assets/js/83.0a54e0fe.js"><link rel="prefetch" href="/assets/js/84.8dfcb4a5.js"><link rel="prefetch" href="/assets/js/85.3b04da3a.js"><link rel="prefetch" href="/assets/js/86.434b2475.js"><link rel="prefetch" href="/assets/js/87.234eaafd.js"><link rel="prefetch" href="/assets/js/88.bc5aabd5.js"><link rel="prefetch" href="/assets/js/89.147a8222.js"><link rel="prefetch" href="/assets/js/9.b6a481d2.js"><link rel="prefetch" href="/assets/js/90.c88d43be.js"><link rel="prefetch" href="/assets/js/91.5cc173e6.js"><link rel="prefetch" href="/assets/js/92.1c30264c.js"><link rel="prefetch" href="/assets/js/93.7dd69d9b.js"><link rel="prefetch" href="/assets/js/94.574cd21a.js"><link rel="prefetch" href="/assets/js/95.778c8ac0.js"><link rel="prefetch" href="/assets/js/96.2174ebe5.js"><link rel="prefetch" href="/assets/js/97.b18ef75a.js"><link rel="prefetch" href="/assets/js/98.6d544a12.js"><link rel="prefetch" href="/assets/js/99.cef11301.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4fdebc98.css">
  <link rel="canonical" href="https://m18doc.multiable.com/zh-CN/m18/frontend_doc" />
</head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">M18 Developer Center</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebServices" class="dropdown-title"><span class="title">WebServices</span> <span class="arrow down"></span></button> <button type="button" aria-label="WebServices" class="mobile-dropdown-title"><span class="title">WebServices</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/api/m18/" class="nav-link">
  M18
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ce01/" class="nav-link">
  M18 ERP
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ch01/" class="nav-link">
  M18 HCM
</a></li></ul></div></div><div class="nav-item"><a href="/en/m18/" class="nav-link">
  App
</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link router-link-active">
  中文文档
</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebServices" class="dropdown-title"><span class="title">WebServices</span> <span class="arrow down"></span></button> <button type="button" aria-label="WebServices" class="mobile-dropdown-title"><span class="title">WebServices</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/api/m18/" class="nav-link">
  M18
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ce01/" class="nav-link">
  M18 ERP
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ch01/" class="nav-link">
  M18 HCM
</a></li></ul></div></div><div class="nav-item"><a href="/en/m18/" class="nav-link">
  App
</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link router-link-active">
  中文文档
</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端开发文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh-CN/m18/frontend_doc.html#jsf页面与后台交互框架" class="sidebar-link">JSF页面与后台交互框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#界面交互概念" class="sidebar-link">界面交互概念</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#viewlistener" class="sidebar-link">ViewListener</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#viewcontroller" class="sidebar-link">ViewController</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#viewcontroller-viewlistener层级" class="sidebar-link">ViewController/ViewListener层级</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#m18-ui概念" class="sidebar-link">M18 UI概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#自定义布局介绍" class="sidebar-link">自定义布局介绍</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#布局组件fluidpanel介绍" class="sidebar-link">布局组件fluidPanel介绍</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#布局规范" class="sidebar-link">布局规范</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#组件编写规则与要求" class="sidebar-link">组件编写规则与要求</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#页面资源引入" class="sidebar-link">页面资源引入</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#模块-frame-页面开发" class="sidebar-link">模块(Frame)页面开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#frame与module" class="sidebar-link">Frame与Module</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#frame页面模板" class="sidebar-link">Frame页面模板</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#frame事件" class="sidebar-link">Frame事件</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#module事件" class="sidebar-link">Module事件</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#对话框-dialog-开发" class="sidebar-link">对话框(Dialog)开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#对话框简介" class="sidebar-link">对话框简介</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#弹出对话框" class="sidebar-link">弹出对话框</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#cawdialog对象和dialog配置项" class="sidebar-link">CawDialog对象和Dialog配置项</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#对话框关闭和回调方法" class="sidebar-link">对话框关闭和回调方法</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#消息-message-开发" class="sidebar-link">消息(Message)开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#消息简介" class="sidebar-link">消息简介</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#消息中心" class="sidebar-link">消息中心</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#自定义消息显示" class="sidebar-link">自定义消息显示</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#资料名片-namecard-开发" class="sidebar-link">资料名片(Namecard)开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#资料名片触发规则" class="sidebar-link">资料名片触发规则</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#资料名片页面配置" class="sidebar-link">资料名片页面配置</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#资料名片模板的开发" class="sidebar-link">资料名片模板的开发</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#快捷键-shortcut-开发" class="sidebar-link">快捷键(Shortcut)开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#组件上使用快捷键" class="sidebar-link">组件上使用快捷键</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#页面上使用快捷键" class="sidebar-link">页面上使用快捷键</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#javascript中使用快捷键" class="sidebar-link">JavaScript中使用快捷键</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#系统提醒-alert-的开发" class="sidebar-link">系统提醒(Alert)的开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#系统提醒功能相关视图" class="sidebar-link">系统提醒功能相关视图</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#系统提醒常用接口" class="sidebar-link">系统提醒常用接口</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#系统提醒开发" class="sidebar-link">系统提醒开发</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#系统链接-link-的规则" class="sidebar-link">系统链接(Link)的规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#系统链接规则" class="sidebar-link">系统链接规则</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#获取系统链接" class="sidebar-link">获取系统链接</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#链接参数的解析" class="sidebar-link">链接参数的解析</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#推送机制的使用" class="sidebar-link">推送机制的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#实例" class="sidebar-link">实例</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#常用接口" class="sidebar-link">常用接口</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#主界面插件的开发" class="sidebar-link">主界面插件的开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#spotlight插件" class="sidebar-link">Spotlight插件</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#widget插件" class="sidebar-link">Widget插件</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#皮肤开发" class="sidebar-link">皮肤开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#概述-2" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#主题css文件的编写" class="sidebar-link">主题CSS文件的编写</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#如何增加系统主题" class="sidebar-link">如何增加系统主题</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#如何让页面支持-用户自定义主题" class="sidebar-link">如何让页面支持“用户自定义主题”</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#扩展现有功能" class="sidebar-link">扩展现有功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#扩展模块" class="sidebar-link">扩展模块</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#装饰器-decorator" class="sidebar-link">装饰器(DECORATOR)</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#组件通用功能编写" class="sidebar-link">组件通用功能编写</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#支持mess自定义" class="sidebar-link">支持mess自定义</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#支持组件定位" class="sidebar-link">支持组件定位</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#支持用户自定义" class="sidebar-link">支持用户自定义</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#特定组件-功能介绍" class="sidebar-link">特定组件/功能介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#模块向导" class="sidebar-link">模块向导</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#进度显示" class="sidebar-link">进度显示</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#多语言支持" class="sidebar-link">多语言支持</a></li></ul></li><li><a href="/zh-CN/m18/frontend_doc.html#常用api" class="sidebar-link">常用API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#jsf页面常用配置" class="sidebar-link">JSF页面常用配置</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#java常用前端api" class="sidebar-link">Java常用前端API</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/frontend_doc.html#javascript常用api" class="sidebar-link">Javascript常用API</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端开发文档"><a href="#前端开发文档" class="header-anchor">#</a> 前端开发文档</h1> <p>M18平台页面开发框架基于JSF。
JSF的一个基本概念是组件。页面通过一个组件树来渲染。每个UI组件通过EL表达式获取值，并将其显示在页面上；并在数据提交时，将页面上用户修改后的值，同步到服务器端；也可将用户的界面操作，转化成事件，提交到服务器，通过EL表达式响应。</p> <h2 id="jsf页面与后台交互框架"><a href="#jsf页面与后台交互框架" class="header-anchor">#</a> JSF页面与后台交互框架</h2> <h3 id="界面交互概念"><a href="#界面交互概念" class="header-anchor">#</a> 界面交互概念</h3> <h4 id="jsf交互概念"><a href="#jsf交互概念" class="header-anchor">#</a> JSF交互概念</h4> <p>JSF与后台的交互，不论是值的绑定，还是事件的响应，都是通过EL表达式来实现的。页面上的JSF组件通过EL表达式，与后台的Java Bean对象绑定，进而完成值的获取、提交，组件上的事件响应。JSF页面，与后台Java Bean的关系如下图。</p> <p><img src="/assets/img/jsfelbean.39b1839f.jpg" alt="jsfelbean"></p> <h4 id="m18交互"><a href="#m18交互" class="header-anchor">#</a> M18交互</h4> <p>M18中，保留JSF所有交互方式，并支持另一种交互方式。交互关系图如下：</p> <p><img src="/assets/img/m18listener.2ad40e8c.jpg" alt="m18listener"></p> <p>在M18中，每一个View（JSF页面），都有一个视图控制器(ViewController)，视图控制器负责事件的分发。每一个View，可以有多个事件监听者（ViewListener)，监听视图控制器分发的事件，根据做出响应。
事件监听者对象，可以是一个Java Object，也可以是一个Java Bean。只需实现了ViewListener接口。</p> <blockquote><p><strong>注意</strong>：</p> <ul><li>View与后台数据绑定，只能通过JavaBean和Controller来处理。 与JavaBean通过EL表达式来绑定。而通过Controller，可以把绑定一些临时数据，具体见<a href="#controller%E5%AF%B9%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E7%9A%84%E6%94%AF%E6%8C%81">Controller对临时数据的支持</a></li> <li>ViewListener只监听事件，并做出对应的响应。</li> <li>一般而言，一个View，推荐存在一个Java Bean，多个ViewListener。</li></ul></blockquote> <h3 id="viewlistener"><a href="#viewlistener" class="header-anchor">#</a> ViewListener</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ViewListener</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">controllerInitialized</span><span class="token punctuation">(</span><span class="token class-name">ViewController</span> controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for input</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validateValue</span><span class="token punctuation">(</span><span class="token class-name">ValidateEvent</span> ve<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueChange</span><span class="token punctuation">(</span><span class="token class-name">ValueChangeEvent</span> vce<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for action</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for dialog</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogCallback</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for lookup</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">lookupParameter</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">lookupData</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="接口说明"><a href="#接口说明" class="header-anchor">#</a> 接口说明</h4> <table><thead><tr><th>接口</th> <th>必要</th> <th>说明</th></tr></thead> <tbody><tr><td>getKey</td> <td>否</td> <td>作为Listener在当前View的一个标识，可用于被其他ViewListener获取。见<a href="#%E4%BA%92%E7%9B%B8%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F">ViewListener互相访问方式</a></td></tr> <tr><td>controllerInitialized</td> <td>是</td> <td>当ViewController创建后，初始化时调用。可用于初始化数据。</td></tr> <tr><td>validateValue</td> <td>是</td> <td>当前端组件提交之后，对值进行校验时调用。返回<code>false</code>意味着提交值没有通过校验，不会应用到后台Model中。</td></tr> <tr><td>valueChange</td> <td>是</td> <td>当组件提交值，并通过校验，应用到后台Model中后，调用。用于根据提交值，修改其他后台Model数据。</td></tr> <tr><td>actionPerformed</td> <td>是</td> <td>用于响应前端组件提交的事件。比如<code>commandButton</code>的点击事件，<code>inputText</code>的<code>focus</code>、<code>blur</code>、<code>change</code>事件。</td></tr> <tr><td>dialogCallback</td> <td>是</td> <td>用于处理当前View弹出的对话框的回调事件。详细见<a href="#%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%85%B3%E9%97%AD%E5%92%8C%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95">对话框关闭和回调方法</a></td></tr> <tr><td>lookupParameter</td> <td>否</td> <td>在<code>lookup</code>行为发生后，进行数据读取前调用。允许监听者调整<code>lookup</code>的属性，进而影响数据读取。</td></tr> <tr><td>lookupData</td> <td>否</td> <td>在<code>lookup</code>行为发生，读取数据后，UI显示前调用。允许监听者调整最终的数据。</td></tr></tbody></table> <p><strong>示例</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Examples</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validateValue</span><span class="token punctuation">(</span><span class="token class-name">ValidateEvent</span> ve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> id <span class="token operator">=</span> ve<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>ve<span class="token punctuation">.</span><span class="token function">getNewValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueChange</span><span class="token punctuation">(</span><span class="token class-name">ValueChangeEvent</span> vce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> id <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Code is changed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> actionCommand <span class="token operator">=</span> vae<span class="token punctuation">.</span><span class="token function">getActionCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// String id = vae.getComponent().getId();</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>actionCommand<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Ok button is clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lookupParameter</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StParameter</span> param <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StParameter</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//String componentId = event.getComponentId();  // If you want to know the UI component</span>
  	param<span class="token punctuation">.</span><span class="token function">setStSearch</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lookupData</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SqlTable</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SqlTable</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	data<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;modified by listener&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>注意</strong>：</p> <ul><li>所有的action, 包括<code>commandButton</code>，也包括前端通过<code>ajax</code>标签添加的事件，都会通过<code>actionPerformed</code>来响应。用户通过<code>ViewActionEvent</code>对象来获取组件信息或者ajax信息。</li> <li><code>ViewActionEvent.getActionCommand()</code>返回一个字符串，作为事件的标识。开发者可以在对应组件上，通过属性<code>actionCommand</code>来设定。</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <h4 id="为view添加viewlistener"><a href="#为view添加viewlistener" class="header-anchor">#</a> 为View添加ViewListener</h4> <p>开发者为视图（view）增加ViewListener有如下几种方式</p> <ol><li><p>简单的ViewListener对象（不是Java Bean）。在<code>navmenu.xml</code>中，为指定menu配置listener。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>com.multiable.bean.view.ModuleViewListenerTest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>com.multiable.bean.view.ModuleViewListenerTest2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>对于Java Bean对象的ViewListener。可以直接在JSF页面声明。</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>beanDeclare</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>beanDeclare</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li><p>在JSF页面，通过JAVA类名指定一个ViewListener对象</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>viewListener</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.bean.view.ModuleViewListenerTest<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>在Bean中，通过代码生成ViewLIstener，并在JSF页面绑定。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>viewListener</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{employeeBean.listener}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// EmployeeBean.java</span>
<span class="token keyword">public</span> <span class="token class-name">ViewListener</span> <span class="token function">getListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModuleViewListenerTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="互相访问方式"><a href="#互相访问方式" class="header-anchor">#</a> 互相访问方式</h4> <p>在ViewListener内部，如果期望访问当前View中的另一个ViewListener， 你必须知道另一个ViewListener的key，对应ViewListener中的<code>getKey()</code>接口。
key的默认值为ViewListener的className。在ViewListener实例中通过加载<code>getKey()</code>来修改。
在ViewListener中，可以通过如下代码获取其他ViewListener实例(不包含JavaBean形式的ViewListener，因为你可以直接通过注入方式，调用其他Java Bean)：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ViewListener</span><span class="token punctuation">[</span><span class="token punctuation">]</span> listeners <span class="token operator">=</span> controller<span class="token punctuation">.</span><span class="token function">getViewListener</span><span class="token punctuation">(</span>listenerKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="viewcontroller"><a href="#viewcontroller" class="header-anchor">#</a> ViewController</h3> <h4 id="获取controller"><a href="#获取controller" class="header-anchor">#</a> 获取Controller</h4> <ul><li><p>在ViewListener中，如果想获取当前视图（View）的控制器对象，通过如下代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ViewController</span> controller <span class="token operator">=</span> <span class="token class-name">CawBeanUtil</span><span class="token punctuation">.</span><span class="token function">getViewController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>如果Java Bean形式的ViewListener继承于<code>viewBean</code>、<code>ModuleBean</code>, 和其他继承于<code>ViewListenerBase</code>的ViewListener， 在内部可以直接使用变量<code>controller</code>来访问当前View的控制器。因为这几个基类中，在<code>controllerInitialized</code>中，保存了当前View的控制器到变量<code>controller</code>中。</p></li></ul> <h4 id="controller对临时数据的支持"><a href="#controller对临时数据的支持" class="header-anchor">#</a> Controller对临时数据的支持</h4> <p>JSF页面，通过EL表达式，与Java Bean中的变量（具有set/get接口）进行绑定。
如果需要通过EL表达式，与View中一些非持久化的变量进行绑定，我们可以通过Controller来设置变量，而不需要在Java Bean中新增变量以及对应的set/get接口。 这个动作在所有ViewListener中都可以完成。</p> <ul><li>设置变量值<div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Serializable</span> value<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>获取变量值<div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> createTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="viewcontroller-viewlistener层级"><a href="#viewcontroller-viewlistener层级" class="header-anchor">#</a> ViewController/ViewListener层级</h3> <p><img src="/assets/img/controllers.40c0326c.jpg" alt="controllers"></p> <blockquote><p><strong>注意</strong>：</p> <ul><li>每一个视图(View)都有一个视图控制器，但是视图控制器的实例对象可能是上述的某一种视图控制器对象。</li> <li>任意一个ViewListener对象都可以添加到任意一个视图。但是不同的ViewListener接口，存在其特殊的接口方法， 而这些接口方法仅仅在特定的视图控制器中才有效。</li> <li>视图(View)的分类，以及其对应的视图控制器，请参阅<a href="#m18-ui%E6%A6%82%E5%BF%B5">M18 UI概念</a></li></ul></blockquote> <h2 id="m18-ui概念"><a href="#m18-ui概念" class="header-anchor">#</a> M18 UI概念</h2> <p>M18平台运行在一个浏览器窗口中，M18平台中的文档、模块以标签页的形式显示在M18浏览器窗口中。</p> <ul><li>M18浏览器窗口视图，称为“App视图”</li> <li>在“App视图”中，以标签页显示的视图称为“Frame视图”</li> <li>在“App视图”中，弹出的窗口，称之为“对话框（Dialog）视图”</li> <li>在“App视图”中，用来显示资料信息的悬浮窗口，称之为“资料名片（Namecard）视图”</li> <li>所有视图，都有独立的视图文件（JSF文件，xhtml格式）</li></ul> <p><strong>App视图</strong></p> <p><img src="/assets/img/homeui.396613a2.jpg" alt="homeui"></p> <p><strong>Frame视图</strong></p> <p><img src="/assets/img/frameui.3b046292.jpg" alt="frameui"></p> <p><strong>对话框（Dialog）视图</strong></p> <p><img src="/assets/img/dialogui.b7db679c.jpg" alt="dialogui"></p> <p><strong>资料名片（Namecard）视图</strong></p> <p><img src="/assets/img/namecardui.79b8d212.jpg" alt="namecardui"></p> <p><strong>模块（Module）视图</strong></p> <p>等同于Frame视图。模块（Module）只是一类特殊的Frame视图，是在Frame视图上绑定了后台定义的module数据。</p> <h3 id="自定义布局介绍"><a href="#自定义布局介绍" class="header-anchor">#</a> 自定义布局介绍</h3> <p>Frame视图支持用户级别的自定义布局。</p> <p>M18使用<code>fluidPanel</code>组件来实现“自定义布局”功能。</p> <h3 id="布局组件fluidpanel介绍"><a href="#布局组件fluidpanel介绍" class="header-anchor">#</a> 布局组件<code>fluidPanel</code>介绍</h3> <p><code>fluidPanel</code>组件是M18提供的一种布局组件。它基于bootstrap的12栅格系统，采用流式布局+响应式布局的方式，根据子组件的布局配置，为其子组件分配显示空间。</p> <p><strong><code>fluidPanel</code>主要属性介绍</strong></p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>column</td> <td><code>int</code></td> <td>为当前布局指定垂直分栏数量。由于<code>fluidPanel</code>基于12栅格系统，因此分栏数量必须是12的约数：1、2、3、4、6、12，推荐使用1、2、3、4。</td></tr></tbody></table> <p>更多属性介绍见<a href="/zh-CN/m18/components?id=fluidpanel">组件使用文档</a></p> <p><strong><code>fluidPanel</code>子组件配置布局属性</strong></p> <p><code>fluidPanel</code>子组件通过标签<code>constraints</code>(命名空间<code>http://www.cloud-at-work.com</code>)进行布局属性配置。如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>caw</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layoutPanel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>constraints</span> <span class="token attr-name">colSpan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>constraints</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>imgUpload</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>constraints</span> <span class="token attr-name">rowSpan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>constraints</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>imgUpload</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><code>constraints</code>主要属性介绍</strong></p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>rowSpan</td> <td><code>int</code></td> <td>组件在布局垂直方向跨越的行数</td></tr> <tr><td>colSpan</td> <td><code>int</code></td> <td>组件在布局水平方向跨越的列数（栏数）</td></tr> <tr><td>newLine</td> <td><code>boolean</code></td> <td>组件将在新的一行前面</td></tr> <tr><td>rowFill</td> <td><code>boolean</code></td> <td>组件将占据当前行剩余的空间</td></tr> <tr><td>rowHold</td> <td><code>boolean</code></td> <td>组件将占据一整行。如果当前行已经有其他组件存在，则该组件将占据下一行空间。</td></tr> <tr><td>styleClass</td> <td><code>String</code></td> <td>给组件所占布局区域（<code>DIV</code>）设置<code>class</code></td></tr> <tr><td>style</td> <td><code>String</code></td> <td>给组件所占布局区域（<code>DIV</code>）设置样式<code>style</code></td></tr></tbody></table> <h3 id="布局规范"><a href="#布局规范" class="header-anchor">#</a> 布局规范</h3> <p>开发者如果期望编写的Frame视图支持自定义布局功能，必须遵行以下规则：</p> <ul><li>使用<code>fluidPanel</code>组件来进行布局</li> <li>只有<code>fluidPanel</code>的直接子组件参与“自定义布局”</li> <li><code>fluidPanel</code>组件必须指定<code>id</code>属性，并且<code>id</code>在视图内是<strong>唯一</strong>的</li> <li>参与“自定义布局”的<code>fluidPanel</code>子组件必须指定<code>id</code>属性，并且<code>id</code>在视图内是<strong>唯一</strong>的</li></ul> <p>给开发者的建议：</p> <ul><li><p>不要嵌套使用fluidPanel ,如下</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>位置相对固定的组件，不要直接作为<code>fluidPanel</code>的子组件。</p></li> <li><p>如果你期望一些组件作为一个整体放在<code>fluidPanel</code>下，可以使用其他布局相关组件，对这些组件进行封装，再放入<code>fluidPanel</code>下。这样的布局组件有<code>fieldGroup</code>，<code>container</code>。</p></li></ul> <h3 id="组件编写规则与要求"><a href="#组件编写规则与要求" class="header-anchor">#</a> 组件编写规则与要求</h3> <ol><li><p><strong>ID必须填写，并且唯一</strong></p> <ul><li>我们的页面是允许第三方开发者进行扩展，第三方开发者是通过组件<code>ID</code>来进行定位和扩展的。</li> <li>我们的页面是允许用户进行自定义页面布局，自定义页面时，组件的区分依据就是组件<code>ID</code></li> <li>在代码中，进行组件的获取或者指定更新，我们是需要知道组件的<code>clientId</code>(根据<code>ID</code>自动生成)，而这个不固定的<code>clientId</code>会严重加大维护成本，因此在M18中，我们提供了进行“组建获取和指定”的替代方案：根据固定不变的组件<code>ID</code>来进行组件的获取和指定。</li></ul></li> <li><p>页面布局使用<code>fluidPanel</code>，页面可以分为多个区域，每个区域使用<code>fluidPanel</code>布局。详细见<a href="#%E5%B8%83%E5%B1%80%E7%BB%84%E4%BB%B6fluidpanel%E4%BB%8B%E7%BB%8D">布局组件介绍</a></p></li> <li><p>在<code>module</code>中，页面组件通过指定<code>tableName</code>，<code>columnName</code>映射后台数据。并能够自定生成组件<code>id</code>。</p> <p>在一般情况下，我们编写组件需要做如下设置<code>id</code>设定和<code>value</code>绑定：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.textValue}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在module页面中，可以通过如下方法设置：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxTable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>通过<code>tableName</code>,<code>columnName</code>设置的组件，会自动绑定到后台的<code>entity</code>上去。并且生成组件<code>id</code> ,其规则是<code>id=tableName_columnName</code>（上述例子中，组件<code>id</code>是<code>xxTable_yyColumn</code>)</p></li></ol> <h3 id="页面资源引入"><a href="#页面资源引入" class="header-anchor">#</a> 页面资源引入</h3> <p>在所有视图文件中，只需要引入当前视图所需要的特定<code>css</code>/<code>js</code>资源。系统通用的资源，会自动加载。</p> <p>自动加载的系统资源有：<code>jquery.js</code>、<code>tether.js</code>、<code>bootstrap.js</code>、<code>cawView.js</code>、<code>bootstrap.css</code>、<code>cawStyle.css</code>、<code>cawTheme.css</code>等。</p> <p>在特定的视图里面，也有一些特定的自动加载的资源。</p> <h2 id="模块-frame-页面开发"><a href="#模块-frame-页面开发" class="header-anchor">#</a> 模块(Frame)页面开发</h2> <h3 id="frame与module"><a href="#frame与module" class="header-anchor">#</a> Frame与Module</h3> <blockquote><p><strong>Frame</strong>是在<code>navmenu.xml</code>中定义，在App视图中，以标签页显示的视图。在App视图中，通过点击Menu中对应的菜单项，可以进入对应的Frame视图。</p></blockquote> <blockquote><p><strong>Module</strong>是指在<code>navmenu.xml</code>中定义时，指定了<code>module</code>属性的Frame。<code>navmenu.xml</code>中配置的<code>module</code>需要在<code>module.xml</code>中定义，<code>module.xml</code>主要用来给<code>module</code>指定数据绑定，以及配置数据操作。</p></blockquote> <p><strong>Frame视图</strong>的控制器是<code>FrameController</code>， 事件监听接口是<code>ViewListener</code>。</p> <p><strong>Module视图</strong>的控制器是<code>ModuleController</code>, 事件监听接口是<code>ModuleViewListener</code></p> <h3 id="frame页面模板"><a href="#frame页面模板" class="header-anchor">#</a> Frame页面模板</h3> <p>我们为module提供了一个统一的页面模板来简化页面的编写。</p> <p>这个模板包含了<code>toolbar</code>,<code>searchView</code>,<code>additionView</code>三个辅助显示区，和一个主显示区<code>contentView</code>。</p> <blockquote><ul><li><p><code>searchView</code>主要用来浏览文档记录</p> <p>提供默认实现，支持开发者定制</p></li> <li><p><code>contentView</code>用来显示文档数据</p> <p><em>完全由开发者实现</em></p></li> <li><p><code>toolbar</code>放置文档操作命令</p> <p>提供默认实现，支持开发者定制</p></li> <li><p><code>additionView</code>作为<code>contentView</code>的补充，显示文档数据。</p> <p>提供默认实现，支持开发者定制</p></li></ul></blockquote> <p><img src="/assets/img/moduletemplate.5d186ee0.jpg" alt="moduletemplate"></p> <p><strong>如何使用Module模板</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot; 
xmlns:caw=&quot;http://www.cloud-at-work.com&quot;
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>decorate</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/template/viewTemplate.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>adtPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>param</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--设置参数--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolArea<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--定制toolbar区域--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--增加toolbar元素， 仅当没有定制toolArea时有效 --&gt;</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customed<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customAction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionListener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doAction}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>actionItem</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchView<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--定制searchView--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>additionPanel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--定制additionView--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>decorate</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>模板提供的配置参数</strong></p> <table><thead><tr><th>参数名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>hideSearchPage</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏<code>searchView</code></td></tr> <tr><td>hideRecordInfo</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏”单据信息“</td></tr> <tr><td>hideRightToolbar</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏<code>toolbar</code>右边的单据操作工具栏</td></tr> <tr><td>hideToolbar</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏<code>toolbar</code></td></tr> <tr><td>hideBeSelect</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏“商业中心”选择框</td></tr> <tr><td>adtPage</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>是否隐藏<code>additionView</code></td></tr> <tr><td>searchLayoutConfigurable</td> <td><code>boolean</code></td> <td><code>true</code></td> <td><code>searchView</code>是否可以更改显示形式</td></tr></tbody></table> <h3 id="frame事件"><a href="#frame事件" class="header-anchor">#</a> Frame事件</h3> <p>Frame提供了多种事件供开发者监听。</p> <h4 id="javascript事件"><a href="#javascript事件" class="header-anchor">#</a> JavaScript事件</h4> <table><thead><tr><th>事件</th> <th>说明</th></tr></thead> <tbody><tr><td><code>Frame.Event.SIZECHANGE</code></td> <td>当Frame窗口大小变化时触发</td></tr> <tr><td><code>Frame.Event.MODSTATUS</code></td> <td>当Frame视图中，组件值提交，导致后台数据更新时，<code>modify</code>状态变化时提交</td></tr> <tr><td><code>Frame.Event.INIT</code></td> <td>在Frame视图初始化时触发</td></tr> <tr><td><code>Frame.Event.ACTIVED</code></td> <td>在Frame视图称为当前活跃的标签页时触发</td></tr> <tr><td><code>Frame.Event.DEACTIVED</code></td> <td>当Frame视图由活跃标签页变成非活跃标签页时触发</td></tr> <tr><td><code>Frame.Event.CLOSING</code></td> <td>在Frame视图关闭时触发</td></tr></tbody></table> <p>以上事件都可以使用在js文件中：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Frame<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">ACTIVED</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Module<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">ACTIVED</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="java事件"><a href="#java事件" class="header-anchor">#</a> Java事件</h4> <p>通过<code>ajax</code>绑定后台代码与事件:</p> <p>之间支持：<code>opened</code>,<code>closed</code>,<code>active</code>,<code>deactived</code>,<code>dialogReturn</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frame</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opened<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doAction}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">process</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@this<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frame</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="module事件"><a href="#module事件" class="header-anchor">#</a> Module事件</h3> <h4 id="javascript事件-2"><a href="#javascript事件-2" class="header-anchor">#</a> JavaScript事件</h4> <p>Module具备Frame所有的事件，同时在以下动作触发时，提供<code>BEFORE</code>和<code>AFTER</code>两种事件：<strong><code>Module.Event.BEFORE_ + 事件编码</code><strong>和</strong><code>Module.Event.AFTER_ + 事件编码</code></strong></p> <table><thead><tr><th>动作</th> <th>事件编码</th> <th>说明</th></tr></thead> <tbody><tr><td>刷新</td> <td><code>REFRESH</code></td> <td>单据刷新</td></tr> <tr><td>创建</td> <td><code>CREATE</code></td> <td>创建单据</td></tr> <tr><td>保存</td> <td><code>SAVE</code></td> <td>保存单据</td></tr> <tr><td>另存为</td> <td><code>SAVEAS</code></td> <td>单据另存为</td></tr> <tr><td>重命名</td> <td><code>RENAME</code></td> <td>单据重命名</td></tr> <tr><td>保存为草稿</td> <td><code>SAVEASDRAFT</code></td> <td>单据保存为草稿</td></tr> <tr><td>保存为模板</td> <td><code>SAVEASTEMPLATE</code></td> <td>单据保存为模板</td></tr> <tr><td>删除</td> <td><code>DELETE</code></td> <td>单据删除</td></tr> <tr><td>读取</td> <td><code>READ</code></td> <td>读取单据</td></tr> <tr><td>打印</td> <td><code>PRINT</code></td> <td>打印单据</td></tr> <tr><td>打印EXCEL</td> <td><code>PRINTASEXCEL</code></td> <td>以EXCEL形式打印单据</td></tr> <tr><td>打印HTML</td> <td><code>PRINTASHTML</code></td> <td>以HTML形式打印单据</td></tr> <tr><td>打印RTF</td> <td><code>PRINTASRTF</code></td> <td>以RTF形式打印单据</td></tr> <tr><td>切换企业</td> <td><code>BECHANGE</code></td> <td>切换企业</td></tr></tbody></table> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Module<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">AFTER_SAVE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="java事件-2"><a href="#java事件-2" class="header-anchor">#</a> Java事件</h4> <p>Module提供了<code>ModuleViewListener</code>，在<code>ViewListener</code>的基础上提供更多的事件接口。</p> <h2 id="对话框-dialog-开发"><a href="#对话框-dialog-开发" class="header-anchor">#</a> 对话框(Dialog)开发</h2> <h3 id="对话框简介"><a href="#对话框简介" class="header-anchor">#</a> 对话框简介</h3> <p>Dialog是M18的一种弹出窗口，它会覆盖所在容器的下层视图，并锁住下层视图（下层视图不可操作）</p> <p><strong>Dialog容器</strong></p> <p>Dialog所在视图称之为Dialog容器。</p> <p>M18可以呈现Dialog的视图有两种：<strong>App视图</strong>， <strong>Frame视图</strong></p> <blockquote><p><strong>注意</strong>：</p> <ul><li>Dialog会锁住Dailog容器，在容器内，只有当前Dialog视图处于活跃状态，直到Dialog关闭</li> <li>Dialog在Frame视图时，当前Frame视图被锁住，但是其他标签页的Frame视图可以正常操作。</li> <li>Dialog在App视图时，整个M18系统会被锁住。</li></ul></blockquote> <p><strong>Dialog类型</strong></p> <p>Dialog根据显示内容的格式分为三类：</p> <ul><li>文本</li> <li><code>HTML</code>格式文本</li> <li>独立的JSF文件（JSF视图）</li></ul> <blockquote><p><strong>注意</strong>：</p> <ul><li>Dialog不会阻塞进程。即使后台调用<code>WebUtil.showDialog</code>,Dialog也不会在代码执行的那一刻显示出来，而是当后台请求完成后，返回到前端后，显示Dialog的代码才能执行。</li> <li>监听Dialog关闭事件，执行回调动作，必须指定callback。 详细见<a href="#%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%85%B3%E9%97%AD%E5%92%8C%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95">对话框关闭和回调方法</a></li> <li>与后台有绑定动作的Dialog，在后台都有一个CawDialog对象关联。通过CawDialog对象可以对Dialog做更多的设置。详细见<a href="#cawdialog%E8%AF%B4%E6%98%8E">CawDialog说明</a></li></ul></blockquote> <h3 id="弹出对话框"><a href="#弹出对话框" class="header-anchor">#</a> 弹出对话框</h3> <h4 id="页面javascript弹出窗口"><a href="#页面javascript弹出窗口" class="header-anchor">#</a> 页面JavaScript弹出窗口</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//myView是一个JsView实例(定义在CawView.js中)，存在于每个JSF视图中。</span>
<span class="token comment">//显示文本信息的Dialog</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'This is a message dialog'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//显示HTML文本的Dialog</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;p&gt;This is a html message&lt;/p&gt;'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//显示独立JSF视图</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/jsf/view/dialog/dlgView.faces'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'frame'</span><span class="token punctuation">,</span> <span class="token comment">//可以不设置，系统会自动判断当前视图 </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可用的Dialog配置项见<a href="#dialog%E9%85%8D%E7%BD%AE%E9%A1%B9">Dialog配置项</a></p> <h4 id="后台java弹出窗口"><a href="#后台java弹出窗口" class="header-anchor">#</a> 后台Java弹出窗口</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//显示文本信息</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Text</span> message<span class="token char">', '</span><span class="token class-name">Dialog</span> <span class="token class-name">Title</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//显示HTML文本</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showHtmlMessage</span><span class="token punctuation">(</span>'<span class="token generics"><span class="token punctuation">&lt;</span>p<span class="token punctuation">&gt;</span></span><span class="token class-name">Html</span> text message<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token char">', '</span><span class="token class-name">Dialog</span> <span class="token class-name">Title</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//显示JSF视图</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>'<span class="token operator">/</span>jsf<span class="token operator">/</span>view<span class="token operator">/</span>dialog<span class="token operator">/</span>dlgView<span class="token punctuation">.</span>faces'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用CawDialog</span>
<span class="token class-name">CawDialog</span> dialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CawDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/view/dialog/dlgView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">setDialogName</span><span class="token punctuation">(</span><span class="token string">&quot;dlgView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">addRequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">addRequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>dialog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>CawDialog对象介绍见<a href="#cawdialog%E8%AF%B4%E6%98%8E">CawDialog说明</a></p> <h3 id="cawdialog对象和dialog配置项"><a href="#cawdialog对象和dialog配置项" class="header-anchor">#</a> CawDialog对象和Dialog配置项</h3> <h4 id="cawdialog说明"><a href="#cawdialog说明" class="header-anchor">#</a> CawDialog说明</h4> <p><code>CawDialog</code>是后台Java端用来描述对话框的一个对象。其重要方法如下：</p> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>setDialogName(String name)</code></td> <td>指定Dialog的名称。名称可用于在Callback中区分不同Dialog``</td></tr> <tr><td><code>setTarget(DialogTarget target)</code></td> <td>指定Dialog容器：<code>DialogTarget.frame</code>和<code>DialogTarget.app</code></td></tr> <tr><td><code>setType(DialogType type)</code></td> <td>指定Dialog类型：<code>DialogType.message</code>,<code>DialogType.html</code>和<code>DialogType.custom</code></td></tr> <tr><td><code>setContent(String content)</code></td> <td>当类型是<code>DialogTarget.message</code>和<code>DialogTarget.html</code>, 变量<code>content</code>是需要显示的message内容；当类型是<code>DialogTarget.custom</code>是，变量<code>content</code>是指定的<code>url</code>信息。</td></tr> <tr><td><code>setWithResponse(boolean value)</code></td> <td>设定Dialog是否在关闭后执行回调动作</td></tr> <tr><td><code>addRequestParam(String key, Object value)</code></td> <td>仅当类型是DialogType.custom时有效，用于设置，传入对应<code>url</code>中的参数。这类参数通过request params传入。</td></tr> <tr><td><code>addParam(String key, Object value)</code></td> <td>仅当类型是DialogType.custom时有效，用于设置，传入对应Dialog视图的数据，这部分数据是保存在session中。</td></tr> <tr><td><code>setOption(String key, Object value)</code></td> <td>用于设置Dialog的可选配置项。可用配置项见<a href="#dialog%E9%85%8D%E7%BD%AE%E9%A1%B9">Dialog配置项</a>中第8~17项</td></tr></tbody></table> <h4 id="dialog配置项"><a href="#dialog配置项" class="header-anchor">#</a> Dialog配置项</h4> <table><thead><tr><th>No</th> <th>配置项</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td>dialogName</td> <td><code>String</code></td> <td>指定Dialog的名称，名称用于在callback中区分不同的dialog</td></tr> <tr><td>2</td> <td>dialogId</td> <td><code>String</code></td> <td>dialog的唯一标识，在默认情况下（开发者没有指定），系统会自动生成一个唯一标识。</td></tr> <tr><td>3</td> <td>dialogParent</td> <td><code>String</code></td> <td>指定Dialog的父级Dialog（当前Dialog弹出动作所在的Dialog视图）的<code>dialogId</code>。没有指定时，系统会自动检测。</td></tr> <tr><td>4</td> <td>dialogHandler</td> <td><code>String</code></td> <td>仅用于JSF组件开发，用于指定响应callback的组件。</td></tr> <tr><td>5</td> <td>url</td> <td><code>String</code></td> <td>用于指定Dialog内容的JSF视图文件</td></tr> <tr><td>6</td> <td>message</td> <td><code>String</code></td> <td>用于指定Dialog显示的文本内容</td></tr> <tr><td>7</td> <td>html</td> <td><code>String</code></td> <td>用于指定Dialog显示的Html内容</td></tr> <tr><td>8</td> <td>title</td> <td><code>String</code></td> <td>用于指定Dialog标题栏显示的标题</td></tr> <tr><td>9</td> <td>ftype</td> <td><code>String</code></td> <td>当类型为DialogType.message/DialogType.html时，用于指定Dialog下方显示的动作按钮。 可选项为<code>confirm</code>, <code>askif</code>。</td></tr> <tr><td>10</td> <td>width</td> <td><code>int</code></td> <td>Dialog的宽度。（以px为单位）</td></tr> <tr><td>11</td> <td>height</td> <td><code>int</code></td> <td>Dialog的高度。（以px为单位）</td></tr> <tr><td>12</td> <td>maxView</td> <td><code>boolean</code></td> <td>是否最大化显示Dialog</td></tr> <tr><td>13</td> <td>resizable</td> <td><code>boolean</code></td> <td>Dialog是否支持调整大小</td></tr> <tr><td>14</td> <td>draggable</td> <td><code>boolean</code></td> <td>Dialog是否支持拖拽移动位置</td></tr> <tr><td>15</td> <td>maximize</td> <td><code>boolean</code></td> <td>Dialog是否支持最大化</td></tr> <tr><td>16</td> <td>onClose</td> <td><code>JS Function</code></td> <td>设置在Dialog关闭时执行的JavaScript函数</td></tr> <tr><td>17</td> <td>onCallback</td> <td><code>JS Function</code></td> <td>设置在Dialog关闭后，执行回调动作前，执行的JavaScript函数。 函数允许返回值。如果返回<code>false</code>，那么回调动作会取消。如果返回Javascript Object， 可以设置回调动作中，传入后台的参数。</td></tr></tbody></table> <p><strong>设置方法</strong></p> <p>设置Dialog配置项的方法有如下三种：</p> <ol><li><p>通过JavaScript方法显示Dialog时，通过<code>myView.showDialog(dialogOption)</code>设置参数。</p></li> <li><p>通过Java方法显示Dialog时，通过自定义<code>CawDialog</code>来进行配置项设置</p></li> <li><p>在Dialog的独立视图文件中，通过JSF标签设置，如下</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogOption</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maximize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxView</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>dialogOption</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="对话框关闭和回调方法"><a href="#对话框关闭和回调方法" class="header-anchor">#</a> 对话框关闭和回调方法</h3> <h4 id="dialog的关闭"><a href="#dialog的关闭" class="header-anchor">#</a> Dialog的关闭</h4> <p>Dialog在关闭时，带有两个信息：</p> <ol><li>关闭状态<code>DialogStatus</code>， 标记Dialog关闭状态，目前有如下状态：<code>OK</code>,<code>CANCEL</code>,<code>YES</code>,<code>NO</code></li> <li>关闭时返回的数据<code>returnObject</code>， 是Dialog传回给callback的数据</li></ol> <p><strong>关闭Dialog的方法</strong></p> <p><code>JavaScript</code>方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myView<span class="token punctuation">.</span><span class="token function">closeDialog</span><span class="token punctuation">(</span>dialogId<span class="token punctuation">,</span> status<span class="token punctuation">,</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Java方法：</p> <p>仅仅在当前DialogView视图中，才能关闭当前Dialog。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//controller是DialogController对象</span>
controller<span class="token punctuation">.</span><span class="token function">closeDialog</span><span class="token punctuation">(</span><span class="token class-name">DialogStatus</span> status<span class="token punctuation">,</span> <span class="token class-name">Object</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="回调方法"><a href="#回调方法" class="header-anchor">#</a> 回调方法</h4> <p>Dialog回调方法，指的是：当Dialog关闭后，系统根据Dialog关闭状态和传回的数据，执行的特定的方法。</p> <p>添加回调方法有四种方式：</p> <ol><li><p>在Dialog的父级视图（执行弹出Dialog的视图）中，通过<code>dialogHandler</code>指定</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogHandler</span> <span class="token attr-name">actionListener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{dlgParentBean.dialogClosed}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//dlgParentBean</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogClosed</span><span class="token punctuation">(</span><span class="token class-name">FacesEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> dialogId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>event<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">WebConstants<span class="token punctuation">.</span>Dialog</span><span class="token punctuation">.</span>CONVERSATION_PARAM<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>dialogId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">CawDialog</span> dialog <span class="token operator">=</span> <span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dialogId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getDialogName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">//do callback for dialog1</span>
         <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>​</p></li> <li><p>在Dialog的父级视图中，通过<code>ajax</code>标签为特定dialog指定</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogHandler</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogReturn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{dlgParentBean.dialog1Callback}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>dialogHandler</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//dlgParentBean</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialog1Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//do callback for dialog1</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在弹出Dialog的Java代码上指定</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/jsf/view/dialog/dialog1.faces&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>dialog<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token comment">//do callback});</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">CawDialog</span> dlg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CawDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/view/dialog/ebi/ebiLinkSettingModuleRule.xhtml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dlg<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DialogCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processAction</span><span class="token punctuation">(</span><span class="token class-name">CawDialog</span> dialog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DialogStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getCloseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token comment">//do callback</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>dlg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>通过ViewListener响应</strong></p> <p>不需要任何设置代码，只需要在ViewListener的接口方法中直接处理Dialog的callback就可以了。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//任意一个Dialog父级视图的ViewListener</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogCallback</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">CawDailog</span> dialog <span class="token operator">=</span> vae<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getDialogName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do callback for &quot;dialog1&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是最为简单，也是我们**<u>推荐</u>**的做法。</p></li></ol> <h2 id="消息-message-开发"><a href="#消息-message-开发" class="header-anchor">#</a> 消息(Message)开发</h2> <h3 id="消息简介"><a href="#消息简介" class="header-anchor">#</a> 消息简介</h3> <p>在后台数据处理过程中，我们需要将一些结果反馈到前台显示。这里我们使用的就是JSF消息机制。</p> <h4 id="消息说明"><a href="#消息说明" class="header-anchor">#</a> 消息说明</h4> <p>JSF在后台，在一个请求周期内，可以任意添加消息。但是JSF消息要呈现出来，必须有前端组件来负责JSF消息的渲染。所以开发者想要显示消息，就必须在JSF页面上指定渲染消息的组件。</p> <p>消息可以绑定组件，也可以不绑定组件。没有绑定组件的消息称为<strong>全局消息</strong>， 而绑定组件的消息称为<strong>组件消息</strong>。</p> <p>消息显示组件，也可以指定组件。指定组件的消息组件只能用来显示绑定相同组件的消息。</p> <h4 id="消息分类"><a href="#消息分类" class="header-anchor">#</a> 消息分类</h4> <p>根据M18对消息的显示处理，我们将消息分为以下三类：</p> <ol><li><p>原生JSF消息</p> <p>原生JSF消息，需要在页面上指定消息组件才能显示。</p> <p>通过以下方法添加</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//组件消息  MessageUtil.postMessage(String clientId, FacesMessage message)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">getFacesId</span><span class="token punctuation">(</span><span class="token char">'id'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FacesMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Message</span> <span class="token class-name">Summary</span><span class="token char">', '</span><span class="token class-name">Message</span> <span class="token class-name">Detail</span>'<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">//全局消息 MessageUtil.postMessage(FacesMessage message)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FacesMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Message</span> <span class="token class-name">Summary</span><span class="token char">', '</span><span class="token class-name">Message</span> <span class="token class-name">Detail</span>'<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>通知（Notice）类消息</p> <p>通知类消息在每个页面（视图）都有默认显示。开发者不需要指定显示组件。</p> <p>如果开发者指定了显示组件， 并且渲染了通知消息，则这个消息不会在经过系统默认显示。</p> <p><img src="/assets/img/notice.587969b5.jpg" alt="notice"></p> <p>通过以下方法添加:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//MessageUtil.postNotice(String message)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token string">&quot;Notice message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//MessageType指定消息类别</span>
<span class="token comment">//MessageUtil.postNotice(MessageType type, String message)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">&quot;Notice Message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//htmlMessage指明消息内容是否是HTML格式</span>
<span class="token comment">//delayClose指明消息自动关闭前显示的时间</span>
<span class="token comment">//MessageUtil.postNotice(MessageType type, String message, boolean htmlMessage, int delayClose)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">&quot;&lt;p&gt;Notice Message&lt;/p&gt;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>消息中心消息</p> <p><strong>消息中心</strong>是为<strong>Frame视图</strong>定义的一种消息显示机制。消息中心用来显示一些具有附加信息的消息，这类消息可以提供一个定制的画面来显示详细的消息内容，并能够与用户交互。</p> <p><strong>消息中心</strong>主要用来显示后台运行过程中产生的<code>CheckMsg</code>对象，<code>CheckMsg</code>一般代表服务器的一种错误信息。</p> <p><strong>消息中心</strong>显示的消息对象是<code>ActionMessage</code>， 提供了两种交互方式：</p> <ul><li><p>根据<code>ActionMessage</code>对象提供的定位信息，高亮显示对应界面元素。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">FieldLocator</span> locator <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">addLocator</span><span class="token punctuation">(</span>locator<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>根据<code>ActionMessage</code>对象提供的<code>messageKey</code>和<code>messageData</code>，提供详细界面来显示详细的信息。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setMessageKey</span><span class="token punctuation">(</span>'core_101'<span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setMessageData</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p>通过<code>CheckMsg</code>对象生成<code>ActionMessage</code>时，会自动根据CheckMsg生成定位信息、messageKey和messageData。</p> <p>消息中心的消息显示：</p> <p><img src="/assets/img/msgCenter.56171c99.jpg" alt="msgCenter"></p> <p>通过下列方法添加消息中心消息：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//MessageUtil.postMessage(String message)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//MessageType指定消息类型</span>
<span class="token comment">//autoClose指定消息是否自动关闭</span>
<span class="token comment">//closable指定消息是否允许用户关闭</span>
<span class="token comment">//MessageUtil.postMessage(MessageType type, String message, boolean autoClose, boolean closable)</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">&quot;Message&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//生成ActionMessage</span>
<span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">&quot;Message Text&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setMessageKey</span><span class="token punctuation">(</span><span class="token string">&quot;messageKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setMessageData</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//根据后台产生的CheckMsg生成消息中心消息</span>
<span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="消息中心"><a href="#消息中心" class="header-anchor">#</a> 消息中心</h3> <p>每条消息在<strong>消息中心</strong>显示为两部分：<strong>列表视图</strong>和<strong>详细视图</strong></p> <p>自定义消息中心的消息显示，是以messageKey为单位，同样messageKey的消息，在一个视图中是同样的显示。</p> <h4 id="javascript定义消息详细视图"><a href="#javascript定义消息详细视图" class="header-anchor">#</a> JavaScript定义消息详细视图</h4> <p>这种方法只能在单个视图生效。</p> <p>为<code>messageKey=&quot;core_101&quot;</code>定制详细视图。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Messager<span class="token punctuation">.</span>render<span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token string-property property">'core_101'</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token function-variable function">renderTitle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msgCenter<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token string">'Customed title'</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function-variable function">renderView</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msgCenter<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">var</span> view <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;Customed detail View here&lt;/div&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>msgCenter<span class="token punctuation">.</span>detailView<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.detail-body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> view<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="java定义消息中心视图"><a href="#java定义消息中心视图" class="header-anchor">#</a> Java定义消息中心视图</h4> <ol><li><p>在<code>app.xml</code>注册消息视图</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-render</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from-view-id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from-view-id</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-case</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>core_201<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>render</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to-view-id</span><span class="token punctuation">&gt;</span></span>/view/message/fkMessage.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to-view-id</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-case</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-case</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>core_160503<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>render</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to-view-id</span><span class="token punctuation">&gt;</span></span>/view/message/fieldGroupMessage.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to-view-id</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-case</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-render</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>注意：</p> <ul><li><p>可以有多个<code>message-render</code></p></li> <li><p><code>from-view-id</code>指定某个特定视图，标识当前<code>message-render</code>仅针对这个特定视图有效。没有设置代表对全局生效。</p></li> <li><p><code>message-case</code>特指某一类<code>message</code></p></li> <li><p><code>key</code>指<code>messageKey</code></p></li> <li><p><code>render</code>非必填。如果填写，则指定一个class。 这个class必须实现了<code>MessageRender</code>接口，用来为message生成显示的message/detail内容</p></li> <li><p><code>to-view-id</code>指定详细视图的JSF文件</p></li> <li><p><code>view-param</code>指定传给这个视图的参数</p></li></ul></blockquote></li> <li><p>编写详细视图页面</p> <p>消息详细视图就是一个普通的JSF页面。遵循JSF页面编写规则。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>568px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>278px<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">&gt;</span></span>#{message.info}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>注意：</p> <ul><li>可以通过在<code>&lt;caw:view&gt;</code>上设置<code>data-width</code>,<code>data-height</code>来指定详细视图的大小，单位是<code>px</code></li> <li>在页面上可以通过<code>#{message}</code>来获取<code>messageData</code></li> <li>如果要在页面后台Java Bean/ViewListener上获取<code>messageData</code>，可参考</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> messageData <span class="token operator">=</span> <span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getELContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLambdaArgument</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>我们提供了一个Bean基类<code>CawMessageBean</code>，继承它，则可以直接使用变量<code>msg</code>获取<code>messageData</code></li></ul></blockquote></li></ol> <h3 id="自定义消息显示"><a href="#自定义消息显示" class="header-anchor">#</a> 自定义消息显示</h3> <p>M18提供的消息显示组件</p> <p><a href="/zh-CN/m18/components">messages</a>和<a href="/zh-CN/m18/components">dynamicMessages</a></p> <h2 id="资料名片-namecard-开发"><a href="#资料名片-namecard-开发" class="header-anchor">#</a> 资料名片(Namecard)开发</h2> <p><strong>资料名片</strong>是一种悬浮卡片窗口，用来显示文档的数据。多用于lookup栏位。</p> <p><img src="/assets/img/namecard.20f07e78.jpg" alt="namecard"></p> <h3 id="资料名片触发规则"><a href="#资料名片触发规则" class="header-anchor">#</a> 资料名片触发规则</h3> <p><strong>资料名片</strong>在鼠标悬停在HTML元素上时，触发显示。</p> <p>HTML元素符合以下条件，就能够触发资料名片：</p> <ol><li><p>元素具备属性<code>data-lookup</code>，指明lookupType(定义在<code>stSearch.xml</code>中)</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-lookup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>元素能够获取<code>lookup</code>数据<code>id</code>信息</p> <p>增加<code>lookup</code>数据的方法：</p> <ul><li><p>通过<code>data-id</code>属性在HTML元素上指定</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-lookup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>通过JavaScript，监听事件<code>active.nc</code>,在事件响应中动态增加<code>id</code>数据。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#text1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'active.nc'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>​</p></li></ul></li></ol> <h3 id="资料名片页面配置"><a href="#资料名片页面配置" class="header-anchor">#</a> 资料名片页面配置</h3> <p><strong>资料名片</strong>的显示依赖于两部分：<strong>数据</strong>和<strong>显示模板</strong></p> <p><strong>资料名片数据</strong>包含三部分：</p> <ul><li>显示在名片上的文档数据（lookup读取的所有数据）</li> <li>文档所包含的附加文件</li> <li>显示在名片上的附件链接</li></ul> <p>开发者/用户可以设定“<em>显示在名片上的文档数据</em>”以及“<em>显示在名片上的附加链接</em>”</p> <p><strong>资料名片显示模板</strong>是显示名片数据的一种布局/显示方案。</p> <p>开发者可以创建新的模板，开发者/用户可以为指定<code>lookup</code>选择模板。</p> <blockquote><p><strong>注意</strong>：</p> <ul><li>M18平台为所有<code>lookup</code>设定了默认的“显示数据”，开发者可以在此基础上增加“显示数据”，或者重新定义“显示数据”。</li> <li>M18平台提供了默认的<strong>资料名片</strong>显示模板，开发者可以设置<strong>默认模板</strong>的属性，也可以改用其他模板。</li></ul></blockquote> <h4 id="配置默认数据和模板"><a href="#配置默认数据和模板" class="header-anchor">#</a> 配置默认数据和模板</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stSearch</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>namecard</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span> <span class="token attr-name">widht</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>250<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">imgCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>photo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extendDefault</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Go to employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>templateCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">templateOption</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>namecard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stSearch</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><code>namecard</code>属性介绍</strong></p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>height</td> <td>资料名片显示高度</td></tr> <tr><td>width</td> <td>资料名片显示宽度</td></tr> <tr><td>imgCode</td> <td>为<strong>默认模板</strong>设置一个图片显示，指定的是一个数据<strong>栏位</strong>，<strong>默认模板</strong>根据这个栏位去获取图片数据。</td></tr> <tr><td>src</td> <td>指定一个JSF视图文件。用这个指定的视图文件作为资料名片的显示。<strong>不</strong>使用<strong>默认模板</strong></td></tr> <tr><td>extendDefault</td> <td><strong>默认为true</strong>。 指当前namecard配置是否基于<strong>默认模板</strong>数据。 为<strong>true</strong>时，以<strong>默认模板</strong>为基础，增加<code>field</code>和<code>link</code>；为<strong>false</strong>时，配置为<strong>全新</strong>模板数据，不会添加<strong>默认模板</strong>数据。</td></tr></tbody></table> <p><strong><code>field</code>属性介绍</strong></p> <p><code>field</code>用来给资料名片增加显示栏位。</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td><code>lookup</code>栏位名称</td></tr> <tr><td>mess</td> <td>资料名片显示的标签(<code>messCode</code>，系统根据<code>messCode</code>获取显示文本内容)</td></tr></tbody></table> <p><code>field</code>可以设置一个<code>link</code>，当设置了<code>link</code>后，用户在界面上点击显示的<code>field</code>时，将根据这个链接跳转。</p> <p><strong><code>link</code>属性介绍</strong></p> <p><code>link</code>用来给资料名片增加附加链接</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>menuCode</td> <td>链接关联的系统菜单</td></tr> <tr><td>id</td> <td>传入到对应系统菜单的文档<code>id</code>， 这里设置的是一个<code>lookup</code>数据栏位，系统根据这个栏位去获取传入<code>id</code>的真实值</td></tr> <tr><td>text</td> <td>显示在资料名片上的链接文本，这里填入的是<code>messCode</code></td></tr> <tr><td>href</td> <td>如果关联的是外部链接，则填写外部链接<code>url</code></td></tr> <tr><td>needBe</td> <td>是否跳转到链接时，传入当前<code>beId</code></td></tr></tbody></table> <p><code>link</code>可以通过<code>param</code>设置参数</p> <p><strong><code>param</code>属性介绍</strong></p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td>传入链接的参数名称</td></tr> <tr><td>value</td> <td>传入链接的参数值，<code>String</code>类型</td></tr> <tr><td>field</td> <td>设置参数值来源于<code>lookup</code>的某个数据栏位</td></tr></tbody></table> <h4 id="为资料名片指定模板"><a href="#为资料名片指定模板" class="header-anchor">#</a> 为资料名片指定模板</h4> <p>开发者通过<code>option</code>标签，可以更改资料名片的显示模板。 属性如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>template</td> <td>设置资料名片采用的模板的编号（见<a href="#%E8%B5%84%E6%96%99%E5%90%8D%E7%89%87%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%BC%80%E5%8F%91">资料名片模板的开发</a> ）</td></tr> <tr><td>templateOption</td> <td>设置选择模板的配置数据， <code>json</code>格式。</td></tr></tbody></table> <h4 id="资料名片显示页面可用配置"><a href="#资料名片显示页面可用配置" class="header-anchor">#</a> 资料名片显示页面可用配置</h4> <p>在任意模板，或者为资料名片定制的JSF视图中，可以通过以下方法，设置视图显示大小</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>namecardOption</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="资料名片模板的开发"><a href="#资料名片模板的开发" class="header-anchor">#</a> 资料名片模板的开发</h3> <p><strong>资料名片模板</strong>用来让开发者/用户运用到某个<code>lookup</code>的资料名片上。</p> <p>开发者在<code>stSearch.xml</code>中用<code>namecard</code>来配置资料名片。见<a href="#%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E6%95%B0%E6%8D%AE%E5%92%8C%E6%A8%A1%E6%9D%BF">配置默认数据和模板</a></p> <p>用户通过【自定义查询】下的<strong>资料名片</strong>来配置资料名片。见<a href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%96%99%E5%90%8D%E7%89%87">用户自定义资料名片</a></p> <h4 id="用户自定义资料名片"><a href="#用户自定义资料名片" class="header-anchor">#</a> 用户自定义资料名片</h4> <p><img src="/assets/img/udfnc.3174dd8a.jpg" alt="udfnc"></p> <p>从上图可知，<strong>图片设置</strong>、<strong>数据栏位设置</strong>、<strong>附加链接设置</strong>、<strong>模板设置</strong>都和开发者配置一一对应。这里的模板属性设置界面，是由模板开发者提供的。</p> <h4 id="开发资料名片模板"><a href="#开发资料名片模板" class="header-anchor">#</a> 开发资料名片模板</h4> <p><strong>资料名片模板</strong>只负责资料名片数据的显示，可以存在配置项供用户/开发者进行配置。如果提供配置项供用户配置，则必须提供配置界面。</p> <p>开发<strong>资料名片模板</strong>只需要提供模板页面，模板配置，并在<code>app.xml</code>中注册就可以了。</p> <h5 id="资料名片模板的注册"><a href="#资料名片模板的注册" class="header-anchor">#</a> 资料名片模板的注册</h5> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>namecard</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>verticalNamecard<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.defaultNamecard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>view/namecard/verticalNamecard.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">option</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.config.VerticalNamecardOption<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      /view/namecard/verticalTemplateSetting.xhtml
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>setting</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>namecard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>namecard</code>属性说明</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>模板的唯一标识，M18平台唯一</td></tr> <tr><td>description</td> <td>模板名称，是<code>messCode</code></td></tr> <tr><td>lookupType</td> <td>指定<code>lookupType</code> ，限制模板只能使用于哪些<code>lookup</code>，可设置多个，以<code>,</code>分隔</td></tr></tbody></table> <p><code>page</code>用来指定模板视图文件</p> <p><code>setting</code>用来指定配置视图文件。如果模板不支持配置项，则不需要<code>setting</code>。其属性说明如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>option</td> <td>用来指定配置项数据的Java对象（必须是简单的JAVA对象，具有set/get， 能够通过fastjson直接抓成json）</td></tr></tbody></table> <h5 id="模板视图的编写"><a href="#模板视图的编写" class="header-anchor">#</a> 模板视图的编写</h5> <p>模板视图也是一个JSF视图文件，所以遵循所有JSF规范。没有任何限制。</p> <p>在这个视图文件上，可以使用许多已经预置的环境变量。如下表</p> <table><thead><tr><th>表达式</th> <th>返回值</th> <th>说明</th></tr></thead> <tbody><tr><td><code>#{namecard}</code></td> <td><code>NamecardInfo</code></td> <td><code>NamecardInfo</code>包含了资料名片所有的设置信息</td></tr> <tr><td><code>#{option}</code></td> <td>在注册时，<code>setting</code>中<code>option</code>属性指明的Java对象</td> <td>包含用户配置的模板配置项数据</td></tr> <tr><td><code>#{namecardBean}</code></td> <td><code>NamecardBean</code></td> <td><code>NamecardBean</code>是一个<code>SessionScope</code>的Java Bean。 内置许多方法获取资料名片的数据。</td></tr> <tr><td><code>#{namecard.fields}</code></td> <td><code>List&lt;NamecardField&gt;</code></td> <td>返回所有显示在资料名片上的数据栏位</td></tr> <tr><td><code>#{namecard.links}</code></td> <td><code>List&lt;NamecardLink&gt;</code></td> <td>返回所有显示在资料名片上的附件链接信息</td></tr> <tr><td><code>#{namecardBean.imageCode}</code></td> <td><code>String</code></td> <td>资料名片需要显示的图片<code>key</code></td></tr> <tr><td><code>#{namecardBean.getText(field)}</code></td> <td><code>String</code></td> <td>根据<code>NamecardField</code>对象<code>field</code>来获取需要显示在界面上的文本内容</td></tr> <tr><td><code>#{namecardBean.isFieldRendered(field)}</code></td> <td><code>boolean</code></td> <td>根据<code>NamecardField</code>对象<code>field</code>，判断此数据是否对当前用户显示（如果当前用户没有该项数据的查看权限，则不会显示）</td></tr> <tr><td><code>#{namecardBean.getLinkUrl(link)}</code></td> <td><code>String</code></td> <td>根据<code>NamecardLink</code>对象<code>link</code>获取对应的链接<code>url</code></td></tr> <tr><td><code>#{namecardBean.isSystemLink(link)}</code></td> <td><code>boolean</code></td> <td>判断<code>NamecardLink</code>对象<code>link</code>是否是系统内部链接</td></tr> <tr><td><code>#{namecardBean.isLinkRendered(link)}</code></td> <td><code>boolean</code></td> <td>根据<code>NamecardLink</code>对象<code>link</code>，判断此链接是否对当前用户显示（当前用户没有权限，则不会显示）</td></tr> <tr><td><code>#{namecardBean.openSupport}</code></td> <td><code>boolean</code></td> <td>判断当前资料名片是否支持<strong>打开文档单据</strong>功能</td></tr> <tr><td><code>#{namecardBean.printSupport}</code></td> <td><code>boolean</code></td> <td>判断当前资料名片是否支持<strong>打印文档单据</strong>功能</td></tr> <tr><td><code>#{namecardBean.attachSupport}</code></td> <td><code>boolean</code></td> <td>判断当前资料名片是否支持显示<strong>文档附件</strong></td></tr> <tr><td><code>#{namecardBean.attachment}</code></td> <td><code>SqlTableIteratorModel</code></td> <td>返回当前资料名片所有的<strong>文档附件</strong>。<code>SqlTableIteratorModel</code>支持JSF <code>&lt;c:foreach&gt;</code>，<code>&lt;ui:repeat&gt;</code>遍历标签。</td></tr></tbody></table> <h5 id="配置界面的编写"><a href="#配置界面的编写" class="header-anchor">#</a> 配置界面的编写</h5> <p><strong>配置说明</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">option</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.config.VerticalNamecardOption<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  /view/namecard/verticalTemplateSetting.xhtml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>setting</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>option</code>属性设定的<code>class</code>必须支持JSON转换： 支持fastjson的<code>JSON.toJSONString(optionObject)</code>和<code>JSON.parse(String, optionClass)</code>。<strong>建议</strong>写成POJO。如果是复杂的JAVA对象，请编写<code>JSONserializer</code>和<code>JSONDeserializer</code>。</p> <p><strong>页面编写说明</strong></p> <p>在编写配置视图时，视图内容必须包含在<code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>之间。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot;</span> <span class="token string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>ui</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/facelets<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--资料名片模板配置视图 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在配置视图上<strong>可以</strong>使用JavaBean。 <strong>但是</strong>Bean必须实现<code>TemporaryBean</code>接口， <code>TemporaryBean</code>接口中<code>getTemplateKey()</code>返回模板的<code>code</code>。</p> <h2 id="快捷键-shortcut-开发"><a href="#快捷键-shortcut-开发" class="header-anchor">#</a> 快捷键(Shortcut)开发</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>M18平台有统一的快捷键支持接口。</p> <p>M18快捷键都具备以下属性：</p> <ul><li><code>code</code>: 全系统唯一。建议开发者在增加快捷键时，以APP的编号作为前缀。</li> <li><code>key</code>: 快捷键的触发键。 组合键以<strong>空格</strong>分开。比如<code>ctrl shift f</code></li> <li><code>mess</code>: 快捷键的描述， 是一个<code>messCode</code></li> <li><code>action</code>: 快捷键的触发动作。</li></ul> <h3 id="组件上使用快捷键"><a href="#组件上使用快捷键" class="header-anchor">#</a> 组件上使用快捷键</h3> <p>目前M18平台上有三种组件支持快捷键：<code>commandButton</code>、<code>toolbar(actionItem)</code>、<code>dropMenu(menuItem)</code>。 快捷键触发时的动作，相当于鼠标点击对应组件。</p> <p><strong>使用方法：</strong></p> <p>在组件上直接使用以下属性：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl alt t<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>toolbar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionItem</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl shift r<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcutCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module.refresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>actionItem</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>toolbar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>属性说明</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>shortcut</td> <td><strong>必填</strong>，快捷键的触发键</td></tr> <tr><td>shortcutCommand</td> <td>快键键的<code>code</code>. 如果没有填写，系统会取<code>commandButton</code>的<code>id</code>, <code>toolbar(actionItem)</code>的<code>id</code>+<code>action</code>， <code>dropmenu(menuItem)</code>的<code>id</code> + <code>event</code>。</td></tr> <tr><td>shortcutMess</td> <td>快捷键的<code>mess</code>。如果没有填写，系统会自动获取对应组件的<code>label</code>。</td></tr></tbody></table> <blockquote><p><strong>注意：</strong></p> <p>这里shortcutMess所使用的<code>mess</code>必须是<code>webMess</code>（）。</p></blockquote> <h3 id="页面上使用快捷键"><a href="#页面上使用快捷键" class="header-anchor">#</a> 页面上使用快捷键</h3> <p>在页面上可以为特定命令指定快捷键。</p> <p>使用方式：在<code>&lt;form&gt;&lt;/form&gt;</code>使用<code>&lt;caw:shortcut&gt;</code>来增加快捷键：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>shortcut</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl shift i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.shortcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>messCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doShortcutAction}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>shortcut</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>属性说明：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>快捷键的触发键（组合）。</td></tr> <tr><td>event</td> <td>快捷键的<code>code</code></td></tr> <tr><td>text</td> <td>快捷键的<code>shortcutMess</code></td></tr> <tr><td>listener</td> <td>绑定快捷键的响应函数</td></tr></tbody></table> <h3 id="javascript中使用快捷键"><a href="#javascript中使用快捷键" class="header-anchor">#</a> JavaScript中使用快捷键</h3> <p>在每个JSF视图上，都有一个<code>JavaScript</code>对象：<code>window.shortcut</code>。可以通过方法<code>registerShortcut(code, key, handler, mess)</code>来注册快捷键。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>shortcut<span class="token punctuation">.</span><span class="token function">registerShortcut</span><span class="token punctuation">(</span><span class="token string">'test.shortcutCode'</span><span class="token punctuation">,</span> <span class="token string">'ctrl shift t'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'test shortcut'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'messCode'</span><span class="token punctuation">)</span>
</code></pre></div><p>四个参数说明</p> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>快捷键的<code>code</code></td></tr> <tr><td>key</td> <td>快捷键的触发键</td></tr> <tr><td>handler</td> <td>快捷键的响应函数</td></tr> <tr><td>mess</td> <td>快捷键的<code>shortcutMess</code></td></tr></tbody></table> <h2 id="系统提醒-alert-的开发"><a href="#系统提醒-alert-的开发" class="header-anchor">#</a> 系统提醒(Alert)的开发</h2> <h3 id="系统提醒功能相关视图"><a href="#系统提醒功能相关视图" class="header-anchor">#</a> 系统提醒功能相关视图</h3> <ul><li>系统工具栏， 系统提醒入口</li></ul> <p><img src="data:image/jpeg;base64,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" alt="alert"></p> <ul><li><p>系统通知列表</p> <p><img src="/assets/img/alertlist.93f4e66d.jpg" alt="alertlist"></p></li> <li><p>系统提醒弹出通知窗口（系统右下方）</p> <p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAeAB4AAD/4QBaRXhpZgAATU0AKgAAAAgABQMBAAUAAAABAAAASgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIALAB9QMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APf6Kh3XX/PGH/v6f/iaN1z/AM8Yf+/p/wDiaAGxKHe6VhkGTB/74WsSe3uYra2sp4Ll0tZFaGa3RX3hfuhgTkHse3vW/DGyBy5G523HHQcAf0qSgicFNFCyiuJLuW+uo/KZlEcUWQSiA55I4yT6egq/RRQOMbIKKKKCgooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAopGbbjgnJxxSbj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FN3H/AJ5t+n+NG4/882/T/GgB1FN3H/nm36f40bj/AM82/T/GgB1FM3n+435j/GjeT0RvzH+NAD6KbuP/ADzb9P8AGgNlsFSOM84oAdRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAEP2O2/59of++BR9jtv+faH/AL4FTUUAQ/Y7b/n2h/74FH2O2/59of8AvgVNRQBD9jtv+faH/vgUfY7b/n2h/wC+BU1FAEIghikRo4o0OcZVQOxqamt95P8Ae/oadQAUUVzmq+KobR2gs1E0o4Lk/ID/AFq4QlN2iZVa0KUeabOjorzifxDqk7ZN26D0j+UD8qjj1vU4iCt9Mcf3m3fzrp+pztucLzSnfZnpdFchp3jBwwTUIwyn/lpGOR9R/hXWRSxzxLLE6ujDIZTkGuepSlTfvHZRxFOsrwY+iiud8VxS2tvHrVmypeWvyZYcOjHB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+ZH/AH1/OjzI/wC+v506igBvmR/31/OjzI/76/nTqKAG+ZH/AH1/OjzI/wC+v506igBvmR/31/OjzI/76/nTqKAG+ZH/AH1/OjzI/wC+v506igBvmR/31/OjzI/76/nTqKAG+ZH/AH1/OjzI/wC+v506igBvmR/31/OjzI/76/nTqKAG+ZH/AH1/OjzI/wC+v506igBvmR/31/Ok3K0q7WB+U9D9KfRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//Z" alt="alertpop"></p></li> <li><p>系统提醒详细视图</p> <p><img src="/assets/img/alertview.d6015f1b.jpg" alt="alertview"></p> <p>​</p></li></ul> <h3 id="系统提醒常用接口"><a href="#系统提醒常用接口" class="header-anchor">#</a> 系统提醒常用接口</h3> <p>系统提醒常用API只有一个——发送系统提醒</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//SysAlertUtil.java</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendAlert</span><span class="token punctuation">(</span><span class="token class-name">SysAlertObj</span> alert<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> recipient<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><p><code>SysAlertObj</code>是系统提醒的描述对象基类。 每一种系统提醒都会提供对应的<code>SysAlertObj</code>。</p> <p><strong>参数说明</strong></p> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>alert</td> <td><code>SysAlertObj</code>对象，发送的“提醒数据”。</td></tr> <tr><td>recipient</td> <td>提醒的接收者（系统用户<code>id</code>集合）。</td></tr></tbody></table> <h3 id="系统提醒开发"><a href="#系统提醒开发" class="header-anchor">#</a> 系统提醒开发</h3> <p>如上所述，系统提醒包含的内容：提醒Java对象（SysAlertObj)、提醒列表视图和弹出窗视图、提醒的详细视图。</p> <p>所以开发者在开发新的“系统提醒”时，也需要提供上述三部分定义。</p> <h4 id="定义系统提醒java对象"><a href="#定义系统提醒java对象" class="header-anchor">#</a> 定义系统提醒Java对象</h4> <p><strong>每一中系统提醒，都有一个对应的Java对象，用来描述提醒的具体数据。</strong></p> <p>这个Java对象必须继承于<code>SysAlertObj</code>。以下四个方法要留意</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//以下两个方法必须实现。CawJsonSerializable接口方法。</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreJsonData</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">//根据jsonData 还原系统提醒Java对象</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveJsonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">//将当前系统提醒Java对象，转换成Json格式描述的字符串</span>
<span class="token punctuation">}</span>

<span class="token comment">//以下两个方法，可选（具体作用见后面说明）</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//描述当前提醒的基本信息 （不支持html格式)</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//描述当前提醒的详细信息 （不支持html格式）</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>注意</strong></p> <ul><li><code>saveJsonData</code>将当前系统对象Java对象转成Json字符串，但是<code>SysAlertObj</code>的基本变量：<code>id</code>、<code>type</code>等（定义在SysAlertObj.java中）不需要保存在这个JSON字符串中</li></ul></blockquote> <p><strong>MessageAlert实例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SysAlert</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">,</span> rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlert</span> <span class="token keyword">extends</span> <span class="token class-name">SysAlertObj</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TYPE <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1729512694173799571L</span><span class="token punctuation">;</span>

	<span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> detail <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> message<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> detail<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDetail</span><span class="token punctuation">(</span><span class="token class-name">String</span> detail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>detail <span class="token operator">=</span> detail<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/** overwrite methods **/</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreJsonData</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">JSONObject</span> jsonObj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDetail</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;detail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveJsonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">JSONObject</span> jsonObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jsonObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jsonObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;detail&quot;</span><span class="token punctuation">,</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> jsonObj<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="定义系统提醒视图渲染器"><a href="#定义系统提醒视图渲染器" class="header-anchor">#</a> 定义系统提醒视图渲染器</h4> <p><strong>系统提醒视图渲染器</strong>负责定义系统提醒的显示效果。由于系统提醒的视图存在两种： 列表视图（弹出窗口共用）和 详细视图。 所以<strong>渲染器类</strong>中也包含两种视图渲染的接口。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SysAlertRender</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">encodeAlert</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decodeAlert</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">,</span> <span class="token class-name">String</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">encodeAlertView</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">encodeAlertTitle</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">encodeHtmlText</span><span class="token punctuation">(</span>alert<span class="token punctuation">.</span><span class="token function">getAlertObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">encodeAlertContent</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">encodeHtmlText</span><span class="token punctuation">(</span>alert<span class="token punctuation">.</span><span class="token function">getAlertObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>接口说明</strong></p> <ul><li><code>encodeAlert</code>用来渲染提醒列表视图</li> <li><code>decodeAlert</code>用来响应提醒列表视图上的事件</li> <li><code>encodeAlertView</code>用来渲染提醒详细视图</li> <li><code>encodeAlertTitle</code>非必要接口。 用来简化提醒的显示。 以一个<code>String</code>（支持html格式）来显示系统提醒的标题。</li> <li><code>encodeAlertContent</code>非必要接口。用<code>String</code>（支持html格式）来描述系统提醒的具体内容。</li></ul> <h4 id="要点说明"><a href="#要点说明" class="header-anchor">#</a> <strong>要点说明</strong></h4> <ol><li>在提醒列表视图（弹窗）中，增加按钮（或其他HTML元素）支持事件（只支持click事件)：</li></ol> <p>只需要在渲染的html元素中，增<code>data-action</code>属性，就可以支持click事件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-dismiss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  myAction
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>注意：</p> <ul><li>这里的<code>data-action</code>会作为渲染器接口<code>decodeAlert</code>第三个参数。</li> <li><code>data-dismiss</code>可选， 当<code>data-dismiss=&quot;true&quot;</code>时，用户点击按钮后，会自动关闭提醒列表视图，否则不会关闭。</li></ul></blockquote> <ol start="2"><li><code>AbstractAlertRender</code>的使用</li></ol> <p>为了简化开发者的开发，M18提供了一个渲染器的基类<code>AbstractAlertRender</code>。 开发者可以选择使用它，也可以选择重新编写渲染器。</p> <p><code>AbstractAlertRender</code>提供的列表视图布局如下图</p> <p><img src="/assets/img/alertui1.01349d86.jpg" alt="alertui1"></p> <p>​	包含四个部分：图标区、标题区、内容区、时间戳。</p> <ul><li>图标区，通过覆写方法<code>getIcon</code>来定制</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ImageObject</span> <span class="token function">getIcon</span><span class="token punctuation">(</span><span class="token class-name">SysAlertItem</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>标题区，可以通过以下三种方式来定制
<ul><li>通过定义系统提醒Java对象中的方法<code>getMessageText()</code>来指定标题内容。不支持html格式</li> <li>通过定义渲染器中的方法<code>encodeAlertTitle</code>来指定标题内容。支持html格式</li> <li>通过覆写<code>AbstractAlertRender</code>的方法<code>encodeTitle</code>来修改标题区渲染。</li></ul></li> <li>内容区，可以通过以下三种方式来定制
<ul><li>通过定义系统提醒Java对象中的方法<code>getDetailText()</code>来指定内容区的文本。 不支持html格式、</li> <li>通过定义渲染器中的方法<code>encodeAlertContent</code>来指定内容区。 支持html格式。</li> <li>通过覆写<code>AbstractAlertRender</code>的方法<code>encodeItemContent</code>来修改内容区渲染</li></ul></li> <li>时间戳，不支持开发者扩展。</li></ul> <ol start="3"><li><p>系统提醒详细视图的编写</p> <p>开发者可以通过实现渲染器的<code>encodeAlertView</code>方法来定制提醒的详细视图。</p> <p>如果开发者选择使用<code>AbstractAlertRender</code>， 可以通过独立JSF视图来编写详细视图。步骤如下：</p> <ul><li><p>覆写<code>getViewUrl</code>，来指定一个JSF视图</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">String</span> <span class="token function">getViewUrl</span><span class="token punctuation">(</span><span class="token class-name">SysAlertItem</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;/view/alert/messageAlert.faces&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>编写JSF视图，在仕途上可以使用<code>#{alertItem}</code>来获取SystemAlertItem对象。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ID : #{alertItem.id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Title : #{alertItem.alertObj.messageText}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Detail : #{alertItem.alertObj.detailText}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>​</p></li></ul></li></ol> <h4 id="注册系统提醒java对象和渲染器"><a href="#注册系统提醒java对象和渲染器" class="header-anchor">#</a> 注册系统提醒Java对象和渲染器</h4> <p>系统提醒的两大部分： Java对象和渲染器，都需要在M18平台注册。渲染器单独注册。 系统提醒Java对象在注册时，需要指定一个注册过的渲染器。</p> <p>注册方法一： 在<code>faces.xml</code>中通过xml配置注册</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sysalert-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rendererType</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.alert.message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    com.multiable.web.sysalert.render.MessageAlertRender
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rendererType</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sysalert</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.alert.message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span>className<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>renderer</span><span class="token punctuation">&gt;</span></span>com.multiable.alert.message<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>renderer</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sysalert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sysalert-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><strong>注意：</strong></p> <ol><li><p>所有的配置必须在<code>sysalert-config</code>之间。</p></li> <li><p>注册渲染器<code>&lt;rendererType name=&quot;code&quot;&gt;className&lt;/rendererType&gt;</code></p> <p>这其中的<code>code</code>必须是系统唯一的。</p> <p>这里的<code>className</code>必须是一个渲染器（<code>SysAlertRender</code>）的实现</p></li> <li><p>注册Java对象<code>&lt;sysalert name=&quot;code&quot;&gt;&lt;object&gt;className&lt;/object&gt;&lt;/sysalert&gt;</code></p> <p>这其中的<code>code</code>也必须是系统唯一的</p> <p><code>className</code>必须是一个<code>SysAlertObj</code></p></li> <li><p>在<code>&lt;sysalert&gt;</code>中，需要通过<code>&lt;renderer&gt;renderCode&lt;/renderer&gt;</code>来指定渲染器。</p> <p>这里的<code>renderCode</code>必须通过是已经注册过的渲染器。</p></li></ol></blockquote> <p>注册方法二： 在Java代码中通过注解注册</p> <ul><li><p>渲染器通过渲染器Java代码来注册</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SysAlertRenderer</span><span class="token punctuation">(</span>rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlertRender</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAlertRender</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在提醒渲染Java类中通过<code>@SysAlertRenderer</code>来注册， 属性<code>rendererType</code>就对应xml配置中的<code>name</code>，系统唯一。</p></li> <li><p>系统提醒Java对象通过Java代码来注册</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SysAlert</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">,</span> 
          rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlert</span> <span class="token keyword">extends</span> <span class="token class-name">SysAlertObj</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在系统提醒Java对象类中通过<code>@SysAlert</code>来注册。属性<code>value</code>对应xml配置中<code>name</code>，系统唯一；属性<code>rendererType</code>用来指定已经注册的渲染器。</p> <p>​</p></li></ul> <h2 id="系统链接-link-的规则"><a href="#系统链接-link-的规则" class="header-anchor">#</a> 系统链接(Link)的规则</h2> <h3 id="系统链接规则"><a href="#系统链接规则" class="header-anchor">#</a> 系统链接规则</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//192.168.10.214:8080/jsf/app.faces#employee/view/module/employee/870f5fee?id=63</span></span>
</code></pre></div><p>M18系统中，一个链接地址包含的内容：</p> <ul><li><p>协议和服务器信息。 (<code>http://192.168.10.214:8080</code>)</p></li> <li><p>M18项目路径。(<code>/jsf</code>)</p></li> <li><p>M18系统资源路径，相对于项目路径。(<code>/app.faces</code>)</p></li> <li><p>访问模块信息。(<code>#menuCode/resourcePath/randomKey</code>)</p> <p><code>menuCode</code>：在<code>navmenu.xml</code>配置的每个<code>menu</code>的<code>code</code></p> <p><code>resourcePath</code>: 模块的路径。 以<code>employee</code>为例，未见路径为<code>view/module/employee.xhtml</code>,所以其<code>resourcePath</code>为<code>view/module/employee</code></p> <p><code>randomKey</code>由系统生成</p></li> <li><p>参数(<code>?id=63)</code>)</p></li></ul> <h3 id="获取系统链接"><a href="#获取系统链接" class="header-anchor">#</a> 获取系统链接</h3> <p>获取指定Frame的系统链接，可通过以下API获取</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">getFrameLink</span><span class="token punctuation">(</span><span class="token class-name">String</span> menuCode<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="链接参数的解析"><a href="#链接参数的解析" class="header-anchor">#</a> 链接参数的解析</h3> <p>一个Frame视图如果要支持参数，则必须在视图java代码中对参数进行获取和解析。一般情况下，我们在ViewListener的<code>initalized</code>接口中处理。</p> <h2 id="推送机制的使用"><a href="#推送机制的使用" class="header-anchor">#</a> 推送机制的使用</h2> <p>推送(PUSH)是服务器主动向前端发送消息的一种方法。 M18平台封装了推送机制，并提供了一套友好的API。 开发者根据功能需求使用。</p> <p>推送，涉及到前端后台的交互，整个过程如下：</p> <ol><li>前端发起一个到后端的连接</li> <li>后端通过一个服务类（Java）来监听这个连接，并处理传送的消息。</li> <li>前端或者后台关闭这个连接。</li></ol> <h3 id="前端"><a href="#前端" class="header-anchor">#</a> 前端</h3> <p>在JavaScript代码中， 开发者可以通过<code>myView.createWebSocket(name, option, params)</code>创建一个websocket连接。</p> <ul><li><p><code>name</code>： 与后台服务的定义对应。</p></li> <li><p><code>option</code>:  一个JavaScript对象， 支持<code>onmessage</code>、<code>onerror</code>、<code>onclose</code>， 值都是JavaScript函数。</p></li> <li><p><code>params</code>： 传入到后台服务的参数。</p> <p>​</p></li></ul> <h3 id="后台"><a href="#后台" class="header-anchor">#</a> 后台</h3> <ul><li>服务类，必须继承于<code>CawWebSocket</code></li> <li>必须使用注解<code>@ServerEndpoint</code>声明， 其<code>value</code>属性与前端的<code>name</code>属性一致</li> <li>在<code>onOpen</code>方法中，可以将前端传入的参数保存起来</li></ul> <h3 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ServerEndpoint</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/sysAlert&quot;</span><span class="token punctuation">,</span> encoders <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">SysAlertEncoder</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysAlertWebSocket</span> <span class="token keyword">extends</span> <span class="token class-name">CawWebSocket</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getUid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOpen</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">,</span> <span class="token class-name">EndpointConfig</span> ec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token function">getRequestParam</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">,</span> <span class="token class-name">ConvertLib</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSocketKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> <span class="token function">getUid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSupportCluster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
option<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
option<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>webSocket <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createWebSocket</span><span class="token punctuation">(</span><span class="token string">'sysAlert'</span><span class="token punctuation">,</span> option<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">userId</span> <span class="token operator">:</span> uid<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="常用接口"><a href="#常用接口" class="header-anchor">#</a> 常用接口</h3> <h4 id="推送消息到前端"><a href="#推送消息到前端" class="header-anchor">#</a> 推送消息到前端</h4> <p>推送API都定义在在<code>WebSocketUtil.java</code>中，常用的接口如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CawWebSocket</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">Object</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CawWebSocket</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendText</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keyPredicate<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>注意</strong>：</p> <ul><li>参数<code>webSocket</code>就是<code>@ServerEndpoint</code>中分配的<code>value</code>值</li> <li>第三个参数<code>filter</code>，<code>keyPredicate</code>都是用来指定将消息传给哪些websocket.</li> <li>第二个参数，就是传送的消息。传送的消息最后都是文本形式。如果使用<code>sendObject</code>则在注册时<code>@serverEndpoint</code>应该提供<code>encoders</code>属性，使用encoder将Object转成文本。</li> <li><strong>特别注意</strong>: 只有<code>sendText</code>支持集群环境。所以如果推送机制涉及到多个集群服务器，那么必须使用<code>sendText</code>来推送消息。</li></ul></blockquote> <h2 id="主界面插件的开发"><a href="#主界面插件的开发" class="header-anchor">#</a> 主界面插件的开发</h2> <p>在M18主页上，有两种插件形式的扩展，支持开发者新增的。</p> <ul><li><code>spotlight</code>: 在系统工具栏上，用户通过搜索框，触发spotlight插件，<code>spotlight</code>根据用户输入的关键字，在M18上进行搜索，然后将结果显示出来。</li> <li><code>widget</code>：桌面小插件。用来显示某个特定的功能视图。开发新增<code>widget</code>后，用户在自定义桌面时，可以挑选开发者的<code>widget</code>，进行配置，并放置到桌面上显示。</li></ul> <h3 id="spotlight插件"><a href="#spotlight插件" class="header-anchor">#</a> Spotlight插件</h3> <p><code>spotlight</code>插件负责两项职责：<strong>关键字搜索</strong>和<strong>结果显示</strong>。</p> <p>因此<code>spotlight</code>插件也包含这两部分开发。</p> <h4 id="关键字搜索"><a href="#关键字搜索" class="header-anchor">#</a> 关键字搜索</h4> <p><code>spotlight</code>插件通过一个<code>SpotlightHelper</code>接口类来实现<strong>关键字搜索</strong>，通过<code>CawSpotlight</code>对象来实现参数传递和搜索结果的返回。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SpotlightHelper</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSearch</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">spotlightInit</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">,</span> 	<span class="token class-name">UIComponent</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>注意：</strong></p> <ul><li><code>spotlightInit</code>方法只会在当前spotlight插件初始化时调用一次。</li> <li><code>doSearch</code>在每次用户进行关键字搜索时，都会调用</li> <li><code>CawSpotlight</code>包含当前插件的所有信息，以及当前搜索环境（包括搜索关键字）</li> <li><code>CawSpotlight.setRendered(boolean rendered)</code>可用来设置当前插件是否显示。比如当搜索结果为空的时候，可以使用这个方法隐藏插件的显示。</li></ul></blockquote> <p><strong>设置显示变量和回传搜索结果</strong></p> <p>在<code>doSearch</code>中，插件需要进行关键字搜索，保存结果，以及设置一些其他环境变量，以便插件渲染时使用。</p> <p>保存结果，或者设置其他环境变量，通过方法<code>CawSpotlight.setData(String key, Object obj)</code>来处理。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSearch</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> searchKey <span class="token operator">=</span> spotlight<span class="token punctuation">.</span><span class="token function">getSearchKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NavMenuItem</span><span class="token punctuation">&gt;</span></span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// do search with searchKey</span>
    spotlight<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;searchResult&quot;</span><span class="token punctuation">,</span> items<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set result to spotlight</span>
    spotlight<span class="token punctuation">.</span><span class="token function">setRendered</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在显示页面上，可以通过EL表达式<code>#{content.data.key}</code>直接访问这里设置的变量,这其中的<code>key</code>就是上述设置变量时用到的<code>key</code>。</p> <h4 id="搜索结果显示"><a href="#搜索结果显示" class="header-anchor">#</a> 搜索结果显示</h4> <p><code>spotlight</code>插件显示，是通过一个独立的JSF视图文件来定义的。页面遵循JSF视图开发规则。但要注意，这个视图只是一个插件视图，所以文件上不能有<code>&lt;view&gt;,&lt;body&gt;,&lt;form&gt;</code>标签,并且视图必须在<code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>之间。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>f</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/core<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/html<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>ui</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/facelets<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>caw</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>outputScript</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu.min.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/spotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>outputScript</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>outputStylesheet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/spotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>outputStylesheet</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container spotlight-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{caw:mess('spotlight.menu')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>menuSpotlight</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{content.data.searchResult}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>menuSpotlight</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="spotlight注册"><a href="#spotlight注册" class="header-anchor">#</a> Spotlight注册</h4> <p><code>spotlight</code>需要在<code>app.xml</code>中注册。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spotlight</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share.spotlight.menu<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/spotlight/menu.xhtml<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.spotlight.MenuSpotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spotlight</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>spotlight</code>属性说明</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td><code>spotlight</code>标识，系统唯一</td></tr> <tr><td>mess</td> <td><code>spotlight</code>描述， <code>messCode</code>类型</td></tr> <tr><td>src</td> <td><code>spotlight</code>插件显示文件</td></tr> <tr><td>helper</td> <td><code>spotlight</code>插件搜索处理类</td></tr></tbody></table> <h3 id="widget插件"><a href="#widget插件" class="header-anchor">#</a> Widget插件</h3> <p><code>widget</code>插件与<code>spotlight</code>类似，区别在于<code>widget</code>不需要用户触发，当用户将<code>widget</code>配置在桌面上之后，每次打开M18系统，桌面上都会对应<code>widget</code>插件。</p> <p><code>widget</code>插件包含两个视图： <strong>用户配置视图（可以没有）<strong>和</strong>显示视图</strong></p> <h4 id="widget显示视图"><a href="#widget显示视图" class="header-anchor">#</a> widget显示视图</h4> <p>M18允许开发者提供一个Java类来为<strong>显示视图</strong>准备数据，类似<code>spotlight</code>的搜索动作。</p> <p>这个Java类，必须实现接口<code>WidgetHelper</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">WidgetHelper</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepareWidget</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawWidgetContent</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">widgetInit</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">CawWidgetContent</span> content<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>注意：</strong></p> <ul><li><code>widgetInit</code>只在<code>widget</code>初始化时调用一次</li> <li><code>prepareWidget</code>则在每次视图显示前，调用，以为视图提供最新的数据</li> <li><code>CawWidgetContent</code>可以获取当前<code>widget</code>的所有信息。</li></ul></blockquote> <p>设置环境变量，通过方法<code>CawWidgetContent.setData(String key, Object obj)</code>来设置变量，页面通过EL表达式<code>#{content.data.key}</code>来获取。</p> <p><strong>显示视图</strong>的编写，与<code>spotlight</code>一致。文件上不能有<code>&lt;view&gt;,&lt;body&gt;,&lt;form&gt;</code>标签,并且视图必须在<code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>之间。</p> <h4 id="widget配置视图"><a href="#widget配置视图" class="header-anchor">#</a> widget配置视图</h4> <p>配置视图需要提供一个描述配置信息的Java类，这个Java对象必须能够通过fastjson<code>JSON.toJSONString</code>和<code>JSON.parseObject</code>进行转换。所以建议是POJO对象。或者，这个JAVA类实现了<code>CawJsonSerializable</code>接口。</p> <p>在<strong>显示视图</strong>上，可以通过<code>#{content.option}</code>获取当前<code>widget</code>的配置数据对象。</p> <p><strong>配置视图</strong>文件要求与<code>widget</code>显示视图要求一致。文件上不能有<code>&lt;view&gt;,&lt;body&gt;,&lt;form&gt;</code>标签,并且视图必须在<code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>之间。</p> <p><strong>配置视图</strong>文件中可以使用Java Bean。但是这个JavaBean必须实现<code>WidgetOptionBean</code>接口</p> <h4 id="widget注册"><a href="#widget注册" class="header-anchor">#</a> widget注册</h4> <p><code>widget</code>需要在<code>app.xml</code>中注册，方能生效。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linkWidget<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widget.linkWidget<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/widget/linkWidget.xhtml<span class="token punctuation">&quot;</span></span> 
            <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.widget.LinkWidget<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linkWidget.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img/widget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icon</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widget.linkWidget.description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token cdata">&lt;![CDATA[&lt;p&gt;A widget to show a link with an image!&lt;/p&gt;]]&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/widget/linkWidgetOption.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          com.multiable.web.widget.LinkOption
      	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>widget</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>	
</code></pre></div><p><code>widget</code>属性介绍</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td><code>widget</code>唯一标识，系统唯一</td></tr> <tr><td>mess</td> <td><code>widget</code>描述文本。 <code>messCode</code>类型</td></tr> <tr><td>src</td> <td><code>widget</code>显示视图文件</td></tr> <tr><td>helper</td> <td><code>widget</code>数据处理Java类</td></tr> <tr><td>width</td> <td><code>widget</code>默认所占栏数。（总共12栏）</td></tr> <tr><td>height</td> <td><code>widget</code>默认所占行数。（行高30px）</td></tr></tbody></table> <p><code>&lt;icon/&gt;</code>用来给<code>widget</code>指定一个图片标识。</p> <p><code>&lt;description&gt;&lt;/description</code>用来指定描述<code>widget</code>的文本。 通过属性<code>mess</code>可以指定一个<code>messCode</code>文本。 也可以通过<code>description</code>中间文本来指定。 支持html格式。</p> <p><code>&lt;option src=&quot;resourcePath&quot;&gt;className&lt;/option&gt;</code>用来指定<code>widget</code>的配置信息。 <code>src</code>属性指明配置视图文件路径。<code>className</code>指定<code>widget</code>的配置数据Java对象。</p> <h2 id="皮肤开发"><a href="#皮肤开发" class="header-anchor">#</a> 皮肤开发</h2> <h3 id="概述-2"><a href="#概述-2" class="header-anchor">#</a> 概述</h3> <h4 id="主题分类"><a href="#主题分类" class="header-anchor">#</a> 主题分类</h4> <p>M18平台主题分为“<strong>系统主题</strong>”和“<strong>用户主题</strong>”。</p> <ul><li><p>系统主题，只允许开发者增加。用户不可修改。</p></li> <li><p>用户主题，每个用户可以有一个用户主题，用户可以以当前主题为模板，调整主题的色板，从而生成自己的个性化主题。</p> <p><img src="/assets/img/theme.04e44712.jpg" alt="theme"></p></li></ul> <h4 id="用户自定义"><a href="#用户自定义" class="header-anchor">#</a> 用户自定义</h4> <p>用户自定义主题，就是用户定义“主题色板”的一个过程。</p> <p>系统提供了一套”主题色板“，包含一系列<strong>颜色变量</strong>，用户可以给每一个<strong>颜色变量</strong>分配一个颜色。</p> <p>这一系列<strong>颜色变量</strong>包含</p> <ul><li><p><strong>M18系统基础颜色变量</strong></p> <p>系统基础颜色变量包含以下五种：</p> <p><code>Primary</code>、<code>Info</code>、<code>Warning</code>、<code>Danger</code>、<code>Success</code></p> <p>系统也提供了额外的颜色变量，用来控制<strong>组件</strong>的主题色。比如<code>系统文本颜色</code>、<code>必填栏位标签颜色</code>等。</p></li> <li><p><strong>特殊页面颜色变量</strong></p> <p>M18平台为系统主页提供了颜色变量，让用户来调整主页主题色彩。</p></li> <li><p><strong>开发者提供特定页面的颜色变量</strong>。</p> <p>M18平台允许开发者为特定页面编写颜色变量。类似系统特殊页面颜色变量。</p></li></ul> <p><img src="/assets/img/themeui.cdb75abb.jpg" alt="themeui"></p> <h3 id="主题css文件的编写"><a href="#主题css文件的编写" class="header-anchor">#</a> 主题CSS文件的编写</h3> <p>只有<strong>希望页面能够跟随主题切换而变换色彩</strong>的时候，才需要编写<strong>主题css文件</strong>.</p> <h4 id="主题css文件命名和路径规则"><a href="#主题css文件命名和路径规则" class="header-anchor">#</a> 主题CSS文件命名和路径规则</h4> <ul><li><strong>主题css</strong> 文件必须放在<code>WebContent/resources/themes/*/</code>下面。（<code>*</code>为任意路径）</li> <li><strong>主题css</strong>文件名必须是<code>*.dynamic.css</code>. (<code>*</code>为任意文件名)</li></ul> <h4 id="主题css文件编写语法"><a href="#主题css文件编写语法" class="header-anchor">#</a> 主题CSS文件编写语法</h4> <div class="language-css extra-class"><pre class="language-css"><code>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-header-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>primary<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-logo-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-header-background + 10%<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-header-color<span class="token punctuation">}</span> <span class="token selector">= #fafafa
set</span> <span class="token punctuation">{</span>app-header-active-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-header-background + 10%<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-menu-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>darkGray-<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-color<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>lightGray<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-active-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-menu-background + 40%<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-active-color<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-menu-color - 50%<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-tab-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>body-bg<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-active-tab<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>warning * 0.5<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-notice-tab<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>primary * 0.3<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-homepage-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>body-bg<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">.main-container,
.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">.main-container:before</span> <span class="token punctuation">{</span>
	<span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-homepage-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container</span> <span class="token punctuation">{</span>
  <span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-header-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container header.top-header .logo</span> <span class="token punctuation">{</span>
  <span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-logo-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container header.top-header .header-link</span> <span class="token punctuation">{</span>
  <span class="token selector">color:</span> <span class="token punctuation">{</span>app-header-color<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>定义一个变量： <code>set {变量名} = 变量值</code></p> <p><code>变量值</code>可以是一个固定值，也可以引用其他变量的值。如果是引用其他变量的值，必须使用<code>{其他变量}</code></p></li> <li><p>运算操作符:<code>-</code>,<code>+</code>,<code>*</code></p> <p><code>-</code>: 使颜色变淡， 后面接<code>a%</code>, <code>a</code>在<code>0~100</code>之间</p> <p><code>+</code>: 使颜色加深，后面接<code>a%</code>, <code>a</code>在<code>0~100</code>之间</p> <p><code>*</code>: 是颜色变透明，后面接一个<code>float</code>数值</p></li> <li><p>使用变量</p> <p>在css文件中，使用变量<code>{变量名}</code></p></li></ul> <h4 id="主题css文件可使用的变量"><a href="#主题css文件可使用的变量" class="header-anchor">#</a> 主题CSS文件可使用的变量</h4> <ul><li>系统基础颜色变量包含以下八种：</li></ul> <p><code>primary</code>、<code>info</code>、<code>warning</code>、<code>danger</code>、<code>success</code>、<code>gray</code>、<code>lightGray</code>、<code>darkGray</code></p> <p>以上每种颜色变量，都具备两种渐变色变量，以<code>primary</code>为例，存在<code>primary-</code>，<code>primary+</code>两种变量。</p> <ul><li><p>Bootstrap颜色变量（100+各变量）</p> <p>参考文件<code>WebContent/themes/css/caw.variable.dynamic.css</code></p> <p>​</p></li></ul> <h3 id="如何增加系统主题"><a href="#如何增加系统主题" class="header-anchor">#</a> 如何增加系统主题</h3> <p>开发者如果要增加一套系统主题，只需要在<code>faces.xml</code>配置一套主题色板即可。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.blue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 	
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#2D7DD2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3BAFDA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#EEB902<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#F45D01<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#97CC04<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-homepage-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#f9f9f9<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-bg-disabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{lightGray}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>token</span><span class="token punctuation">&gt;</span></span>
	 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>配置一套主题色板，最少只需要配置五种基本色彩就可以了。</p> <p><code>theme</code>属性说明</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>主题唯一标识，系统唯一</td></tr> <tr><td>description</td> <td>主题描述文本，<code>messCode</code>类型</td></tr></tbody></table> <p><code>&lt;color&gt;</code>来设置颜色变量， <code>name</code>是变量名， <code>value</code>是变量值。</p> <p><code>&lt;token&gt;</code>用来设置颜色变量的依赖关系。<code>key</code>是变量名， <code>value</code>是一个颜色变量表达式</p> <h3 id="如何让页面支持-用户自定义主题"><a href="#如何让页面支持-用户自定义主题" class="header-anchor">#</a> 如何让页面支持“用户自定义主题”</h3> <p>只有开发者的页面上定义了额外的变量，而且期望用户能够单独设置页面主题时，才需要处理。</p> <h4 id="注册"><a href="#注册" class="header-anchor">#</a> 注册</h4> <p>在<code>faces.xml</code>中注册主题变量/css文件/demo页面</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>specification</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.spec.app<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">demo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/theme/appDemo.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{primary}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.header.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-tab-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{body-bg}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.tab.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-menu-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{darkGray-}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.menu.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-homepage-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{body-bg + 5%}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.homepage.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme/app.dynamic.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>themes/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>specification</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces</span><span class="token punctuation">&gt;</span></span>	 
</code></pre></div><p><code>specification</code>用来注册，属性说明如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>系统唯一标识</td></tr> <tr><td>description</td> <td>描述文本，<code>messCode</code>类型</td></tr> <tr><td>demo</td> <td>用作实例的视图文件</td></tr></tbody></table> <p><code>token</code>用来定义变量，属性说明如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>变量名</td></tr> <tr><td>value</td> <td>默认值，必须与系统提供的变量关联起来</td></tr> <tr><td>description</td> <td>描述文本，<code>messCode</code>类型</td></tr></tbody></table> <p><code>resource</code>用来指定主题css文件。</p> <h4 id="css文件编写和使用"><a href="#css文件编写和使用" class="header-anchor">#</a> CSS文件编写和使用</h4> <p>主题css文件就是一个dynamic.css文件，编写方法见<a href="#%E4%B8%BB%E9%A2%98css%E6%96%87%E4%BB%B6%E7%9A%84%E7%BC%96%E5%86%99">主题CSS文件的编写</a></p> <h4 id="demo页面编写"><a href="#demo页面编写" class="header-anchor">#</a> demo页面编写</h4> <p>demo页面，只是一个JSF视图，遵循JSF视图开发规则。但是文件上不能有<code>&lt;view&gt;,&lt;body&gt;,&lt;form&gt;</code>标签,并且视图必须在<code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>之间。</p> <h2 id="扩展现有功能"><a href="#扩展现有功能" class="header-anchor">#</a> 扩展现有功能</h2> <h3 id="扩展模块"><a href="#扩展模块" class="header-anchor">#</a> 扩展模块</h3> <p><strong>扩展模块</strong>指在现有的模块功能上，扩展新的功能。</p> <h4 id="扩展注册"><a href="#扩展注册" class="header-anchor">#</a> 扩展注册</h4> <p><strong>扩展模块</strong>需要在<code>app.xml</code>中注册。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>extension</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formComp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>caw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frame<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>controller</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>controller</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>/extension/extensionTest.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>caw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frame<span class="token punctuation">&quot;</span></span> <span class="token attr-name">apDebug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>/extension/extensionEmployee.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>extension</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>	
</code></pre></div><ul><li><code>&lt;view&gt;</code>用来指定扩展的目标视图。属性说明如下</li></ul> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>目标视图的编号。Frame视图上，<code>code</code>默认是<code>navmenu.xml</code>上配置的<code>code</code></td></tr> <tr><td>app</td> <td>目标视图所在的App编号。</td></tr> <tr><td>filter</td> <td>用来过滤视图的Java类。必须实现<code>ViewFilter</code>接口。</td></tr> <tr><td>type</td> <td>视图类型。目前有<code>frame</code>,<code>dialog</code>,`namecard</td></tr></tbody></table> <p><code>ViewFilter</code>接口：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ViewFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isViewIncluded</span><span class="token punctuation">(</span><span class="token class-name">ViewExtension</span> extension<span class="token punctuation">,</span> <span class="token class-name">ViewType</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个接口用来判断，视图（<code>ViewType=type</code>,<code>menuCode=code</code>)是否要运用这个扩展<code>extension</code>, 返回<code>true</code>则意味着扩展对这个视图生效。</p> <ul><li><code>&lt;controller&gt;</code>用来给指定视图，扩展视图控制器。 扩展视图控制器的Java类，必须根据View类型继承于以下class的其中一个： <code>ViewControllerWrapper</code>、<code>DialogControllerWrapper</code>、<code>FrameControllerWrapper</code>、<code>ModuleControllerWrapper</code></li> <li><code>&lt;page&gt;</code>用来指定扩展视图文件。</li> <li><code>&lt;listener&gt;</code>用来给指定视图，增加<code>ViewListener</code></li></ul> <h4 id="扩展标签和新增组件"><a href="#扩展标签和新增组件" class="header-anchor">#</a> 扩展标签和新增组件</h4> <p>在扩展标签和新增组件前，开发者必须指定一个原始图上的组件作为扩展目标。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>targetId<span class="token punctuation">&quot;</span></span><span class="token attr-name">,</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before|after|prepend|append<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>&lt;caw:extendComponent&gt;</code>用来确定在原始图上<code>target</code>组件的那个位置进行扩展：</p> <ul><li><strong>before</strong> : 在<code>target</code>组件的前面扩展。新扩展的元素与<code>target</code>在同一级（同一个父组件）</li> <li><strong>after</strong>：在<code>target</code>组件的后面扩展。</li> <li><strong>prepend</strong>：扩展为<code>target</code>组件的子组件，并且在最前面增加扩展。</li> <li><strong>append</strong>： 扩展为<code>target</code>组件的子组件，并且在最后面增加扩展。</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--在code组件前面，增加一个按钮--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Extend Button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prepend<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!--给button组件增加一个事件--&gt;</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxbean.doAction<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="扩展-修改组件属性"><a href="#扩展-修改组件属性" class="header-anchor">#</a> 扩展/修改组件属性</h4> <p>同扩展标签/增加组件一样，修改组件属性也需要通过<code>&lt;caw:extendComponent&gt;</code>来指定组件，但是不再需要<code>action</code>属性。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>//原视图
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>border: 1px solid blue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>

//扩展视图
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extend<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>通过<code>&lt;caw:setProperty&gt;</code>来修改目标组件属性，其属性说明如下</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td>修改/扩展的属性名</td></tr> <tr><td>value</td> <td>属性值</td></tr> <tr><td>updateType</td> <td>对原组件属性的修改方式：<code>extend</code>和<code>replace</code>。</td></tr></tbody></table> <p><strong>对于<code>style</code>,<code>styleClass</code>属性</strong>：</p> <p>以上述代码为例，组件<code>employee_code</code>的<code>style</code>属性会同时具备两种设定。显示效果为：</p> <p><img src="data:image/jpeg;base64,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AOTf/Ih/rXl/n9x5XRXqn/Ckbn/oZov/AAXH/wCO0f8ACkbn/oZov/Bcf/jtH9lz/nj/AOTf/Ih/rXl/n9xyXw5/5KPof/XSb/0nlr6MrzXwz8KZvD3iWx1eTXUuRas7eStkY926Nk+95hx97PTtXpVelCn7OlCndNpdL92+qR8VnmNpY3GOtS2styN4InnjnZcyRghDk8Z6/wAqrPpNi7SMYSrSSCVmR2U7gMZBB4/CrtFM8Zxi90VoLC2toykMW1SS2Nx6nrRVmipcIvVopNpWQVRGoZ1xtN8r7tsJ/M3erFcYx7dc0UVXVL+tmD2b/rdF6iiigCpcahFb31vZsrmSeOR0IAwAmM5/76FN0jUP7V0az1DyvK+0wrL5e7dtyM4zgZoooWz+X6gXaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAK7KJbp0ZnCqikBXK9S3ofYU77LH/em/7/P/AI0UUAJENlzJGCxUIrDcxbklvX6Cp6KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigCvfXkdhZyXUqsUjGSFHNRaVqkGr2f2q3SRU3FcSAA8fQmiihdTNyftFHpYu0UUUGh//9k=" alt="extprop"></p> <p>如果将扩展代码修改为</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>repolace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>则组件<code>employee_code</code>在原视图文件中的设定会被清除。效果为：</p> <p><img src="data:image/jpeg;base64,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" alt="extprop1"></p> <p><strong>对于其他属性</strong>而言， 如果扩展属性的<code>value</code>是一个<code>literalValue</code>（不是EL表达式）， 则会直接覆盖原始视图上组件的属性（采用的updateType=<code>replace</code>）。只有扩展属性的<code>value</code>是一个EL表达式的时候，updateType属性才会效果。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>//原始视图
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

//扩展视图
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>repolace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>扩展<code>maxlength</code>前：</p> <p><img src="data:image/jpeg;base64,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CiIJIytHtGAVYEMD7g5qm7v+v6/pkLT+vIj0LULjUtOMt1byQypI0ZLwPD5gB4cI43AEdj05GT1rTqvZWNvp1sLe1jKRgljlizMSckliSST6k5qxSY0FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVDdf6lf+ukf/oYqaorhWeLCjJDK2PXDA/0oAlqG6/1K/8AXSP/ANDFHnyf8+s35p/8VTJGkmCp5EifOrZYrjhgex9qALNFFFABRRRQAUUUUAFFFFAHnMt19h8Tz3O3d5d05I9RuOaTU9QguLaG2tlk8uN3kJkABJY57E9K7a50HTLudpprUNI3LEMy5/I1D/wjGj/8+f8A5Ff/ABrypYKs04pqz/4Hl5Iw9nJXscLqFyl1c7ogwiVFRA3XAAFaa63At7ayeXKY0tfs8owM9OSOa6f/AIRjR/8Anz/8iv8A40f8Ixo//Pn/AORX/wAaFg66vqtXf8/LzEqc07o4rU72O7+zRwBxFbxCNS4AJ9TgV6DpX/IIsv8Ar3T/ANBFVB4Z0cEEWY49ZH/xrVVQqhVAAAwAO1dGFw86c5Sm1qaQg07sWiiiu00CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z" alt="extprop2"></p> <p>扩展后， maxlength修改为15</p> <p><img src="data:image/jpeg;base64,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YF8pcRcY+Xj5ePSh6/15WEcfp+r6jFo2m26TIkmpafALLZCiiKXIWQhQAMBWV8Y6K3apb/XNZTWb5beO48mxnhiC7rZIZAwQkyGRg4J3EDbgZA68iuuSztY1gVLaFVtxiELGAI+MfL6cccUybTbC4vIryaytpLqL/VzPEpdPoxGRTb1uHQtUUUUgCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKhX/j9l/65p/NqmqBllWdpI1RtyhSGYjGCfY+tAE9Qr/x+y/9c0/m1G66/wCeMP8A39P/AMTREknmvJIFUsoXCtnpn2HrQBNRRRQAUUUUAFFFFABXJeNwcWJxwPMGf++a62o5YIrhNk0SSL12uoI/Wsa9L2tNw7kzjzKx51aanDZwN5Vni5aJozL5pwc99pHX8aqi626e1qEwXkDs+eoAwBj8TXpH9lad/wA+Fr/35X/Cj+ytO/58LX/vyv8AhXA8BUf2l9xl7KXc87tr/wCz6dd2nlbvtG35t2NuDnp3qb+04YrGaC2s/KedFSR/NLA49ARxn61339lad/z4Wv8A35X/AAo/srTv+fC1/wC/K/4U/qNW1uZbW26AqUl1Od8EA7b5scEoAf8AvqutqOGCG3TZDEkaZztRQB+lSV3UKXsqah2NYR5VYKKKK2KCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/9k=" alt="extprop3"></p> <p>如果扩展代码修改为：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>repolace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.testProperty(VALUE)}<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extend<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxxBean</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">testProperty</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这段代码中，EL表达式中，通过表达式<code>VALUE</code>就获取了扩展之前的值，这样可以通过代码来扩展。修改如下：</p> <p><img src="data:image/jpeg;base64,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" alt="extprop4"></p> <p>如果在上述代码中，updateType=<code>replace</code>， 则EL表达式中，不能使用<code>VALUE</code>变量。</p> <p><img src="data:image/jpeg;base64,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" alt="extprop5"></p> <h3 id="装饰器-decorator"><a href="#装饰器-decorator" class="header-anchor">#</a> 装饰器(DECORATOR)</h3> <h4 id="装饰器介绍"><a href="#装饰器介绍" class="header-anchor">#</a> 装饰器介绍</h4> <p>装饰器（Decorator)， 是在代码中提供给其他开发者干预、调整代码结果的一种方式。其本质上是接口类（Interface)</p> <p>只有期望其他开发者来进行扩展的时候， 才需要定义装饰器。</p> <p>创建一个装饰器，只有两步：</p> <ol><li>定义一个装饰器（就是一个Java Interface）</li> <li>在代码中启用这个装饰器</li></ol> <p>装饰器提供两种形式：</p> <ul><li>事件形式。 即通知所有注册的装饰器，执行某个动作。</li> <li>扩展值形式。即通知所有注册的装饰器，来对某个值进行调整，最终将这个调整后的值返回给主线程。</li></ul> <h4 id="定义装饰器"><a href="#定义装饰器" class="header-anchor">#</a> 定义装饰器</h4> <ul><li>只需要定义一个Interface， 这个Interface必须继承<code>ViewDecorator</code>。</li> <li>在这个Interface中，定义你期望第三方开发者实现的API
实例：M18版本比较装饰器</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VersionCompareDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FieldLocator</span><span class="token punctuation">&gt;</span></span> <span class="token function">versionCompare</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> comparedEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="启用装饰器"><a href="#启用装饰器" class="header-anchor">#</a> 启用装饰器</h4> <p>定义好装饰器后，需要在需要扩展的代码处，启用装饰器。
启用装饰器，有两种方法，对应装饰器的两种形式：</p> <ol><li>事件形式。这种情况仅用于：通知所有装饰器，执行某个动作（函数），不需要返回值。</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ViewController</span>
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">notifyDecorator</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token class-name">DecorateAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">notifyDecorator</span><span class="token punctuation">(</span><span class="token class-name">MyDecorator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> 
                          <span class="token punctuation">(</span>decorator<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> decorator<span class="token punctuation">.</span><span class="token function">myDecoratorAction</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p><code>target</code>: 装饰器的定义类。比如<code>VersionCompareDecorator</code></p></li> <li><p><code>action</code>: 事件接口实现类，接口定义如下</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAction</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>params</code> 用来传入<code>DecorateAction</code>的参数</p></li></ul> <ol start="2"><li><p>值扩展形式。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ViewController</span>
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">visitDecorator</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token class-name">DecorateVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> visitor<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">,</span> <span class="token class-name">DecorateVisitCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">visitDecorator</span><span class="token punctuation">(</span><span class="token class-name">VersionCompareDecorator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
				<span class="token punctuation">(</span>decorator<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> decorator<span class="token punctuation">.</span><span class="token function">versionCompare</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span><span class="token punctuation">)</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">SqlEntity</span><span class="token punctuation">)</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> compareEntity<span class="token punctuation">,</span> comparedEntity <span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p><code>target</code>: 同上，指定装饰器的接口类。</p></li> <li><p><code>visitor</code>: 类似“事件形式”中的<code>action</code>， 是一个<code>DecorateVisitor</code>实现类。用来指定调用装饰器指定的函数，并返回一个值。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>params</code>: 用来传入<code>DecorateVisitor</code>的参数</p></li> <li><p><code>callback</code>: <code>DecorateVisitCallback</code>的实现对象。用来对<code>visitor</code>的返回值进行操作，判断是否继续调用后面的装饰器。如果<code>callback</code>的返回值是<code>false</code>， 则后续的装饰器不会调用。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateVisitCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">visited</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol> <h4 id="使用装饰器扩展功能"><a href="#使用装饰器扩展功能" class="header-anchor">#</a> 使用装饰器扩展功能</h4> <p>开发者使用已经定义的装饰器来扩展现有功能是，必须定义一个装饰器的实现类。</p> <ul><li>装饰器可以是一个单独的Java类</li> <li>装饰器可以是一个Java Bean</li> <li>装饰器可以使一个ViewListener</li></ul> <p>要让实现的装饰器，发挥作用，必须在视图中注册：</p> <ul><li><p>如果装饰器是Java Bean 或者ViewListener， 因为Bean和ViewListener已经注册，所以不需要额外的注册。</p></li> <li><p>如果装饰器是一个单独的Java类，则需要注册：</p> <ol><li><p>页面通过<code>&lt;caw:viewDecorator class=&quot;className&quot;/&gt;</code>注册</p></li> <li><p>页面通过<code>&lt;caw:viewDecorator value=&quot;#{returnDecorator()}&quot;</code>注册</p></li> <li><p>在ViewListener的<code>initialized</code>方法中注册</p> <div class="language-java extra-class"><pre class="language-java"><code>controller<span class="token punctuation">.</span><span class="token function">addViewDecorator</span><span class="token punctuation">(</span>myDecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>​</p></li></ol></li></ul> <h2 id="组件通用功能编写"><a href="#组件通用功能编写" class="header-anchor">#</a> 组件通用功能编写</h2> <p>在编写新组件时，如果期望组件支持M18平台通用功能，请参阅以下说明</p> <h3 id="支持mess自定义"><a href="#支持mess自定义" class="header-anchor">#</a> 支持mess自定义</h3> <p>在需要支持用户自定Mess的html元素上，增加<code>data-mess</code>属性，属性值，就是当前html元素上的<code>messCode</code>。如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">data-mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Employee<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当用户开启“自定义mess“功能后，就可以通过右击上述<code>&lt;label&gt;</code>元素，进行&quot;自定义mess&quot;操作。</p> <h3 id="支持组件定位"><a href="#支持组件定位" class="header-anchor">#</a> 支持组件定位</h3> <p>当后台的错误消息，包含组件定位时，前端会根据组件定位信息，找到相应组件，并触发“高亮”事件。</p> <p>后台通过<code>tableName</code>, <code>columnName</code>, <code>rowId</code>生成组件定位信息： <code>tableName.columnName.rowId</code></p> <ul><li>如果是一对一的Table栏位（主表栏位）， 定位信息是<code>tableName.columnName</code></li> <li>如果是一对多的Table栏位, 则定位信息是<code>tableName.columnName.rowId</code></li> <li>如果定位信息指向一个Table， 则信息是<code>tableName</code></li></ul> <p>组件要支持“组件高亮”事件，则必须定义组件的“定位信息”: 在组件的最外层html元素上（比如div)， 存在<code>data-locator</code>属性，且其值符合上述“定位信息”规则。 当后台消息包含了这个组件定位信息时，则会触发该组件的“高亮”事件。</p> <p>在<code>JavaScript</code>代码中，通过以下方法，添加“高亮”事件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#componentId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'highlight'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> locator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>highlight<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出highlight类型，目前有message、versionCompare两种。</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出highlight状态， “on”为高亮显示，“off”为取消高亮显示</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="支持用户自定义"><a href="#支持用户自定义" class="header-anchor">#</a> 支持用户自定义</h3> <p>在M18平台中， 用户自定的UI包括</p> <ul><li>布局自定义</li> <li>自定义栏位，支持用户选择组件</li> <li>视图上的组件，支持用户定义属性</li></ul> <p><strong>布局自定义</strong>功能不需要开发者做任何处理。</p> <p>如果开发者新开发的组件，要支持<strong>自定义栏位</strong>和<strong>自定义属性</strong>， 请查阅以下说明</p> <h4 id="组件支持自定义栏位"><a href="#组件支持自定义栏位" class="header-anchor">#</a> 组件支持自定义栏位</h4> <p>组件如果需要支持<strong>自定义栏位</strong>，则必须在<code>faces.xml</code>中配置，注明组件支持哪种类型的栏位。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces-library</span> <span class="token attr-name">ns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>faces.lib.caw<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces-library</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如上示例， 通过<code>&lt;udfSupport&gt;</code>来设置组件支持的“自定义栏位”类型。</p> <p>自定义栏位类型有<code>string</code>,<code>text</code>,<code>number</code>,<code>date</code>,<code>boolean</code>,<code>color</code>,<code>image</code>,<code>combo</code>,<code>lookup</code>。</p> <h4 id="组件支持用户自定义属性"><a href="#组件支持用户自定义属性" class="header-anchor">#</a> 组件支持用户自定义属性</h4> <p>组件如果需要支持用户配置属性，则必须在<code>faces.xml</code>中，指明哪些属性支持用户配置。</p> <p>以<code>inputText</code>为例</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> 
              <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.udf.InputTextHelper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>320<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess-label<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>labelMess<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.label
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess-info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.info
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>markedRequired<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colReq<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.required
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>readonly<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.readonly
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textLength<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.length
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件通过<code>attribute</code>来声明属性信息。 <code>attribute</code>属性如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td>属性名称</td></tr> <tr><td>type</td> <td>属性值类型。支持<code>Byte</code>,<code>Boolean</code>,<code>Character</code>,<code>Short</code>,<code>Integer</code>,<code>Long</code>,<code>Float</code>,<code>Double</code>,<code>String</code></td></tr> <tr><td>default</td> <td>默认值</td></tr> <tr><td>source</td> <td>从自定义栏位信息中的那个栏位获取值，自定义栏位可用属性见表格下方。</td></tr> <tr><td>editor</td> <td>指明用来设置当前属性值的组件类型，可选有：<code>css</code>, <code>mess</code> (仅当属性值类型是<code>String</code>时有效)</td></tr> <tr><td>visitable</td> <td>是否显示在用户配置属性界面上。</td></tr> <tr><td>editable</td> <td>是否允许用户在配置属性界面上修改</td></tr> <tr><td>tip</td> <td>用来提示用户当前属性的用途，<code>messCode</code>类型</td></tr> <tr><td>option</td> <td>如果当前属性用下拉框选择项来编辑，那么option用来指明<code>pattern</code></td></tr> <tr><td>src</td> <td>指明一个JSF视图作为属性的配置视图</td></tr> <tr><td>required</td> <td>是否必填</td></tr></tbody></table> <p>自定义栏位中可用属性<code>code</code>,<code>desc</code>,<code>colType</code>,<code>labelMess</code>,<code>colReq</code>,<code>textLength</code>,<code>numPoint</code>,<code>numDecimal</code>,<code>searchTypeId</code>,<code>stSearchType</code></p> <h4 id="组件编写额外的设定页面"><a href="#组件编写额外的设定页面" class="header-anchor">#</a> 组件编写额外的设定页面</h4> <p>组件如果要提供特定的配置页面让用户配置，可参照如下操作：</p> <ol><li><p><code>&lt;udfSupport&gt;</code>上指定配置视图文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">settingUrl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/dialog/myConfig.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>传入到视图的参数</p> <p>配置视图是以dialog的形式出现。传入视图的参数有<code>attributes</code>，一个<code>Map&lt;String, Object&gt;</code>,包含当前组件的各个属性值。</p></li> <li><p>视图返回属性值</p> <p>dialog关闭时，必须传回修改后的属性值<code>Map&lt;String, Object&gt;</code>。处理方式见<a href="#%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%85%B3%E9%97%AD%E5%92%8C%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95">对话框关闭和回调方法</a></p></li></ol> <h4 id="将用户自定义的属性值-运用到组件上"><a href="#将用户自定义的属性值-运用到组件上" class="header-anchor">#</a> 将用户自定义的属性值，运用到组件上</h4> <ul><li>如果自定义的属性名，是组件本身支持的，则不需要额外工作，就能生效</li> <li>如果自定义的属性名，不是组件支持的，而是需要开发者进行转换的，则需要开发者定义一个<code>UdfHelper</code>。</li></ul> <p>定义<code>UdfHelper</code>步骤：</p> <ol><li><p>定义UdfHelper类。 （必须继承于<code>UdfHelper</code>）</p></li> <li><p>在<code>&lt;udfSupport&gt;</code>上通过<code>helper</code>属性设置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.udf.InputTextHelper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在<code>UdfHelper</code>中, 有两个方法必须覆写。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyTag</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">Tag</span> tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TagAttribute</span> attribute <span class="token operator">=</span> tag<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;myProp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token class-name">String</span> attrValue <span class="token operator">=</span> attribute<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">'style'</span><span class="token punctuation">,</span> attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这个方法中，所有的组件属性都在<code>Tag</code>中，通过<code>Tag</code>获取组件不支持的属性(<code>myProp</code>)，然后处理<code>myProp</code>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyAttribute</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> attrValue <span class="token operator">=</span> attributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'myProp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   component<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">'style'</span><span class="token punctuation">,</span> attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这个方法中，所有组件属性都在<code>attributes</code>中。 同样处理<code>myProp</code></p></li></ol> <h2 id="特定组件-功能介绍"><a href="#特定组件-功能介绍" class="header-anchor">#</a> 特定组件/功能介绍</h2> <h3 id="模块向导"><a href="#模块向导" class="header-anchor">#</a> 模块向导</h3> <p>模块向导是将一系列模块合在一起，用一个向导界面向用户展示，并引导用户做出一系列复杂动作。</p> <p>每个模块想到，都具备两个元素：</p> <ul><li>key： 唯一标识</li> <li>path: 向导视图文件</li></ul> <h4 id="启动向导"><a href="#启动向导" class="header-anchor">#</a> 启动向导</h4> <ul><li><p>Java端启动一个向导</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">startGuide</span><span class="token punctuation">(</span><span class="token string">&quot;udfEditor&quot;</span><span class="token punctuation">,</span> '<span class="token operator">/</span>view<span class="token operator">/</span>frame<span class="token operator">/</span>udfEditorGuide<span class="token punctuation">.</span>xhtml'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>JavaScript启动一个向导</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>top<span class="token punctuation">.</span>myApp<span class="token punctuation">.</span><span class="token function">startGuide</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'udfEditor'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/view/frame/udfEditorGuide.xhtml'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="向导文件的编写"><a href="#向导文件的编写" class="header-anchor">#</a> 向导文件的编写</h4> <p>向导视图遵循JSF视图规范。</p> <p>在向导视图中，通过一个向导组件（<code>&lt;caw:frameWizard&gt;</code>）来定制向导内容。</p> <p>向导示例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>beanDeclare</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ueGuide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>beanDeclare</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameWizard</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wizard<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height: 100%;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">completeValidator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateComplete}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	 <span class="token comment">&lt;!--定义开始视图--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>end<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--定义开始视图--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--定义消息显示视图--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfEditor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfEditor<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(0)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--定义步骤1说明画面--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMenu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMenu<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(1)}<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateStep}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--定义步骤2说明画面--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moduleFuncSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moduleFuncSetting<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(2)}<span class="token punctuation">&quot;</span></span>  
                   <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateStep}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   	  <span class="token comment">&lt;!--定义步骤2说明画面--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameWizard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><code>&lt;caw:frameWizard&gt;</code>属性说明</strong></p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>completeValidator</td> <td>指定一个EL表达式，用来判断用户是否完成向导所有指定步骤。</td></tr> <tr><td>onChange</td> <td>指定向导的变更事件（步骤变化时触发）</td></tr> <tr><td>onComplete</td> <td>指定向导完成时响应的函数</td></tr></tbody></table> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameWizard</span> <span class="token attr-name">completeValidator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.validateComplete<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">onChange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.onWizardChange<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">onComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.onWizardComplete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameWizard</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxBean.java</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validateComplete</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">FrameWizardCompleteEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">setValid</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//表明当前向导没有完成。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onWizardChange</span><span class="token punctuation">(</span><span class="token class-name">FrameWizardChangeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onWizardComplete</span><span class="token punctuation">(</span><span class="token class-name">FrameWizardCompleteEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>**<code>&lt;caw:frameStep</code>**用来设定向导的每一个步骤</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>menuCode</td> <td>指定这一步骤的Frame视图</td></tr> <tr><td>listener</td> <td>为这一步骤的Frame视图添加<code>ViewListener</code></td></tr> <tr><td>params</td> <td>为当前步骤的Frame视图传入的参数，接受<code>Map&lt;String, String</code></td></tr> <tr><td>validator</td> <td>为当前步骤增加一个校验方法：判断是否可以进入这一步骤。 如果<code>event.setValid(false)</code>， 则表示当前不能进入这一步骤</td></tr></tbody></table> <p><strong>validator</strong>示例</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>step1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.validateStep<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxBean</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validateStep</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">FrameWizardChagneEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> step <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;step1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">setValid</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>定制<code>facets</code></strong></p> <p>可以通过<code>facets</code>标签为<code>frameWizard</code>定制一些辅助视图：</p> <table><thead><tr><th><code>facets</code>名称</th> <th>说明</th></tr></thead> <tbody><tr><td>start</td> <td>为向导指定一个起始视图</td></tr> <tr><td>end</td> <td>为向导指定一个结束视图</td></tr> <tr><td>message</td> <td>为向导制定一个消息视图</td></tr></tbody></table> <h3 id="进度显示"><a href="#进度显示" class="header-anchor">#</a> 进度显示</h3> <h4 id="概述-3"><a href="#概述-3" class="header-anchor">#</a> 概述</h4> <p>当我们需要为一个后台动作，提供友好的进度显示时，可以参考M18提供的进度显示方案。</p> <h4 id="启动和销毁"><a href="#启动和销毁" class="header-anchor">#</a> 启动和销毁</h4> <p>启动和销毁只能在前端JavaScript中处理。</p> <h5 id="创建一个具备默认视图的进度条"><a href="#创建一个具备默认视图的进度条" class="header-anchor">#</a> 创建一个具备默认视图的进度条</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> progressBar <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createProgressbar</span><span class="token punctuation">(</span><span class="token string">'batchDelete'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">colorStyle</span><span class="token operator">:</span> <span class="token string">'primary'</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">interruptable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">progress</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">startValue</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'progress.batchDelete'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/jpeg;base64,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" alt="progressbar"></p> <p>这里的配置项说明如下：</p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>colorStyle</td> <td>定义颜色样式。可选<code>primary</code>,<code>warning</code>,<code>info</code>,<code>danger</code>,<code>success。</code></td></tr> <tr><td>interruptable</td> <td>是否可以中断， 默认<code>false</code>。</td></tr> <tr><td>showBar</td> <td>是否显示进度条，默认<code>true</code>。</td></tr> <tr><td>showProgressText</td> <td>是否显示百分比，默认<code>true。</code></td></tr> <tr><td>showDescription</td> <td>是否显示进度说明，默认<code>true。</code></td></tr> <tr><td>progress</td> <td>后台进度的配置。 <code>startValue</code>指任务到达后台时，主任务的进度值；<code>duration</code>后台任务占主任务的进度范围；<code>description</code>是主任务的描述</td></tr></tbody></table> <h5 id="创建一个自定义视图的进度条"><a href="#创建一个自定义视图的进度条" class="header-anchor">#</a> 创建一个自定义视图的进度条</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//定义一个进度视图, 并将其放到页面上</span>
<span class="token keyword">var</span> myProgressUI <span class="token operator">=</span> $<span class="token punctuation">(</span>'<span class="token generics"><span class="token punctuation">&lt;</span>div<span class="token punctuation">&gt;</span></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建一个进度对象</span>
<span class="token keyword">var</span> progress <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createProgress</span><span class="token punctuation">(</span>'myProgressBar'<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//监听事件ready/update/end/destroy， 更新自定义的进度视图</span>
progress<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token char">'update'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
  myProgressUI<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>progress <span class="token operator">+</span> <span class="token char">'%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="启动进度条"><a href="#启动进度条" class="header-anchor">#</a> 启动进度条</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//默认进度条</span>
progressBar<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//action here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//自定义视图的进度条</span>
progress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>启动进度条的同时，指定一个动作。</p> <h5 id="销毁进度条"><a href="#销毁进度条" class="header-anchor">#</a> 销毁进度条</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//默认进度条销毁</span>
progressBar<span class="token punctuation">.</span><span class="token function">destory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//自定义视图的进度条销毁</span>
progress<span class="token punctuation">.</span><span class="token function">destory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myProgressUI<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="进度状态的更新"><a href="#进度状态的更新" class="header-anchor">#</a> 进度状态的更新</h4> <p><strong>前端JavaScript更新</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  	<span class="token literal-property property">progressDescription</span><span class="token operator">:</span> <span class="token string">'description for current action'</span><span class="token punctuation">,</span>
  	<span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//Progress对象</span>
progress<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ProgressBar对象(默认进度条视图)</span>
progressBar<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>后台Java更新</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ProgressUtil.java</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateProcess</span><span class="token punctuation">(</span><span class="token keyword">int</span> progressValue<span class="token punctuation">,</span> <span class="token class-name">String</span> progressDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ProcessStatus</span> <span class="token function">updateProcessStatus</span><span class="token punctuation">(</span><span class="token keyword">int</span> progressValue<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">ProgressDescription</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>参数<code>progressValue</code>指当前动作的进度百分比</p> <p>参数<code>progressDescription</code>指对当前动作的描述</p> <hr> <p><code>updateProcess</code>和<code>updateProcessStatus</code>区别：</p> <p><code>updateProcess</code>会检查当前任务是否已经被中断， 如果中断，会抛出异常。</p> <p><code>updateProcessStatus</code>不会抛出异常，会访问当前任务的状态。 如果当前任务已中断，不会更新UI。</p> <p><strong>任务的状态</strong>有：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ProcessStatus</span> <span class="token punctuation">{</span>
  NULL<span class="token punctuation">,</span> INITIALIZED<span class="token punctuation">,</span> RUNNING<span class="token punctuation">,</span> COMPLETED<span class="token punctuation">,</span> INTERRUPTED
<span class="token punctuation">}</span>
</code></pre></div><h4 id="进度常用api"><a href="#进度常用api" class="header-anchor">#</a> 进度常用API</h4> <ul><li><p>检查是否中断</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">checkInterruptStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果中断，抛出异常</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>； <span class="token comment">//返回是否中断，不会抛出异常</span>
</code></pre></div></li> <li><p>开启新的进度子任务</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//参数： String key, String description, int startValue, int duration</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
</code></pre></div><p>在当前任务重，开始一段任务作为子任务。</p> <p><code>key</code>作为子任务的标识。</p> <p><code>description</code>子任务的描述。</p> <p><code>startValue</code>子任务开始时，当前任务的进度百分比。</p> <p><code>duration</code>子任务在当前任务所在的百分比。</p></li> <li><p>开启新的进度子任务（包装）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//参数： String key, String description, int startValue, int duration</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startWrappedProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>参数说明与上面一致。</p> <p>这个方法主要用于：在当前任务中，调用另一个函数（函数内部有独立进度信息）。</p> <p>示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mainTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;mainTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Main Task&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startWrappedProcess</span><span class="token punctuation">(</span><span class="token string">&quot;wrapTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wrapped Task&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">wrapTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">wrapTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;wrapTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wrapped Task&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">updateProgress</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当执行到此时，mainTask进度是(40+20*50%)</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>为独立的任务添加进度信息</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//参数： String key, String description</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Description&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>结束进度任务</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="多语言支持"><a href="#多语言支持" class="header-anchor">#</a> 多语言支持</h3> <p>M18平台支持多语言。默认提供简体中文、繁体中文、英文三种语言。用户可以自定义其他语言。</p> <p>开发者通过M18平台提供的语言条目(mess)修改工具进行增加/修改/删除。每一个语言条目，都有一个<code>messCode</code>，开发者在代码中通过<code>messCode</code>来获取对应的文本内容。所有的语言条目都可以直接从后台获取。但是在前端JavaScript中只能获取部分，只有在新增语言条目时，设定了<code>webmess=true</code>，才能从JavaScript获取。</p> <ul><li>Java端通过<code>CawGlobal.getMess(&quot;messCode&quot;)</code>来获取文本</li> <li>JavaScript通过<code>myView.getMess('messCode')</code>来获取文本。</li></ul> <p><strong>语言切换事件</strong></p> <p>在用户切换语言时，开发者可以在代码中，得到事件通知，以便开发者根据语言变动做出对应的调整。</p> <ul><li><p>JavaScript监听语言切换事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JsView<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">.</span><span class="token constant">BEFORE_LANGCHANGE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//Do something before language changed</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JsView<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">.</span><span class="token constant">AFTER_LANGCHANGE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//Do something after language changed</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>​</p></li> <li><p>Java中监听语言切换事件</p> <p>在任意ViewListener中，通过<code>actionPerformed</code>监听</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">WebUtil</span><span class="token punctuation">.</span>langChangeCommand<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>vae<span class="token punctuation">.</span><span class="token function">getActionCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>​</p></li></ul> <h2 id="常用api"><a href="#常用api" class="header-anchor">#</a> 常用API</h2> <h3 id="jsf页面常用配置"><a href="#jsf页面常用配置" class="header-anchor">#</a> JSF页面常用配置</h3> <h4 id="可用配置项"><a href="#可用配置项" class="header-anchor">#</a> 可用配置项</h4> <p><strong><code>&lt;caw:view&gt;</code>配置</strong></p> <ul><li><p>设置<code>view</code>的<code>readonly</code>和<code>disabled</code>属性</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">readonly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{expression}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{expression}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>用于设定统一设定当前<code>view</code>中所有的输入性组件的<code>readonly</code>和<code>disabled</code>属性。</p></li> <li><p><code>onConstruct</code>属性</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">onConstruct</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{method}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>用于指定在<code>ViewController</code>创建后，执行的方法</p></li> <li><p><code>onDestroy</code>属性</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">onDestroy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{method}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>指定在<code>view</code>销毁前执行的方法。</p></li></ul> <p><strong>为ajax请求增加固定参数</strong></p> <p>在<code>View</code>中，每次ajax请求都是基于<code>action</code> url来发出的。如果期望每次ajax请求都能够附加一些信息，可以如下操作：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionPraram</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paramName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paramValue<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这样在每次ajax请求中，都可以在<code>requestParam</code>中获取<code>paramName</code>的值<code>paramValue</code>。</p> <h4 id="可用函数-function"><a href="#可用函数-function" class="header-anchor">#</a> 可用函数(Function)</h4> <ul><li><p>获取语言文本: <code>#{caw:mess('messCode')}</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>#{caw:mess('messCode')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>获取组件<code>clientId</code>: <code>#{caw:webID('id')}</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">update</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{caw:webID(<span class="token punctuation">'</span>textId<span class="token punctuation">'</span>)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>获取系统资源的URL: <code>#{caw:resourceUrl('name', 'library')}</code></p> <p>​</p></li></ul> <h3 id="java常用前端api"><a href="#java常用前端api" class="header-anchor">#</a> Java常用前端API</h3> <ul><li><p>依据组件<code>id</code>更新组件</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>改变组件状态</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setDisabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//更新disable状态</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setRendered</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//更新Render状态</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//更新visible状态</span>
</code></pre></div><blockquote><p><strong>注意</strong>：</p> <ul><li>只有当组件支持对应状态显示时，才能生效。</li> <li>上述代码只是调整组件状态，要使界面呈现，比如更新相关组件。调用<code>WebUitl.update(&quot;id&quot;)</code>方法。</li> <li>对于Render状态，修改组件后，必须更新组件的父组件才能生效。</li> <li><code>render</code>,<code>visible</code>状态， 如果开发者在JSF页面（xhtml文件）上，声明组件时，指定的<code>render</code>,<code>visible</code>状态为false。 则java端不能通过上诉代码调整状态。</li> <li><code>disable</code>状态，如果开发者在JSF页面（xhtml文件）上，声明组件时，指定的<code>disable</code>状态为true。 则java端不能通过上诉代码调整状态。</li></ul></blockquote></li> <li><p>设置焦点</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">focusComponent</span><span class="token punctuation">(</span><span class="token string">&quot;componentId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>注意</strong>：</p> <p>不能保证100%生效，因为焦点的切换受到多重原因的影响。</p> <p>多使用在页面初始化。</p></blockquote></li> <li><p>在ajax响应代码中，向ajax oncomplete方法传递参数</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getAssistant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addCallbackParam</span><span class="token punctuation">(</span><span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>ajax<span class="token punctuation">.</span><span class="token function-variable function">oncomplete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>callback <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//xxxxx</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>查找组件</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">findComponent</span><span class="token punctuation">(</span>'componentId'<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//根据id查找组件</span>
</code></pre></div></li> <li><p>一些工具类</p> <p><code>WebUtil.java</code>前端通用方法</p> <p><code>MessageUtil.java</code>前端消息通用方法</p> <p><code>SysAlertUtil.java</code>是系统提醒通用方法</p></li></ul> <h3 id="javascript常用api"><a href="#javascript常用api" class="header-anchor">#</a> Javascript常用API</h3> <ul><li><p>JavaScript触发视图的ViewListener事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myView<span class="token punctuation">.</span><span class="token function">triggerAction</span><span class="token punctuation">(</span><span class="token string">'actionCommand'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>会触发ViewListener的<code>actionPerformed</code>方法。</p></li> <li><p>JavaScript触发Module的事件（Save/Create/Read...）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myFrame<span class="token punctuation">.</span><span class="token function">triggerAction</span><span class="token punctuation">(</span><span class="token string">'read'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myFrame<span class="token punctuation">.</span><span class="token function">triggerAction</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>JavaScript更新指定组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myView<span class="token punctuation">.</span><span class="token function">ajaxUpdate</span><span class="token punctuation">(</span><span class="token string">'componentId'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>前端获取mess：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myView<span class="token punctuation">.</span><span class="token function">getMess</span><span class="token punctuation">(</span><span class="token string">'messCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//仅仅对放置在前端的messCode</span>
</code></pre></div></li> <li><p>JavaScript常用方法定义在<code>cawView.js</code>中</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8db484b1.js" defer></script><script src="/assets/js/2.49458ffc.js" defer></script><script src="/assets/js/5.ffe98d41.js" defer></script>
  </body>
</html>
