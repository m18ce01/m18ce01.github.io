<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总体概述 | M18 Developer Center</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Make Something People Want">
    
    <link rel="preload" href="/assets/css/0.styles.0cd52f8f.css" as="style"><link rel="preload" href="/assets/js/app.05b61419.js" as="script"><link rel="preload" href="/assets/js/2.09bf837d.js" as="script"><link rel="preload" href="/assets/js/42.20a41efb.js" as="script"><link rel="prefetch" href="/assets/js/10.a92bcbd6.js"><link rel="prefetch" href="/assets/js/100.8e634f7b.js"><link rel="prefetch" href="/assets/js/101.40750a48.js"><link rel="prefetch" href="/assets/js/102.f87d4adc.js"><link rel="prefetch" href="/assets/js/103.a8f77b4f.js"><link rel="prefetch" href="/assets/js/104.266bfbc8.js"><link rel="prefetch" href="/assets/js/105.c2f67e89.js"><link rel="prefetch" href="/assets/js/106.c7ba1e67.js"><link rel="prefetch" href="/assets/js/107.665b7968.js"><link rel="prefetch" href="/assets/js/108.02e92606.js"><link rel="prefetch" href="/assets/js/109.d3c80445.js"><link rel="prefetch" href="/assets/js/11.3a19667a.js"><link rel="prefetch" href="/assets/js/110.f077d2b9.js"><link rel="prefetch" href="/assets/js/111.1c300294.js"><link rel="prefetch" href="/assets/js/112.5013505f.js"><link rel="prefetch" href="/assets/js/113.b22abd6f.js"><link rel="prefetch" href="/assets/js/114.c478e07e.js"><link rel="prefetch" href="/assets/js/12.fe2ac0c5.js"><link rel="prefetch" href="/assets/js/13.2d8926a7.js"><link rel="prefetch" href="/assets/js/14.5bbb846f.js"><link rel="prefetch" href="/assets/js/15.2d94d97b.js"><link rel="prefetch" href="/assets/js/16.7d8bb520.js"><link rel="prefetch" href="/assets/js/17.e5dc87ac.js"><link rel="prefetch" href="/assets/js/18.c60bbe79.js"><link rel="prefetch" href="/assets/js/19.b5d34130.js"><link rel="prefetch" href="/assets/js/20.21f3e474.js"><link rel="prefetch" href="/assets/js/21.aa0d5cba.js"><link rel="prefetch" href="/assets/js/22.9d2bc3c3.js"><link rel="prefetch" href="/assets/js/23.ab5843c7.js"><link rel="prefetch" href="/assets/js/24.786f00bd.js"><link rel="prefetch" href="/assets/js/25.ac4ccbd4.js"><link rel="prefetch" href="/assets/js/26.81d9506f.js"><link rel="prefetch" href="/assets/js/27.a820ac2f.js"><link rel="prefetch" href="/assets/js/28.3cbec560.js"><link rel="prefetch" href="/assets/js/29.8fa3baba.js"><link rel="prefetch" href="/assets/js/3.acaaa88c.js"><link rel="prefetch" href="/assets/js/30.fa648cca.js"><link rel="prefetch" href="/assets/js/31.a9adce3a.js"><link rel="prefetch" href="/assets/js/32.9494df22.js"><link rel="prefetch" href="/assets/js/33.c971eb4c.js"><link rel="prefetch" href="/assets/js/34.7cb32331.js"><link rel="prefetch" href="/assets/js/35.3a78c1cc.js"><link rel="prefetch" href="/assets/js/36.baa3985a.js"><link rel="prefetch" href="/assets/js/37.643a9e7f.js"><link rel="prefetch" href="/assets/js/38.6d3a028b.js"><link rel="prefetch" href="/assets/js/39.2607548f.js"><link rel="prefetch" href="/assets/js/4.9f55e104.js"><link rel="prefetch" href="/assets/js/40.6ace7e61.js"><link rel="prefetch" href="/assets/js/41.59fb2b5b.js"><link rel="prefetch" href="/assets/js/43.c150d0ed.js"><link rel="prefetch" href="/assets/js/44.6d3441f2.js"><link rel="prefetch" href="/assets/js/45.b5ca193c.js"><link rel="prefetch" href="/assets/js/46.3be8a454.js"><link rel="prefetch" href="/assets/js/47.815bc219.js"><link rel="prefetch" href="/assets/js/48.75d27dd3.js"><link rel="prefetch" href="/assets/js/49.ace44af9.js"><link rel="prefetch" href="/assets/js/5.a17885f9.js"><link rel="prefetch" href="/assets/js/50.71e6a452.js"><link rel="prefetch" href="/assets/js/51.279acbfd.js"><link rel="prefetch" href="/assets/js/52.71e1d9c2.js"><link rel="prefetch" href="/assets/js/53.f401981d.js"><link rel="prefetch" href="/assets/js/54.d747527d.js"><link rel="prefetch" href="/assets/js/55.b59ffb99.js"><link rel="prefetch" href="/assets/js/56.2a02f447.js"><link rel="prefetch" href="/assets/js/57.0cdbff37.js"><link rel="prefetch" href="/assets/js/58.28c84555.js"><link rel="prefetch" href="/assets/js/59.d336144f.js"><link rel="prefetch" href="/assets/js/6.7137e9f9.js"><link rel="prefetch" href="/assets/js/60.304d4cac.js"><link rel="prefetch" href="/assets/js/61.a2372dc1.js"><link rel="prefetch" href="/assets/js/62.93b83ce2.js"><link rel="prefetch" href="/assets/js/63.a661f6fa.js"><link rel="prefetch" href="/assets/js/64.4a3353bc.js"><link rel="prefetch" href="/assets/js/65.38440fdc.js"><link rel="prefetch" href="/assets/js/66.850f6dee.js"><link rel="prefetch" href="/assets/js/67.7aa77367.js"><link rel="prefetch" href="/assets/js/68.ff6bc5ae.js"><link rel="prefetch" href="/assets/js/69.66705a07.js"><link rel="prefetch" href="/assets/js/7.971d50d7.js"><link rel="prefetch" href="/assets/js/70.9f96275b.js"><link rel="prefetch" href="/assets/js/71.1cbaf0fc.js"><link rel="prefetch" href="/assets/js/72.ed7b3b18.js"><link rel="prefetch" href="/assets/js/73.fc90b109.js"><link rel="prefetch" href="/assets/js/74.60740e6d.js"><link rel="prefetch" href="/assets/js/75.f33cc424.js"><link rel="prefetch" href="/assets/js/76.6057eba3.js"><link rel="prefetch" href="/assets/js/77.bb36990d.js"><link rel="prefetch" href="/assets/js/78.80d9a40d.js"><link rel="prefetch" href="/assets/js/79.92fc5d5c.js"><link rel="prefetch" href="/assets/js/8.aa6a7c7d.js"><link rel="prefetch" href="/assets/js/80.d651c65f.js"><link rel="prefetch" href="/assets/js/81.997438e7.js"><link rel="prefetch" href="/assets/js/82.660134d3.js"><link rel="prefetch" href="/assets/js/83.58877a4a.js"><link rel="prefetch" href="/assets/js/84.3ad4a232.js"><link rel="prefetch" href="/assets/js/85.d3511cda.js"><link rel="prefetch" href="/assets/js/86.a9d9aa96.js"><link rel="prefetch" href="/assets/js/87.71ad37a5.js"><link rel="prefetch" href="/assets/js/88.5ff60185.js"><link rel="prefetch" href="/assets/js/89.89988b79.js"><link rel="prefetch" href="/assets/js/9.c1961b99.js"><link rel="prefetch" href="/assets/js/90.2739b40a.js"><link rel="prefetch" href="/assets/js/91.7f46ea1b.js"><link rel="prefetch" href="/assets/js/92.7c03cc8a.js"><link rel="prefetch" href="/assets/js/93.f4b2d509.js"><link rel="prefetch" href="/assets/js/94.bcea7274.js"><link rel="prefetch" href="/assets/js/95.c5688798.js"><link rel="prefetch" href="/assets/js/96.3a1c6a3e.js"><link rel="prefetch" href="/assets/js/97.e27320f6.js"><link rel="prefetch" href="/assets/js/98.ab7764ab.js"><link rel="prefetch" href="/assets/js/99.3e5e087c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cd52f8f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">M18 Developer Center</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebServices" class="dropdown-title"><span class="title">WebServices</span> <span class="arrow down"></span></button> <button type="button" aria-label="WebServices" class="mobile-dropdown-title"><span class="title">WebServices</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/api/m18/" class="nav-link">
  M18
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ce01/" class="nav-link">
  M18 ERP
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ch01/" class="nav-link">
  M18 HCM
</a></li></ul></div></div><div class="nav-item"><a href="/en/m18/" class="nav-link">
  App
</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link router-link-active">
  中文文档
</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebServices" class="dropdown-title"><span class="title">WebServices</span> <span class="arrow down"></span></button> <button type="button" aria-label="WebServices" class="mobile-dropdown-title"><span class="title">WebServices</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/api/m18/" class="nav-link">
  M18
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ce01/" class="nav-link">
  M18 ERP
</a></li><li class="dropdown-item"><!----> <a href="/en/api/ch01/" class="nav-link">
  M18 HCM
</a></li></ul></div></div><div class="nav-item"><a href="/en/m18/" class="nav-link">
  App
</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link router-link-active">
  中文文档
</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>总体概述</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh-CN/m18/overview.html#警告" class="sidebar-link">警告</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/m18/overview.html#注意事项" class="sidebar-link">注意事项</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/m18/overview.html#m18-架构" class="sidebar-link">M18 架构</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/m18/overview.html#m18-应用程序概念" class="sidebar-link">M18 应用程序概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/m18/overview.html#m18-应用程序开发指南" class="sidebar-link">M18 应用程序开发指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#关于-app-xml" class="sidebar-link">关于 app.xml</a></li></ul></li><li><a href="/zh-CN/m18/overview.html#词汇表" class="sidebar-link">词汇表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#m18-module" class="sidebar-link">M18 Module</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#m18-menu" class="sidebar-link">M18 Menu</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#m18-sqltable" class="sidebar-link">M18 SqlTable</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#m18-sqlentity" class="sidebar-link">M18 SqlEntity</a></li><li class="sidebar-sub-header"><a href="/zh-CN/m18/overview.html#m18-lookup" class="sidebar-link">M18 Lookup</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="总体概述"><a href="#总体概述" class="header-anchor">#</a> 总体概述</h1> <p><code>版本: 1.1 | 发布日期: 07/12/2020</code></p> <h2 id="警告"><a href="#警告" class="header-anchor">#</a> 警告</h2> <ol><li><span style="color:red;"><strong>不允许重写任何M18的存储过程。</strong></span></li> <li><span style="color:red;"><strong>不允许修改或移除已经存在的M18表格栏位。</strong></span></li> <li><span style="color:red;"><strong>所有的SQL栏位名和存储过程名称应该使用App编号作为前缀。</strong></span></li> <li><span style="color:red;"><strong>在表格名称和栏位名称中不允许使用<code>_</code></strong></span></li></ol> <h2 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h2> <ol><li><p>M18平台仅授权给Multiable的客户和经过认证的第三方开发人员。开发应用程序的前提是你要有一套经过授权的M18平台软件。</p></li> <li><p>如果你有任何疑问，请联系我们的实施人员或者在我们的<a href="https://community.multiable.com/" target="_blank" rel="noopener noreferrer">论坛<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上进行提问。</p></li></ol> <h2 id="m18-架构"><a href="#m18-架构" class="header-anchor">#</a> M18 架构</h2> <p>M18平台基于J2EE技术架构进行开发，部署于Wildfly(Java EE Server)上面。前端使用JSF，后端应用使用EJB进行编写。数据库使用MySql。</p> <p>Wildfly(原Jboss)是应用程序服务器，属于企业级Java中间件。请熟悉Wildfly的相关配置和功能，由于M18运行的环境主要受到中间件的控制，了解对于开发/测试将有很大的帮助。</p> <p>EJB是用于应用程序业务逻辑的服务器组件。你可以理解为一个个搭建业务功能实现的小模块。它给企业及开发人员提供了一个标准方式，从而解决一些之前总是作业操作总是重复发生的问题。M18之中，EJB会接收JSF发出的请求，并且在有需要的情况下和数据库继续必要的交互。</p> <p><img src="/assets/img/m_struc.3cdac279.jpg" alt="mssst"></p> <h2 id="m18-应用程序概念"><a href="#m18-应用程序概念" class="header-anchor">#</a> M18 应用程序概念</h2> <p>M18是一个预置了若干<code>应用程序</code>的低代码快速开发平台,第三方开发者可以通过开发自己的<code>应用程序</code>来达到扩展/修改/已有功能或者添加新功能的目的。</p> <p>在M18中，我们将特定的功能的集合称为<code>应用程序</code>，并要求每一个<code>应用程序</code>的代码是独立管理和维护的，我们使用app.xml来描述一个<code>应用程序</code>是怎样的。</p> <p>在M18里面，应将<code>应用程序</code>理解为最小的程序可分割的单元。</p> <p><img src="/assets/img/applist.e2915a31.png" alt="applist"></p> <h2 id="m18-应用程序开发指南"><a href="#m18-应用程序开发指南" class="header-anchor">#</a> M18 应用程序开发指南</h2> <p>为了开发M18应用程序，你需要一整套的M18运行环境，包括WildFly、MySQL数据库和M18程序包。</p> <p>如果有多名开发人员在同一套M18平台上进行开发，数据库通常是可以共用的,但WildFly通常是每一位开发者都有自己的一份拷贝。</p> <p>如果你有开发<code>应用程序</code>的需求，可以使用UAT（用户测试环境）或者额外再独立一个开发环境进行开发，切忌在生产环境上直接进行开发。</p> <p>你最好先读一下<a href="/zh-CN/m18/setup_environment">设置开发环境</a> 再继续往下阅读，这样子你对下面的内容会有更好的理解。</p> <h3 id="关于-app-xml"><a href="#关于-app-xml" class="header-anchor">#</a> 关于 app.xml</h3> <p>每一个<code>应用程序</code>使用一个名为<code>app.xml</code>的文件对它的各个属性进行定义。 你可以看一下 <a href="https://github.com/m18ce01/M18-App-Skeleton/blob/master/p-share/src/main/resources/META-INF/app.xml" target="_blank" rel="noopener noreferrer">Github上的例子<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>名字</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>name</td> <td>是</td> <td><code>App</code>的名字，是<code>App</code>的唯一标识符</td></tr> <tr><td>version</td> <td>是</td> <td>格式为<code>d.d.d_***</code> d部分必须要为数字，而且我们要求版本是单向递增的</td></tr> <tr><td>description</td> <td>否</td> <td>当前<code>App</code>的描述</td></tr> <tr><td>mess</td> <td>是</td> <td>用于界面显示的MessCode</td></tr> <tr><td>ear</td> <td>是</td> <td>用于描述<code>App</code>存在的ear名称，目前一定是caw_ear</td></tr> <tr><td>ejb</td> <td>是</td> <td>当前App使用的ejb jar的名字</td></tr> <tr><td>appLogoName</td> <td>是</td> <td>App在界面显示的logo的名字</td></tr> <tr><td>appLogoLib</td> <td>是</td> <td>App在界面显示的logo的的位置</td></tr> <tr><td>developer</td> <td>是</td> <td>App在界面显示的开发者名称</td></tr> <tr><td>developerLogoName</td> <td>是</td> <td>App在界面显示的开发者Logo的名字</td></tr> <tr><td>developerLogoLib</td> <td>是</td> <td>App在界面显示的开发者Logo的位置</td></tr> <tr><td>dependences</td> <td>否</td> <td>用于描述当前的App依赖的App</td></tr> <tr><td>***</td> <td></td> <td>其他内容将在之后的章节具体介绍</td></tr></tbody></table> <blockquote><p>例子:</p></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.multiable.com/app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>m18 test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ear</span><span class="token punctuation">&gt;</span></span>caw_ear<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ear</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ejb</span><span class="token punctuation">&gt;</span></span>core_ejb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ejb</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependences</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependence</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>caw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependences</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="词汇表"><a href="#词汇表" class="header-anchor">#</a> 词汇表</h2> <table><thead><tr><th>名字</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td><a href="#m18-module">Module</a></td> <td style="text-align:left;">M18 <code>Module</code> 类似于 <code>领域驱动设计</code> 中领域模型的概念, 在M18 中用于表示一个逻辑实体, 请看下面的详细描述</td></tr> <tr><td><a href="#m18-menu">Menu</a></td> <td style="text-align:left;"><code>View</code>是<code>Module</code>的界面视图, <code>Module</code>可以有多个不同界面布局和权限控制的视图. 在M18中，用户可以通过拖拉的方式定义自己的界面视图</td></tr> <tr><td><a href="#m18-sqlentity">SqlEntity</a></td> <td style="text-align:left;">有时也简称为<code>Entity</code>, 是<code>Module</code>数据的装载实体,通常，<code>Module</code>中的一张单据与一个<code>Entity</code> 对应.</td></tr> <tr><td><a href="#m18-sqltable">SqlTable</a></td> <td style="text-align:left;"><code>Module</code>的一张单据,后台通常对应的是多张表，每张表对应一个<code>SqlTable</code>. 所以多个<code>SqlTable</code>组成一个<code>SqlEntity</code></td></tr> <tr><td><a href="#m18-lookup">Lookup</a></td> <td style="text-align:left;">M18中定义<code>查询</code>的地方, 包括查询的条件、显示的栏位、关键字查询的范围等等</td></tr> <tr><td>Mess</td> <td style="text-align:left;"><code>Message</code>的简写, 定义多语言界面的文件，请参照<a href="/zh-CN/m18/backend_doc.html#i18n的实现">多语言实现</a></td></tr></tbody></table> <h3 id="m18-module"><a href="#m18-module" class="header-anchor">#</a> M18 Module</h3> <p><code>Module</code> 类似于 <code>领域驱动设计</code> 中领域模型的概念, 在M18 中用于表示一个逻辑实体.</p> <p>例如，“客户”，“销售订单”，“员工”，“仓库”，“部门”</p> <p>M18用一个名为<code>module.xml</code>的XML文件去描述<code>Module</code>, 详细格式请参照<a href="/zh-CN/m18/backend_doc.html#module-xml">module.xml</a>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virDept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virDept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mainTable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virdept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useChangenote</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">genCode_Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>VO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">recType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">useAccess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useAttach</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useApv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virdept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">initRow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hpk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virdeptpic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">initRow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hpk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>picTypeId;userId;startDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cpnType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>virdeptmember<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">initRow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hpk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">hfKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cpnType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checker</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.core.ejb.checker.VirDeptChecker<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="m18-menu"><a href="#m18-menu" class="header-anchor">#</a> M18 Menu</h3> <p>M18用一个名为<code>navmenu.xml</code>的XML文件去描述<code>Menu</code>, 详细格式请参照<a href="/en/m18/backend_doc.html#navmenu-xml">navmenu.xml</a>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>folder</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>language<span class="token punctuation">&quot;</span></span> <span class="token attr-name">messCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.lang<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>langSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">messCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>langSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view/module/langSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SETTING<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Save<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">&gt;</span></span>
			
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMess<span class="token punctuation">&quot;</span></span> <span class="token attr-name">messCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMess<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view/module/udfMess<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Save<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DataImport;DataExport<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">&gt;</span></span>
			
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i18nFieldSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">messCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i18nFieldSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view/module/i18nFieldSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i18nFieldSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SETTING<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Save<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>folder</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="m18-sqltable"><a href="#m18-sqltable" class="header-anchor">#</a> M18 SqlTable</h3> <p>SqlTable是M18通用的数据存储结构。这个结构的生成的主要原因在于M18整个设计都是基于可扩展的方式的。</p> <p>他包括以下几个部分：table名字(注：不是数据库table的名字，这里是一个虚拟的名字一般情况下可以不进行赋值)，栏位信息（说明有哪些栏位，栏位的属性是什么 方便开发者进行遍历栏位的操作），数据。</p> <p>M18用一个名为<code>datadict.xml</code>的XML文件去描述<code>SqlTable</code>,详细格式请参照<a href="/zh-CN/m18/backend_doc.html#datadict-xml">datadict.xml</a>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>useremailsender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emailSender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>inherit</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id_irev<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int_unsigned<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defPattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mailUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>varchar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.mailUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">length</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defPattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>char100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mailPwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>varchar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.mailPwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">length</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defPattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>char2000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">skipLookup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataExport</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>column</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mailAccount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>varchar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.mailAccount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">length</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defPattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>char100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注意事项</strong>:</p> <p><code>1. 由于系统会将数据转换为json，请确保存放到SqlTable的数据均可以转换为JSON。</code></p> <p><code>2. 虽然支持SqlTable里面存放SqlTable，但是系统不推荐这样处理，甚至系统不推荐将非基本类型存入SqlTable。</code></p> <h3 id="m18-sqlentity"><a href="#m18-sqlentity" class="header-anchor">#</a> M18 SqlEntity</h3> <p>SqlEntity是M18模块最常见的模块数据存储结构，他由系统表<a href="/zh-CN/m18/backend_doc.html#module-xml">module.xml</a> 进行定义和描述。</p> <p>在SqlEntity里面会说明： 当前Entity属于那个<code>Module</code>，当前<code>Entity</code>的所有信息。通常来说一个SqlEntity会包含若干个<code>SqlTable</code>。</p> <p><strong>注意事项</strong>:</p> <p><code>1. 请注意SqlEntity里面一定是有一个主表的，而且系统认为主表的id栏位就是entity的id属性。</code></p> <blockquote><p>SqlTable的常用操作</p></blockquote> <p>从数据库读取数据</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">SqlTable</span> data <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getSqlResult</span><span class="token punctuation">(</span><span class="token string">&quot;select * from test where code like 'B%';&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>新建table</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">SqlTable</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlTableField</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlTableField</span><span class="token punctuation">(</span><span class="token string">&quot;check&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token class-name">SqlTable</span> data_new <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">genEmptyTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>增加行，并赋值</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> row <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">addRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>表循环</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> row <span class="token operator">:</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">String</span> info <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>两个表数据合并</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> inc<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>创建表索引</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indexs <span class="token operator">=</span> <span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span>sortFields<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>对于SqlTable的绝大部分操作均存在SqlTable和SqlTableLib里面，请使用前仔细进行阅读。</li></ul> <h3 id="m18-lookup"><a href="#m18-lookup" class="header-anchor">#</a> M18 Lookup</h3> <p>每一个<code>Module</code>的<code>Menu</code>默认会有一个<code>Lookup</code>,用户可以定义自己的<code>Lookup</code></p> <p><img src="/assets/img/lookup1.72e9cf64.png" alt="lookup1"></p> <p>当你在一个<code>Module</code>的界面引用另外一个<code>Module</code>的数据时，所用到的查询也是由<code>Lookup</code>定义的</p> <p><img src="/assets/img/lookup2.0c44420b.png" alt="lookup2"></p> <p>关于<code>Lookup</code>的实现，请看<a href="/zh-CN/m18/backend_doc.html#stinfo-xml">stInfo.xml</a> 和 <a href="/zh-CN/m18/backend_doc.html#stsearch-xml">stSearch.xml</a>.</p> <blockquote><p>CheckMsg</p></blockquote> <p>系统绝大部分的错误提示使用CheckMsg进行反馈。</p> <p>这里说明一下主要一些重要的点。</p> <p>info_desc：用于界面显示的信息，不应该包含messcode</p> <p>trace：用于定位checkmsg生成的位置</p> <p>子元素MsgLocator用于定位错误信息发生在Entity那些相关的栏位上面。推荐需要填写。</p> <ul><li>请参考CheckMsgLib获取关于Msg操作的更新信息。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.05b61419.js" defer></script><script src="/assets/js/2.09bf837d.js" defer></script><script src="/assets/js/42.20a41efb.js" defer></script>
  </body>
</html>
