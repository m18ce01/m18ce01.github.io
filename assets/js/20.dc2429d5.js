(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{647:function(t,a,s){t.exports=s.p+"assets/img/tran_save.3b153604.jpg"},648:function(t,a,s){t.exports=s.p+"assets/img/ddtodb.8848d99c.jpg"},649:function(t,a,s){t.exports=s.p+"assets/img/menuType.f3678c77.jpg"},650:function(t,a,s){t.exports=s.p+"assets/img/messcode.c5c72af9.jpg"},651:function(t,a,s){t.exports=s.p+"assets/img/i18nfield.26799b57.jpg"},652:function(t,a,s){t.exports=s.p+"assets/img/i18n.920c277f.jpg"},653:function(t,a,s){t.exports=s.p+"assets/img/dd.844baa65.jpg"},654:function(t,a,s){t.exports=s.p+"assets/img/jr_ds1.e166b948.jpg"},655:function(t,a,s){t.exports=s.p+"assets/img/jr_ds2.34b79425.jpg"},656:function(t,a,s){t.exports=s.p+"assets/img/jr_pdf.09812cea.jpg"},771:function(t,a,s){"use strict";s.r(a);var n=s(13),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"后端开发文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后端开发文档"}},[t._v("#")]),t._v(" 后端开发文档")]),t._v(" "),a("h2",{attrs:{id:"逻辑模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑模块"}},[t._v("#")]),t._v(" 逻辑模块")]),t._v(" "),a("h3",{attrs:{id:"模块的curd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块的curd"}},[t._v("#")]),t._v(" 模块的CURD")]),t._v(" "),a("p",[t._v("M18系统提供了基本模块的操作接口，设计通用型的接口最大的目的在于可以批量化处理。")]),t._v(" "),a("h4",{attrs:{id:"使用web-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用web-service"}},[t._v("#")]),t._v(" 使用Web Service")]),t._v(" "),a("ul",[a("li",[t._v("创建Entity")])]),t._v(" "),a("p",[t._v("获取当前模块的空Entity")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsParameter")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWsParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity/create/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"menuCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callWs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isResponseOK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" entryJson "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FacesUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entryJson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v("  result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entryJson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showMessageInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"createFail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("blockquote",[a("p",[t._v("HTTP 请求")])]),t._v(" "),a("p",[a("code",[t._v("POST http://[server]/jsf/rfws/entity/create/[module]?menuCode=[menuCode]")])]),t._v(" "),a("blockquote",[a("p",[t._v("参数")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Path")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前模块的名称")])]),t._v(" "),a("tr",[a("td",[t._v("menuCode")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前菜单的名称")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[a("code",[t._v("json String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以传入一个json的参数到checker进行处理；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回的结果是成功的, 可以拿到一个当前模块的空SqlEntity.")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回的结果是失败的, 可以在返回的response header中通过key‘error_info’拿到一个CheckMsg的json数组；")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("位置")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("成功")])]),t._v(" "),a("td",[a("em",[t._v("Body")])]),t._v(" "),a("td",[t._v("模块的空SqlEntity")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("失败")])]),t._v(" "),a("td",[a("em",[t._v("Header")]),t._v("(error_info)")]),t._v(" "),a("td",[t._v("CheckMsg的json数组")])])])]),t._v(" "),a("ul",[a("li",[t._v("读取Entity")])]),t._v(" "),a("p",[t._v("读取当前模块的已存在的SqlEntity")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsParameter")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWsParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity/read/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"menuCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iRev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDataOrDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callWs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isResponseOK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" entryJson "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FacesUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entryJson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tentity "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entryJson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showMessageInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readFail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("blockquote",[a("p",[t._v("HTTP 请求")])]),t._v(" "),a("p",[a("code",[t._v("GET http://[server]/jsf/rfws/entity/create/[module]?menuCode=[menuCode]&id=[id]")])]),t._v(" "),a("blockquote",[a("p",[t._v("参数")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Path")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前模块的名称")])]),t._v(" "),a("tr",[a("td",[t._v("menuCode")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前菜单的名称")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[a("code",[t._v("json String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以传入一个json的参数到checker进行处理；")])]),t._v(" "),a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[a("code",[t._v("long")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**需要读取entity的id")])]),t._v(" "),a("tr",[a("td",[t._v("iRev")]),t._v(" "),a("td",[t._v("int（Query）")]),t._v(" "),a("td",[t._v("如果是要读取旧版本，请传入正确的版本号；如果读取最新版本，iRev可以不填或填0")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回的结果是成功的, 可以拿到一个当前模块的正确SqlEntity.\n"),a("strong",[t._v("注")]),t._v(": 如果返回的结果是失败的, 可以在返回的response header中通过key‘error_info’拿到一个CheckMsg的json数组；")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("位置")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("成功")])]),t._v(" "),a("td",[a("em",[t._v("Body")])]),t._v(" "),a("td",[t._v("模块的正确SqlEntity")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("失败")])]),t._v(" "),a("td",[a("em",[t._v("Header")]),t._v("(error_info)")]),t._v(" "),a("td",[t._v("CheckMsg的json数组")])])])]),t._v(" "),a("ul",[a("li",[t._v("保存Entity")])]),t._v(" "),a("p",[t._v("保存当前模块的SqlEntity")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsParameter")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWsParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity/save/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("put"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"menuCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSONString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callWs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isResponseOK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" recordId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\taction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" recordId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showMessageInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"saveSuccess"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"saveFail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("HTTP 请求")])]),t._v(" "),a("p",[a("code",[t._v("PUT http://[server]/jsf/rfws/entity/save/[module]?menuCode=[menuCode]&entity=[SqlEntity json String]")])]),t._v(" "),a("blockquote",[a("p",[t._v("参数")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Path")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前模块的名称")])]),t._v(" "),a("tr",[a("td",[t._v("menuCode")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前菜单的名称")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[a("code",[t._v("json String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以传入一个json的参数到checker进行处理；")])]),t._v(" "),a("tr",[a("td",[t._v("entity")]),t._v(" "),a("td",[a("code",[t._v("jsonString")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**SqlEntity 的JSON String")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回的结果是成功的, 可以拿到保存的SqlEntity的id.\n"),a("strong",[t._v("注")]),t._v(": 如果返回的结果是失败的, 可以在返回的response header中通过key‘error_info’拿到一个CheckMsg的json数组；")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("位置")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("成功")])]),t._v(" "),a("td",[a("em",[t._v("Body")])]),t._v(" "),a("td",[t._v("模块SqlEntity的id")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("失败")])]),t._v(" "),a("td",[a("em",[t._v("Header")]),t._v("(error_info)")]),t._v(" "),a("td",[t._v("CheckMsg的json数组")])])])]),t._v(" "),a("ul",[a("li",[t._v("删除Entity")])]),t._v(" "),a("p",[t._v("读取当前模块的已存在的SqlEntity")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsParameter")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWsParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity/delete/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"menuCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQueryParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WsLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callWs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showMessageInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleteSuccess"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleteFail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("HTTP 请求")])]),t._v(" "),a("p",[a("code",[t._v("DELETE http://[server]/jsf/rfws/entity/delete/[module]?menuCode=[menuCode]&id=[id]")])]),t._v(" "),a("blockquote",[a("p",[t._v("参数")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Path")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前模块的名称")])]),t._v(" "),a("tr",[a("td",[t._v("menuCode")]),t._v(" "),a("td",[a("code",[t._v("String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**当前菜单的名称")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[a("code",[t._v("json String")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以传入一个json的参数到checker进行处理；")])]),t._v(" "),a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[a("code",[t._v("long")]),t._v("("),a("em",[t._v("Query")]),t._v(")")]),t._v(" "),a("td",[t._v("**必填.**需要删除entity的id")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("blockquote",[a("p",[t._v("如果返回的结果是失败的, 可以在返回的response header中通过key‘error_info’拿到一个CheckMsg的json数组；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("位置")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("成功")])]),t._v(" "),a("td",[a("em",[t._v("Status")])]),t._v(" "),a("td",[t._v("Status是200代表成功")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("失败")])]),t._v(" "),a("td",[a("em",[t._v("Header")]),t._v("(error_info)")]),t._v(" "),a("td",[t._v("CheckMsg的json数组")])])])]),t._v(" "),a("h4",{attrs:{id:"直接使用ejb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#直接使用ejb"}},[t._v("#")]),t._v(" 直接使用EJB")]),t._v(" "),a("ul",[a("li",[t._v("创建Entity")])]),t._v(" "),a("p",[t._v("和Web Service 的方式相比，EJB的方式不会使用cache；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawEntityCurdAction")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v("，string menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeCreateParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeCreateParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityResult")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("blockquote",[a("p",[t._v("参数SeCreateParam")])]),t._v(" "),a("p",[t._v("只需传入模块的名称和菜单的名称；")]),t._v(" "),a("p",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以将参数写入SeCreateParam的jsonParam里面，在checker进行处理；")]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回EntityResult的SqlEntity不为null，则获取到模块的空SqlEntity")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回EntityResult的SqlEntity为null，则查看里面的"),a("code",[t._v("List<checkMsg>")]),t._v(" 得到错误信息；")]),t._v(" "),a("ul",[a("li",[t._v("读取Entity")])]),t._v(" "),a("p",[t._v("和Web Service 的方式相比，EJB的方式不会使用cache；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawEntityCurdAction")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeReadParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeReadParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEntityId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIrev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityResult")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("参数SeReadParam")])]),t._v(" "),a("p",[t._v("只需传入模块的名称，菜单的名称，对应SqlEntity的id，如果需要查询旧版本，就传入iRev；")]),t._v(" "),a("p",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以将参数写入SeReadParam的jsonParam里面，在checker进行处理；")]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回EntityResult的SqlEntity不为null，则获取到模块的正确SqlEntity")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回EntityResult的SqlEntity为null，则查看里面的"),a("code",[t._v("List<checkMsg>")]),t._v(" 得到错误信息；")]),t._v(" "),a("ul",[a("li",[t._v("保存Entity")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawEntityCurdAction")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v(" entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeSaveParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeSaveParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSqlEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInsertMir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckResult")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("参数SeSaveParam")])]),t._v(" "),a("p",[t._v("只需传入模块的名称，菜单的名称，对应SqlEntity，还有如果要将旧数据写入旧数据表，请设置insertMir 为true；")]),t._v(" "),a("p",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以将参数写入的jsonParam里面，在checker进行处理；")]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回CheckResult的pass为true，则保存成功，可以通过result的getEntityId()获取SqlEntity的id")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回CheckResult的pass为false，则查看里面的"),a("code",[t._v("List<checkMsg>")]),t._v(" 得到错误信息；")]),t._v(" "),a("ul",[a("li",[t._v("删除Entity")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawEntityCurdAction")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeDeleteParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeDeleteParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEntityId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInsertMir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckResult")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("参数SeDeleteParam")])]),t._v(" "),a("p",[t._v("只需传入模块的名称，菜单的名称，对应SqlEntity的id，还有如果要将旧数据写入旧数据表，请设置insertMir 为true；")]),t._v(" "),a("p",[t._v("如果当前模块有一些特殊的逻辑需要处理，可以将参数写入的jsonParam里面，在checker进行处理；")]),t._v(" "),a("blockquote",[a("p",[t._v("返回结果")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回CheckResult的pass为true，则删除成功，")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果返回CheckResult的pass为false，则查看里面的"),a("code",[t._v("List<checkMsg>")]),t._v(" 得到错误信息；")]),t._v(" "),a("h3",{attrs:{id:"checker与事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#checker与事务"}},[t._v("#")]),t._v(" Checker与事务")]),t._v(" "),a("p",[t._v("模块Curd过程中，可以通过checker进行一些检查或者其他操作；checker在"),a("a",{attrs:{href:"#module.xml#"}},[t._v("module.xml")]),t._v("中配置")]),t._v(" "),a("p",[t._v("**checker方法的设置：**在module.xml配置的check类中定义方法，方法有@EntityCheck的注释，方法的参数只有一个：SeCurdParam")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmployeeChecker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EntityCheck")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("range "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckRange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BEFORE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SAVE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckMsg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkMothed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SeCurdParam")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("；\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("@EntityCheck参数介绍")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("ture")]),t._v(" "),a("td",[t._v("CheckType")]),t._v(" "),a("td",[t._v("Check有四种类型，分别是SAVE(1), DELETE(2), CREATE(3), READ(4);分别对应curd的四种操作")])]),t._v(" "),a("tr",[a("td",[t._v("range")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("CheckRange")]),t._v(" "),a("td",[t._v("CheckRange有六种类型，BEFORE(1),AFTER(2),BOTH(3),SAVING(4),ROLLBACK(5）），DELETEING(6);其中SAVING只能在保存的时候使用；DELETEING只能在删除的时候使用；")])]),t._v(" "),a("tr",[a("td",[t._v("checkOrder")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("默认为0，数值越小，越先执行；")])]),t._v(" "),a("tr",[a("td",[t._v("actionBreaker")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("默认为false，如果设置为true；当check方法运行返回错误时，会立刻终止操作程，返回结果")])]),t._v(" "),a("tr",[a("td",[t._v("overrideMethod")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("可以使用Class.method 的方式去覆盖其他Checker的method；")])])])]),t._v(" "),a("p",[a("strong",[t._v("保存的过程")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("curdEJb调用Save方法；")])]),t._v(" "),a("li",[a("p",[t._v("运行标志了CheckType =SAVE，CheckRange =BEFORE或者CheckRange =BOTH的方法，如果有其中一个方法返回的CheckMsg 不通过，就返回错误信息，不继续保存的操作；这个时候的check方法以查询为主，主要是检查数据的准确性，不会做一些修改数据库的操作；因为这个时候还没有在save的事务里面；")])]),t._v(" "),a("li",[a("p",[t._v("如果Save-Before没有错误返回，将进入save的事务，先从SeSaveParam.getSqlBeforeDtos()取出sql List，逐一运行List的sql，getSqlBeforeDtos()里面的信息，一般是从before Check写入；发生错误后，将中断事务，运行")])])]),t._v(" "),a("p",[t._v("CheckType =SAVE，CheckRange =ROLLBACK的checker方法；然后返回错误信息；")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("如果sql Before没有发生错误，将继续下一步，将entity保存到数据库，保存到数据库的过程如果发生错误，将中断事务，运行CheckType =SAVE，CheckRange =ROLLBACK的checker方法；然后返回错误信息；")])]),t._v(" "),a("li",[a("p",[t._v("将entity保存到数据库后，下一步运行CheckType =SAVE，CheckRange =SAVING的checker方法；如果发生错误，将中断事务，运行CheckType =SAVE，CheckRange =ROLLBACK的checker方法；然后返回错误信息；")])]),t._v(" "),a("li",[a("p",[t._v(".如果SAVING的Checker没有错误，将从SeSaveParam.getSqlAfterDtos()取出sql List，逐一运行List的sql，getSqlAfterDtos()里面的信息；发生错误后，将中断事务，运行")])])]),t._v(" "),a("p",[t._v("CheckType =SAVE，CheckRange =ROLLBACK的checker方法；然后返回错误信息；")]),t._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[t._v("如果Sql After也没有发生错误，这个时候将会提交整个save的事务；")]),t._v(" "),a("li",[t._v("接下来将运行标志了CheckType =SAVE，CheckRange =AFTER或者CheckRange =BOTH的方法，这些方法如果发生错误，返回错误信息也不会回滚之前的事务了，所以这时候尽量不要返回错误信息，只做一些确保正确的操作即可；")])]),t._v(" "),a("blockquote",[a("p",[t._v("请参考下图进一步了解")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(647),alt:"mssst"}})]),t._v(" "),a("p",[a("strong",[t._v("删除的过程")])]),t._v(" "),a("p",[t._v("删除的过程与保存的过程基本一样，只是deleteing的checker方法，在删除数据库的Entity操作之前运行；")]),t._v(" "),a("p",[a("strong",[t._v("创建的过程")])]),t._v(" "),a("p",[t._v("创建的过程相比保存的过程，没有sql Before，没有 Saving，没有 sql After ；")]),t._v(" "),a("p",[a("strong",[t._v("读取的过程")])]),t._v(" "),a("p",[t._v("读取的过程相比保存的过程，没有sql Before，没有 Saving，没有 sql After ；")]),t._v(" "),a("p",[a("strong",[t._v("模块的SEARCH")])]),t._v(" "),a("p",[t._v("配置对应的"),a("a",{attrs:{href:"#stSearch.xml"}},[t._v("stSearch.xml")]),t._v(", 模块的名称与stSearch的名称需要相同")]),t._v(" "),a("h3",{attrs:{id:"操作非模块数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作非模块数据"}},[t._v("#")]),t._v(" 操作非模块数据")]),t._v(" "),a("p",[t._v("M18对于模块外的数据提供了"),a("code",[t._v("SqlTableCurdEAO")]),t._v("进行读写操作。"),a("strong",[t._v("注")]),t._v(":如果对应的table是module中的数据，请审慎使用这种方法。")]),t._v(" "),a("ul",[a("li",[t._v("读取数据")])]),t._v(" "),a("p",[t._v("使用SqlTableCurdEAO的read(StReadParam param)方法读取数据库table的数据；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTableCurdEAO")]),t._v(" curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StReadParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StReadParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTableName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"draft"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTable")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("创建空表结构&保存数据")])]),t._v(" "),a("p",[t._v("使用SqlTableCurdEAO的genEmptyTable(String tableName)可以获取一个有表结构的空的sqlTable；")]),t._v(" "),a("p",[t._v("使用SqlTableCurdEAO的save(StUpdateParam param)可以保存table的数据；")]),t._v(" "),a("p",[t._v("StUpdateParam 参数一定需要传入tableName,和SqlTable的数据")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTableCurdEAO")]),t._v(" curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DraftDto")]),t._v(" draft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTable")]),t._v(" sqlTable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" emptyTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("genEmptyTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"draft"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBoolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"autoSave"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" draft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAutoSave")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"draftCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" draft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDraftCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lastModifyDate"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do some coding")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StUpdateParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StUpdateParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTableName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"draft"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" insertId  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" insertId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  reutrn "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("删除数据")])]),t._v(" "),a("p",[t._v("使用SqlTableCurdEAO的delete(StDeleteParamparam)方法删除数据库table的数据；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTableCurdEAO")]),t._v(" curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StDeleteParam")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StDeleteParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTableName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"draft"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n  param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    curdEAO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"系统表描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统表描述"}},[t._v("#")]),t._v(" 系统表描述")]),t._v(" "),a("p",[t._v("按照前面"),a("a",{attrs:{href:"#%E9%80%BB%E8%BE%91%E6%A8%A1%E5%9D%97"}},[t._v("逻辑模块")]),t._v("中的描述，M18使用系统表来描述系统的一些通用功能以及控制。不单单逻辑模块，系统中的很多功能和约定都是通过系统的方式来进行控制和处理的。")]),t._v(" "),a("blockquote",[a("p",[t._v("xml默认存放在share项目下面。 路径大致为: /main/resources/META-INF/*.xml")])]),t._v(" "),a("h3",{attrs:{id:"系统表关键字规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统表关键字规范"}},[t._v("#")]),t._v(" 系统表关键字规范")]),t._v(" "),a("p",[t._v("由于大部分的系统表使用xml格式进行编写，请注意xml格式的一些要求和限制。\n虽然xml并不是在服务器中间价运行的具体代码，不过由于配置将影响系统的大部分关键过程，请谨慎的修改。\nM18推荐尽量使用小写字母进行编号的标识。并要求不要使用任何特殊符号。\n对于table module等编号，推荐使用App的名字作为前缀。\n在命名常用名字的时候，需要考虑是否会和其他App的名字产生冲突，并考虑合适的命名规则。")]),t._v(" "),a("h3",{attrs:{id:"datadict-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datadict-xml"}},[t._v("#")]),t._v(" datadict.xml")]),t._v(" "),a("p",[t._v("dataidct用于描述mysql数据库中的table view 以及对应的column信息。\n同时，他会定义table的约束信息。（Index, Foreign Key, Unique Key等）\n由于datadict的信息会直接生成数据库表信息，请记得避免使用数据库的关键字以及任何容易出现问题的命名方式。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":系统在启动的时候，仅仅按照xml和数据库结构的差异进行数据库的更新。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":关于"),a("a",{attrs:{href:"#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF%E7%9A%84%E5%90%8C%E6%AD%A5"}},[t._v("View,Stored Procedure,Function的同步")]),t._v("将在本部分的后面介绍。")]),t._v(" "),a("blockquote",[a("p",[t._v("table的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("table的名字，在"),a("code",[t._v("M18")]),t._v("中仅仅运行使用小写字母。并不允许使用任何符号. table由于会生成到数据库中，创建的时候需要考虑全系统唯一")])]),t._v(" "),a("tr",[a("td",[t._v("sys")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("标记是否为系统表。 系统表不会检查"),a("a",{attrs:{href:"#%E5%8D%95%E6%8D%AE%E6%9D%83%E9%99%90"}},[t._v("数据权限")]),t._v(",不允许"),a("a",{attrs:{href:"#%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA"}},[t._v("导入导出")]),t._v("。")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("table的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("pk")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("用于标记当前table的主键栏位。在"),a("code",[t._v("M18")]),t._v("目前仅允许使用id栏位作为PK。"),a("strong",[t._v("注")]),t._v(":未来将删除")])]),t._v(" "),a("tr",[a("td",[t._v("virtual")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果标记为true，表示当前记录的信息不需要影响数据库结构。一般View 或者一些虚拟的table需要使用。")])]),t._v(" "),a("tr",[a("td",[t._v("supportUdf")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记是否允许使用者添加自定义栏位")])]),t._v(" "),a("tr",[a("td",[t._v("templet")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果标记为true，不会影响数据库结构。注，该信息在内存无法找到，仅仅影响初始化过程。其他table可以使用Inherit的方式来继承本templet里面的信息。")])]),t._v(" "),a("tr",[a("td",[t._v("extend")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果为true，表示来用扩展已经存在的table")])]),t._v(" "),a("tr",[a("td",[t._v("onlyInMain")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("一般而来，我们一个table的xml信息描述会生成两个数据库的table(xxx + xxx_v),如果这个参数为true，则仅仅生成xxx。")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("关于Inherit的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于描述需要继承的table templet的名字，只有table描述中templet为true的才可以使用。")])])])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 如果在继承后需要修改某些栏位的属性，在Column中直接添加对应的描述即可。不过一般情况下 并不推荐这样处理。因为容易导致误解。")]),t._v(" "),a("blockquote",[a("p",[t._v("Column的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位名字，表内唯一，推荐使用驼峰方式命名，不允许重名(忽略大小写下面的重名)。 "),a("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(' 不允许使用任何特殊符，例如 "*", "_", "-"。')])])]),t._v(" "),a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用了标记栏位属性")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("column的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("length")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记数据长度，在类型为char/number的情况下应该填写")])]),t._v(" "),a("tr",[a("td",[t._v("decimal")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记number类型栏位的小数位，仅仅number的时候进行填写")])]),t._v(" "),a("tr",[a("td",[t._v("defValue")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记栏位对应的默认值")])]),t._v(" "),a("tr",[a("td",[t._v("defPattern")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记栏位对应的"),a("a",{attrs:{href:"#pattern.xml"}},[t._v("Pattern")])])]),t._v(" "),a("tr",[a("td",[t._v("required")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("标记当前栏位是否必填，在save的时候 M18会根据这个进行检查")])]),t._v(" "),a("tr",[a("td",[t._v("identity")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("标记是否自增，一般仅仅用于id栏位")])]),t._v(" "),a("tr",[a("td",[t._v("i18nField")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记当前栏位是否支持多语言设定。仅仅char栏位可以使用本属性")])]),t._v(" "),a("tr",[a("td",[t._v("i18nSrc")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("在i18nField为true的时候才能使用。用于标记当前栏位跟进其他栏位自动开启i18nField。格式(Table.Column)")])]),t._v(" "),a("tr",[a("td",[t._v("allowNull")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记对应的栏位在数据库中是否允许使用null. "),a("strong",[t._v("注")]),t._v(":在数据库中有些类型的栏位有null的要求。")])]),t._v(" "),a("tr",[a("td",[t._v("buildIn")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记是否系统栏位，在一些功能(例如 Search的可选字段)里面会将系统栏位使用文件夹和其他栏位分割出来。")])]),t._v(" "),a("tr",[a("td",[t._v("dataImport")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记当前栏位是否支持导入")])]),t._v(" "),a("tr",[a("td",[t._v("dataExport")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记当前栏位是否支持导出")])]),t._v(" "),a("tr",[a("td",[t._v("skipLookup")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果希望在search的时候该栏位不可见 将其标记为true")])]),t._v(" "),a("tr",[a("td",[t._v("skipAccess")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记当前栏位在生成单据权限的Sql时候，是否需要参与考虑")])]),t._v(" "),a("tr",[a("td",[t._v("checkLookupVal")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记对应的栏位在导入的时候，是否需要Search权限重新检查对应的栏位是否允许。")])]),t._v(" "),a("tr",[a("td",[t._v("genRuleDate")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记当前栏位是否可以作为CodeFormat生成过程中的日期栏位")])]),t._v(" "),a("tr",[a("td",[t._v("batchUpdate")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记当前栏位是否允许批量更新。"),a("strong",[t._v("注")]),t._v("：有逻辑计算或无批量更新需要的栏位尽量不要进行标记。")])]),t._v(" "),a("tr",[a("td",[t._v("udfUpdate")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记对应的栏位是否支持自定义栏位更新")])]),t._v(" "),a("tr",[a("td",[t._v("skipFLR")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果为true，改栏位将不受字段级权限控制")])]),t._v(" "),a("tr",[a("td",[t._v("dataDupCheck")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标记对应的栏位是否支持数据重复检查。如果没有设置任何值，对应的栏位类型是字符串或者日期，或者pattern是lookup类型的，默认支持数据重复检查。")])]),t._v(" "),a("tr",[a("td",[t._v("dataEasy")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("dataImport")]),t._v(" "),a("td",[t._v("用于标志对应的栏位是否支持智能数据处理，如果没有设置任何值，默认使用dataImport的值")])]),t._v(" "),a("tr",[a("td",[t._v("lookupCurrentModule")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("用于标志对应的栏位是否lookup当前模块")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("栏位属性说明")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("int_unsigned")]),t._v(" "),a("td",[t._v("对应Java类型long "),a("strong",[t._v("注")]),t._v(":所有的id字段目前都是用int_unsigned")])]),t._v(" "),a("tr",[a("td",[t._v("bigint")]),t._v(" "),a("td",[t._v("对应Java类型long，非必要的情况下不要使用")])]),t._v(" "),a("tr",[a("td",[t._v("bit")]),t._v(" "),a("td",[t._v("对应java类型boolean")])]),t._v(" "),a("tr",[a("td",[t._v("datetime")]),t._v(" "),a("td",[t._v("对应日期时间栏位 java类型date")])]),t._v(" "),a("tr",[a("td",[t._v("date")]),t._v(" "),a("td",[t._v("对应日期栏位 java类型date")])]),t._v(" "),a("tr",[a("td",[t._v("nvarchar/varchar")]),t._v(" "),a("td",[t._v("对应java类型String, 这种类型需要指定需要使用的length")])]),t._v(" "),a("tr",[a("td",[t._v("text/longtext")]),t._v(" "),a("td",[t._v("对应java类型String, "),a("strong",[t._v("注")]),t._v(":text的可用长度有限，如果你确定需要足够的长度的栏位的时候请使用longtext")])]),t._v(" "),a("tr",[a("td",[t._v("numeric")]),t._v(" "),a("td",[t._v("对应java类型double, 这种类型可以指定length+decimal")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("strong",[t._v("注")]),t._v(":文件类型栏位的说明请参考 "),a("a",{attrs:{href:"#%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"}},[t._v("文件处理")])])])])]),t._v(" "),a("blockquote",[a("p",[t._v("Index的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("Index的名称 一个table里面的index不允许重名")])]),t._v(" "),a("tr",[a("td",[t._v("columns")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记当前index需要使用的栏位，多个栏位使用;分开")])]),t._v(" "),a("tr",[a("td",[t._v("unique")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记是否创建唯一键约束")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("fk的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("Foreign Key的名字")])]),t._v(" "),a("tr",[a("td",[t._v("columns")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("FK在当前table的栏位")])]),t._v(" "),a("tr",[a("td",[t._v("refTable")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("FK指向的table的名字")])]),t._v(" "),a("tr",[a("td",[t._v("refColumns")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("FK指向的栏位，允许空白，在空白的时候默认使用id栏位")])])])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":系统启动过程中将使用datadict的信息更新数据库的信息。特别的，对应栏位只增不删，如果有需要，请自己编写代码处理。")]),t._v(" "),a("p",[t._v("如果你需要将一个栏位的属性修改，请另外新增一个栏位。因为数据修复过程可能存在无法预料的问题。然后在必要的时候，自己将不需要的栏位删除。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":目前直接修改栏位属性虽然是允许操作的，不过系统将不会因此造成的问题做任何的提示或者修复。")]),t._v(" "),a("p",[t._v("另外一个需要特别说明的就是将column的长度改小的时候，请注意数据库系统将可能会截断数据，而且将会无法修复。")]),t._v(" "),a("blockquote",[a("p",[t._v("示例:")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.multiable.com/datadict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- test info --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test_base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test_base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("templet")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("int_unsigned"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("identity")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defValue")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defPattern")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("dataImport")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("createDate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.createDate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defValue")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("NOW()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defPattern")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("dataImport")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("dataExport")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("buildin")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("table")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  \n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("pk")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("inherit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test_base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defPattern")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("required")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defPattern")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("i18nField")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("index")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("columns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("unique")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("table")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h4",{attrs:{id:"数据库信息的同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库信息的同步"}},[t._v("#")]),t._v(" 数据库信息的同步")]),t._v(" "),a("p",[t._v("系统启动的时候，除了会根据datadict.xml更新table信息，M18还支持开发者更新View,Stored Procedure,Function等。对于datadict信息，我们将这部门描述为other Information。")]),t._v(" "),a("p",[t._v("具体做法如下:")]),t._v(" "),a("p",[t._v("M18要求将文件存放在ejb项目的如下路径ejb/src/main/resources/sql/")]),t._v(" "),a("p",[t._v("文件夹名字分别是view proc func")]),t._v(" "),a("p",[t._v("每个独立的Object应该独立存储为一个文件。在对应的文件脚本里面一般均是删除已经存在的对象，然后在重新创建。")]),t._v(" "),a("blockquote",[a("p",[t._v("示例：一个Stored Procedure的脚本")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("procedure")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exists")]),t._v(" test_dm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DELIMITER")]),t._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" test_dm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v(" dbname "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" test A "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dbname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DELIMITER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("更新的过程如下图")]),t._v(" "),a("p",[a("img",{attrs:{src:s(648),alt:"mssst"}})]),t._v(" "),a("h3",{attrs:{id:"pattern-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pattern-xml"}},[t._v("#")]),t._v(" pattern.xml")]),t._v(" "),a("p",[t._v("在M18中，系统使用pattern来对应一个栏位大致的表现方式。以及做一些常见的界面显示属性的规定。")]),t._v(" "),a("blockquote",[a("p",[t._v("record属性说明")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("pattern的名称")])]),t._v(" "),a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("pattern的类型；有七种可以选择填写：text；number；date；options；boolean；lookup；color")])]),t._v(" "),a("tr",[a("td",[t._v("info")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("pattern的一些info说明；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("text标签介绍，当record的type选择了text，那么下一级的标签要使用text标签；用于标志当前pattern定义的是一个文本类型；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("length")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("定义text的长度")])]),t._v(" "),a("tr",[a("td",[t._v("trim")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("当设置为true，会将栏位输入值前后的空格删掉")])]),t._v(" "),a("tr",[a("td",[t._v("upperCase")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("当设置为true，栏位输入的字母会变成大写")])]),t._v(" "),a("tr",[a("td",[t._v("mask")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("定义栏位输入一个固定格式")])]),t._v(" "),a("tr",[a("td",[t._v("regex")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("定义栏位的正则表达式")])]),t._v(" "),a("tr",[a("td",[t._v("html")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("如果设置为true，界面将会使用html组件显示栏位")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("number标签介绍，当record的type选择了number，那么下一级的标签要使用number标签；用于标志当前pattern定义的是一个数字类型；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("length")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("定义number的总长度")])]),t._v(" "),a("tr",[a("td",[t._v("decimal")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("定义小数位的长度，默认为0；")])]),t._v(" "),a("tr",[a("td",[t._v("max")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("double")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("定义number的最大值")])]),t._v(" "),a("tr",[a("td",[t._v("min")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("double")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("定义number的最小值")])]),t._v(" "),a("tr",[a("td",[t._v("noSep")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("如果为true，数值将会有千分位 “,”")])]),t._v(" "),a("tr",[a("td",[t._v("negativeSymbol")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("如果为true，当数值为负数时，将会使用括号将数值包住")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("lookup标签介绍，当record的type选择了lookup，那么下一级的标签要使用lookup标签；用于标志当前pattern定义的是一个查询数据类型；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("searchType")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记栏位对应的"),a("a",{attrs:{href:"#stSearch.xml"}},[t._v("stSearch")])])])])]),t._v(" "),a("blockquote",[a("p",[t._v("options标签介绍，当record的type选择了options，那么下一级的标签要使用options标签；用于标志当前pattern定义的是一个下拉框选择类型；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("valueClass")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("用于定义option的数据类型；可选：String，Integer，Double，Combobox")])]),t._v(" "),a("tr",[a("td",[t._v("emptyValue")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于定义当没有选中任何option时应该是什么值")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("options里面的子标签option介绍；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("value")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("选中后的值，真实保存的值")])]),t._v(" "),a("tr",[a("td",[t._v("label")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("显示在页面上看到的值，可以填messCode")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("option里面的子标签icon介绍；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("图标的名字")])]),t._v(" "),a("tr",[a("td",[t._v("library")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("图标库的系统路径")])]),t._v(" "),a("tr",[a("td",[t._v("url")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("图标的网络路径")])]),t._v(" "),a("tr",[a("td",[t._v("style")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("图标的css类型")])]),t._v(" "),a("tr",[a("td",[t._v("styleClass")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("图标的css类型class")])])])]),t._v(" "),a("p",[a("strong",[t._v("特殊pattern列表")])]),t._v(" "),a("p",[t._v("请注意下面的均系统特殊的pattern，不推荐新增其他内容 而是直接使用")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- this is for file.info the id of filedata --\x3e")]),t._v("\n\t//用于对应栏位存的是文件的fileId\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("number")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("12"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- this is for image, use code for safe! --\x3e")]),t._v("\n\t//用于对应栏位存的是图片的imgCode\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("imgCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("60"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- date with time --\x3e")]),t._v("\n\t//用于显示日期加时间\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\n\t//用于显示时间,格式为 HH:MM\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于显示日期\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于使用color组件\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于表示栏位存的数据可以无限长度,注:仅可以存储2^32长度的信息，不够的情况下请使用longtext\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("charMax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于表示栏位存的是json格式的string\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于表示栏位存的数据可以无限长度，datadict栏位对应的type一般为longtext\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("longtext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t//用于表示使用html组件显示\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("record")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"navmenu-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#navmenu-xml"}},[t._v("#")]),t._v(" navmenu.xml")]),t._v(" "),a("p",[t._v("用户在使用M18系统的时候，需要通过菜单访问对应的模块。所以在M18授权的时候，也是通过菜单的方式进行控制的。系统里面使用navmenu.xml来定义系统的菜单。")]),t._v(" "),a("blockquote",[a("p",[t._v("menuType的描述，menuType用于定义菜单类型以及对应的图示。")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("子元素名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于表示一个菜单类型")])]),t._v(" "),a("tr",[a("td",[t._v("desc")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("menuType的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("icon")]),t._v(" "),a("td",[t._v("name")]),t._v(" "),a("td",[t._v("icon的名字 (icon用于菜单显示)")])]),t._v(" "),a("tr",[a("td",[t._v("icon")]),t._v(" "),a("td",[t._v("library")]),t._v(" "),a("td",[t._v("icon所在位置，系统CSS通过library和name来找到对应的图片")])]),t._v(" "),a("tr",[a("td",[t._v("image")]),t._v(" "),a("td",[t._v("name")]),t._v(" "),a("td",[t._v("image的名字 (image用于图像化菜单)")])]),t._v(" "),a("tr",[a("td",[t._v("image")]),t._v(" "),a("td",[t._v("library")]),t._v(" "),a("td",[t._v("image所在的位置")])])])]),t._v(" "),a("p",[t._v("系统目前有")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("FM 用于表示"),a("code",[t._v("基础资料模块")])])]),t._v(" "),a("li",[a("p",[t._v("TRAN 用于表示"),a("code",[t._v("交易型模块")])])]),t._v(" "),a("li",[a("p",[t._v("SETTING 用于表示 "),a("code",[t._v("设定类型模块")])])]),t._v(" "),a("li",[a("p",[t._v("EBI 用于表示 "),a("code",[t._v("EBI模块")])])]),t._v(" "),a("li",[a("p",[t._v("OTHER/"),a("code",[t._v("留空")]),t._v(" 用于表示 "),a("code",[t._v("其他类型模块")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(649),alt:"mssst"}})])])]),t._v(" "),a("blockquote",[a("p",[t._v("示例:")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("menuType")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("FM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("desc")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fm/master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("icon")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cicon-fm-master-data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("library")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font/cawIcon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("icon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("image")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fmIcon.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("library")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("img/icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("menuType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("function的属性描述, function在系统在表示一个菜单对应有的功能。 是授权的最小单元")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("function的名字,推荐有字母以及下划线组成。")])]),t._v(" "),a("tr",[a("td",[t._v("group")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("分组用字段")])]),t._v(" "),a("tr",[a("td",[t._v("messCode")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("function的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("tooltip")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("function在授权模块显示的tooltip 用于用户快速了解对应的功能含义")])])])]),t._v(" "),a("p",[t._v("现有功能的列表请在系统的授权模块进行查看。")]),t._v(" "),a("blockquote",[a("p",[t._v("menuHelper的属性描述，主要用于生成menuParam")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("表示当前helper对于指定的菜单会生效。code需要添加menu的code")])]),t._v(" "),a("tr",[a("td",[t._v("mType")]),t._v(" "),a("td",[t._v("表示当前helper对于特定类型的菜单都会生效")])]),t._v(" "),a("tr",[a("td",[t._v("class")]),t._v(" "),a("td",[t._v("一个类的全名，需要实现MenuHelper。可以自定义isFor方法用于影响当前class影响的范围。")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("folder的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("folder的名字")])]),t._v(" "),a("tr",[a("td",[t._v("messCode")]),t._v(" "),a("td",[t._v("folder的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("apDebug")]),t._v(" "),a("td",[t._v("布尔值，如果是true的时候，仅仅在debug模式才会显示出来")])]),t._v(" "),a("tr",[a("td",[t._v("flag")]),t._v(" "),a("td",[t._v("用于控制特定模块在功能不被完全购买的时候 不显示")])]),t._v(" "),a("tr",[a("td",[t._v("order")]),t._v(" "),a("td",[t._v("用于定义folder在树中的顺序")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("menu的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("子元素名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("menu的名字")])]),t._v(" "),a("tr",[a("td",[t._v("messCode")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("menu的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("src")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("menu对应的页面位置")])]),t._v(" "),a("tr",[a("td",[t._v("module")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("当前模块默认使用的module")])]),t._v(" "),a("tr",[a("td",[t._v("mType")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("菜单对应的menuType")])]),t._v(" "),a("tr",[a("td",[t._v("templet")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("表当前模块为模块，其他模块运行继承(主要继承function)")])]),t._v(" "),a("tr",[a("td",[t._v("apDebug")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("布尔值，如果是true的时候，仅仅在debug模式才会显示出来")])]),t._v(" "),a("tr",[a("td",[t._v("flag")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于控制特定模块在功能不被完全购买的时候 不显示")])]),t._v(" "),a("tr",[a("td",[t._v("inherit")]),t._v(" "),a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("填写templet为true的模块")])]),t._v(" "),a("tr",[a("td",[t._v("inherit")]),t._v(" "),a("td",[t._v("include")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("function的名字 并使用分号连接起来，用于继承指定功能")])]),t._v(" "),a("tr",[a("td",[t._v("inherit")]),t._v(" "),a("td",[t._v("except")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("function的名字 并使用分号连接起来，用于排除继承功能")])]),t._v(" "),a("tr",[a("td",[t._v("function")]),t._v(" "),a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("function的名字 并使用分号连接起来（用于表示当前模块有的功能，最高优先级）")])]),t._v(" "),a("tr",[a("td",[t._v("controller")]),t._v(" "),a("td",[a("code",[t._v("NA")])]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("class名字 用于指定当前菜单需要使用的controller")])]),t._v(" "),a("tr",[a("td",[t._v("listener")]),t._v(" "),a("td",[a("code",[t._v("NA")])]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("class名字 用于指定当前菜单需要使用的listener")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[t._v("key")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("param的key param用于程序对于菜单进行添加额外参数使用")])]),t._v(" "),a("tr",[a("td",[t._v("param")]),t._v(" "),a("td",[t._v("value")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("param对应的value")])]),t._v(" "),a("tr",[a("td",[t._v("menuParam")]),t._v(" "),a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("参数名字,menuParam用于菜单连接使用，用于自定义连接的参数")])]),t._v(" "),a("tr",[a("td",[t._v("menuParam")]),t._v(" "),a("td",[t._v("description")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("参数在界面显示的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("menuParam")]),t._v(" "),a("td",[t._v("pattern")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("对应的参数类型")])]),t._v(" "),a("tr",[a("td",[t._v("menuParam")]),t._v(" "),a("td",[t._v("folder")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("参数分组")])]),t._v(" "),a("tr",[a("td",[t._v("order")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td",[t._v("用于定义menu在folder中的顺序")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("nm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.multiable.com/navmenu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("caw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("New"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Editor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("messCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.saveNew"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tooltip")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("right.tt.new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Editor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("messCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tooltip")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("right.tt.save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("folder")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("messCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("menu")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("messCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("view/module/test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("New;Save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("menu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("folder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("nm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("在代码中如何判定user是否有某个权限？")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRightInfo")]),t._v(" info "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FrameRight")]),t._v(" right "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFrameRight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v(": 3PD自己添加的功能需要通过right里面的otherRight来判断。")]),t._v(" "),a("h3",{attrs:{id:"module-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-xml"}},[t._v("#")]),t._v(" module.xml")]),t._v(" "),a("p",[t._v("Module表示一个模块（or功能）相关的表的集合。在M18的设计中Module必须有一个主表，其他表必须和主表的PK发生一定意义上的关联关系。")]),t._v(" "),a("blockquote",[a("p",[t._v("module的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("模块的名字")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("模块的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("extend")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于表示当前描述用于扩展原有的module的属性")])]),t._v(" "),a("tr",[a("td",[t._v("mainTable")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于指定当面模块的主表"),a("strong",[t._v("注")]),t._v(" 对应的table需要在子元素的table中出现")])]),t._v(" "),a("tr",[a("td",[t._v("useBe")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("表示当前模块需要使用Be，一般来说为交易型模块")])]),t._v(" "),a("tr",[a("td",[t._v("fmshare")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("当这个栏位不为空的时候，表示为基础资料模块。推荐填写为N，表示默认将基础资料模块设置为BE数据共享")])]),t._v(" "),a("tr",[a("td",[t._v("useAccess")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("表示当前模块是否支持Data Guard权限控制。")])]),t._v(" "),a("tr",[a("td",[t._v("useAttach")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于控制模块是否启用附件功能。")])]),t._v(" "),a("tr",[a("td",[t._v("useApv")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("是否允许启用批核功能。")])]),t._v(" "),a("tr",[a("td",[t._v("useChangenote")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("是否启用变更单功能。")])]),t._v(" "),a("tr",[a("td",[t._v("useCache")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("是否使用cache。默认为true，"),a("strong",[t._v("注")]),t._v(":如果你的模块已经自行cache 或者使用频率很低 或者无法cache等的时候，请记得将cache设置为false。 为了确保cache正确被更新，请更新数据的时候 必须将iRev + 1")])]),t._v(" "),a("tr",[a("td",[t._v("useAutoGenCode")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("是否允许使用编码生成规则。需要对应的模块有New功能。")])]),t._v(" "),a("tr",[a("td",[t._v("genCode_Field")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("编码生成规则的目标字段。默认为code栏位")])]),t._v(" "),a("tr",[a("td",[t._v("genCode_Date")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("编码生成规则的默认日期栏位。默认为createDate栏位")])]),t._v(" "),a("tr",[a("td",[t._v("fieldDataGuard")]),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td",[t._v("标记对应的模块是否启用字段级权限。-1表示不启用 1表示启用 0 表示对应的模块有新增数据功能的时候启用")])]),t._v(" "),a("tr",[a("td",[t._v("udfLogicSkip")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("禁用用户自定义赋值更新功能")])]),t._v(" "),a("tr",[a("td",[t._v("supportUdf")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("是否允许使用自定义栏位功能")])]),t._v(" "),a("tr",[a("td",[t._v("checkCodeExist")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("在界面输入编号的时候，是否主动进行编号存在的检查 并提示用户。")])]),t._v(" "),a("tr",[a("td",[t._v("dataSynch")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记当前模块是否允许在Data Easy中使用。默认需要模块有New的功能。如果为enable会默认允许。"),a("strong",[t._v("注")]),t._v(":原本计划修改为boolean,后来因为兼容性问题没有修改。")])]),t._v(" "),a("tr",[a("td",[t._v("dataImportConveter")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("Class类名，用于导入功能的处理类 见"),a("a",{attrs:{href:"#%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA"}},[t._v("导入与导出")])])]),t._v(" "),a("tr",[a("td",[t._v("excelGener")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("Class类名，用于导出功能的处理类 见"),a("a",{attrs:{href:"#%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA"}},[t._v("导入与导出")])])]),t._v(" "),a("tr",[a("td",[t._v("template")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记当前配置描述是否模板，模板用于"),a("a",{attrs:{href:"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"}},[t._v("自定义模块")]),t._v("功能")])]),t._v(" "),a("tr",[a("td",[t._v("tableOrders")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于说明下面table的解析次序，使用分号进行分割。"),a("strong",[t._v("注")]),t._v(":主表一定第一次序")])]),t._v(" "),a("tr",[a("td",[t._v("codeDupLevel")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记code重复的基本。默认为全系统唯一。值为BE的时候 BE+Code在数据库中唯一。"),a("strong",[t._v("注")]),t._v(":系统系统的时候会自动创建唯一键约束, 请确保修改前数值的唯一性，避免无法正确启动系统。")])]),t._v(" "),a("tr",[a("td",[t._v("skipExpired")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记当前模块不启用失效功能")])]),t._v(" "),a("tr",[a("td",[t._v("skipSysBC")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于定义当前模块不创建code的唯一性约束；")])]),t._v(" "),a("tr",[a("td",[t._v("importAllowUpdate")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于定义当前模块在数据导入是否支持更新，默认为true；")])]),t._v(" "),a("tr",[a("td",[t._v("importThreadMode")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于定义当前模块在数据导入是否支持多线程，默认为true；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("table的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("table的名字，对应datadict的信息")])]),t._v(" "),a("tr",[a("td",[t._v("tpl")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于"),a("a",{attrs:{href:"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"}},[t._v("自定义模块")]),t._v("。用于标记对应table使用那个真实的datadict(可以指向真实的表)")])]),t._v(" "),a("tr",[a("td",[t._v("c")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记是否支持create. 如果不支持的时候，将在操作的时候忽略这个table")])]),t._v(" "),a("tr",[a("td",[t._v("r")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记是否支持read. 如果不支持的时候，将在操作的时候忽略这个table")])]),t._v(" "),a("tr",[a("td",[t._v("u")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记是否支持save. 如果不支持的时候，将在操作的时候忽略这个table")])]),t._v(" "),a("tr",[a("td",[t._v("d")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记是否支持delete. 如果不支持的时候，将在操作的时候忽略这个table")])]),t._v(" "),a("tr",[a("td",[t._v("initRow")]),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td",[t._v("用于标记在新增的时候，模块对应table需要初始化的行数。一般需要的情况下 应该仅仅设置为1")])]),t._v(" "),a("tr",[a("td",[t._v("forceInit")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于标记模块在被read出来的时候，如果对应的table的行数不足initRow中填写的数量的时候 是否强制补齐对应的记录数。"),a("strong",[t._v("注")]),t._v(":通常仅仅用于后续补充表的时候 可能需要使用")])]),t._v(" "),a("tr",[a("td",[t._v("hpk")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记当前table与主表关联的栏位。"),a("strong",[t._v("注")]),t._v(":主表不需要填写 。 同一个模块的关联关系不要创建外键")])]),t._v(" "),a("tr",[a("td",[t._v("fkey")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记footer表中唯一性栏位")])]),t._v(" "),a("tr",[a("td",[t._v("hfname")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记第二层footer的信息。用于定位其上一层footer")])]),t._v(" "),a("tr",[a("td",[t._v("hfkey")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("上一层footer的唯一性栏位")])]),t._v(" "),a("tr",[a("td",[t._v("order")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("指定一个栏位用于控制table的读取排序次序。仅仅影响read的时候处理，不影响其他任何操作")])]),t._v(" "),a("tr",[a("td",[t._v("cpnType")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于标记对应的table和主表的关系是1:N,请慎重标记。"),a("strong",[t._v("注")]),t._v(":标记为table的时候 支持自定义栏位功能。")])]),t._v(" "),a("tr",[a("td",[t._v("discriminatorColumn")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("标记一个分区栏位，用于处理table同时给多个模块使用的情况，在save的时候会自动设置为当前的module的名字")])]),t._v(" "),a("tr",[a("td",[t._v("resetDiscriminatorColumn")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("标记是否需要强制设置分区栏位。")])]),t._v(" "),a("tr",[a("td",[t._v("dataImport")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("标记是否支持导入功能 "),a("strong",[t._v("注")]),t._v(":如果主表不支持的话，当前模块也不支持导入功能")])]),t._v(" "),a("tr",[a("td",[t._v("dataExport")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("标记是否支持导出功能 "),a("strong",[t._v("注")]),t._v(":如果主表不支持的话，当前模块也不支持导出功能")])]),t._v(" "),a("tr",[a("td",[t._v("columnOrders")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("栏位序列，使用分号进行连接，用于标记栏位处理次序")])]),t._v(" "),a("tr",[a("td",[t._v("fieldRightSetting")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("用于控制对应的table是否允许设置字段级权限")])]),t._v(" "),a("tr",[a("td",[t._v("compareKey")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("栏位序列，使用分号进行连接，数据差异比较的时候 使用这个key进行两行数据的判定。默认使用id栏位")])]),t._v(" "),a("tr",[a("td",[t._v("sfKey")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("当前footer表中与上一层footer关联的栏位")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("checker的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("class")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("class类名，用于标记对应的checker的名字")])]),t._v(" "),a("tr",[a("td",[t._v("exclude")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("使用分号连接的方法名字。对应的名字将不会被当前checker运行")])]),t._v(" "),a("tr",[a("td",[t._v("include")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("都是分号连接的方法名字。仅仅已经书写的名字才会被checker运行")])]),t._v(" "),a("tr",[a("td",[t._v("skipSuper")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("标记checker忽略class的上层class中的方法")])]),t._v(" "),a("tr",[a("td",[t._v("apployTo")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("表示当前checker应用的范围。默认当前模块，你可以apply到指定模块，或者使用*表示所有的模块")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("param的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("key")]),t._v(" "),a("td",[t._v("param的key param用于程序对于模块进行添加额外参数使用")])]),t._v(" "),a("tr",[a("td",[t._v("value")]),t._v(" "),a("td",[t._v("param对应的value")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("dataImportExtend的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("extendSrc")]),t._v(" "),a("td",[t._v("用于标记在数据导入模块使用的拓展页面")])]),t._v(" "),a("tr",[a("td",[t._v("dtoClass")]),t._v(" "),a("td",[t._v("用于拓展页面的数据类")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("dataExportExtend的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("extendSrc")]),t._v(" "),a("td",[t._v("用于标记在数据导出模块使用的拓展页面")])]),t._v(" "),a("tr",[a("td",[t._v("dtoClass")]),t._v(" "),a("td",[t._v("用于拓展页面的数据类")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("示例:")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("md")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.multiable.com/module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("caw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mainTable")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("useAccess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("useAttach")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("initRow")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("useroption"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("initRow")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("forceInit")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("userrole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("hpk")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("cpnType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("usercontrol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("initRow")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("hpk")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("forceInit")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("userdefbe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("initRow")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("hpk")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fKey")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("order")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("priority"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("cpnType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- this checker is for all module!  --\x3e")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("checker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.ejb.checker.ModuleChecker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("applyTo")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("checker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.ejb.checker.ExtDataChecker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("applyTo")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("checker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.ejb.checker.UserChecker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"i18n的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#i18n的实现"}},[t._v("#")]),t._v(" i18n的实现")]),t._v(" "),a("p",[t._v("M18系统支持在多种语言显示，系统要求至少实现英语, 简体中文, 繁体中文等。用户可以在系统内添加自定义语言。")]),t._v(" "),a("blockquote",[a("p",[t._v("对应的配置文件放在/main/resources/META-INF/lang/Message_*.properties")])]),t._v(" "),a("p",[t._v("开发者使用Eclipse可以直接编辑对应的语言文件。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(650),alt:"mssst"}})]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":在每添加一个新的MessCode的情况下, 英文是一定需要添加的。")]),t._v(" "),a("p",[t._v("为了确保你添加的MessCode不和其他开发者冲突，M18推荐MessCode使用app名字作为前缀。")]),t._v(" "),a("p",[t._v("在代码中你可以通过MessCode获取到你需要的文本信息。例如")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawGlobal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EBI"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("特别的，如果你的MessCode需要在JavaScript中使用，请在"),a("code",[t._v("webKey.properties")]),t._v("中间中添加记录。然后在JS中就可以进行调用了。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" mText "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" myView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EBI'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v(":在JavaScript使用的Mess应该避免web的一些关键字。")]),t._v(" "),a("blockquote",[a("p",[t._v("webKey.properties 示例")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("# web mess for core\nCloseAllTabs\nEBI\nall\n")])])]),a("blockquote",[a("p",[t._v("用户添加多语言以及MessCode，请查看系统中的模块。 "),a("code",[t._v("新增语言")]),t._v(" "),a("code",[t._v("描述编号")])])]),t._v(" "),a("p",[t._v("M18系统还支持数据层面的多语言。在"),a("code",[t._v("datadict")]),t._v("中将栏位设置"),a("code",[t._v("i18nField")]),t._v("为true。又因为系统运行用户在"),a("code",[t._v("新增语言")]),t._v(" 进行语言添加，所以系统这部分信息使用一个Json栏位来存储对应的数据。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":该字段系统根据当前table是否存在"),a("code",[t._v("i18nField")]),t._v("自动生成.")]),t._v(" "),a("blockquote",[a("p",[a("img",{attrs:{src:s(651),alt:"mssst"}}),a("img",{attrs:{src:s(652),alt:"mssst"}})])]),t._v(" "),a("p",[t._v("特别的，在SqlEntity中，对应的栏位会被还原为SqlTable的简单栏位。")]),t._v(" "),a("p",[t._v("你可以如下操作对应的栏位")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" desc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desc_en"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nemployee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desc_zh_CN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nemployee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desc_en"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v(":进行使用"),a("a",{attrs:{href:"#%E6%A8%A1%E5%9D%97%E7%9A%84CURD"}},[t._v("模块读写")]),t._v("可以这样操作，如果你直接更新数据库，对应的栏位并不存在，需更新Json栏位"),a("code",[t._v("i18nField")])]),t._v(" "),a("h3",{attrs:{id:"search的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#search的实现"}},[t._v("#")]),t._v(" Search的实现")]),t._v(" "),a("p",[t._v("search是M18系统常见的数据查询，通过配置stInfo.xml和stSearch.xml，可以查询出对应table/view等的数据；")]),t._v(" "),a("p",[t._v("页面Lookup组件的数据查询也是使用了search去实现的。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(": 系统一些通用功能判定通用也是用过Search功能实现。")]),t._v(" "),a("h3",{attrs:{id:"stinfo-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stinfo-xml"}},[t._v("#")]),t._v(" stInfo.xml")]),t._v(" "),a("p",[t._v("stInfo是在定义search的table数据，为了避免table直接暴露给用户的一个折中方法。如果在stsearch中使用了一个stInfo，而对应的信息在stInfo.xml没有定义，系统会默认根据datadict生成对应的stInfo信息。")]),t._v(" "),a("blockquote",[a("p",[t._v("stInfo标签的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("stInfo 的名字，一般与所对应的table同名")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("stInfo的mess")])]),t._v(" "),a("tr",[a("td",[t._v("table")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("对应datadict table的名字；")])]),t._v(" "),a("tr",[a("td",[t._v("inCols")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("这个参数的作用是：定义table中哪些栏位在这个stInfo是可用的。如果这个参数为空，代表对应table的所有栏位在这个stInfo都时可用的。不为空，则两个栏位之间需要用使用分号 “;” 隔开")])]),t._v(" "),a("tr",[a("td",[t._v("exCols")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("这个参数的作用是：定义table中哪些栏位在当前stInfo是不可用的。如果这个参数为空，代表对应table的所有栏位在这个stInfo都时可用的。不为空，则两个栏位之间需要用使用分号 “;” 隔开")])]),t._v(" "),a("tr",[a("td",[t._v("autoRelation")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("用于标记lookup栏位自动创建relation")])]),t._v(" "),a("tr",[a("td",[t._v("skipBuildin")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("用于标记build-in栏位可以在lookup条件中使用")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("relation标签的属性描述：relation标签是定义当前stInfo的table如何与另一个stInfo的table进行关联；关联后用于search的查询；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("col")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("必须是stInfo对应table里面的栏位，本stInfo的table将会和tarSt对应的table通过col和tarCol关联")])]),t._v(" "),a("tr",[a("td",[t._v("tarSt")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("需要关联到的stInfo名称")])]),t._v(" "),a("tr",[a("td",[t._v("tarCol")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("必须需要关联到的stInfo对应table里面的栏位")])]),t._v(" "),a("tr",[a("td",[t._v("tarNullAble")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("默认为false；如果为true；则关联时使用left outer join；否则使用inner join")])]),t._v(" "),a("tr",[a("td",[t._v("joinCond")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("如果值不为空，则使用这个设置的条件进行关联；否则使用col 和tarCol进行关联；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("col标签的属性描述：col标签用于定义自定义栏位用在search的结果返回；这个标签不是必须的")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位的名称")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位的messCode")])]),t._v(" "),a("tr",[a("td",[t._v("pattern")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记栏位对应的"),a("a",{attrs:{href:"#pattern.xml"}},[t._v("Pattern")])])]),t._v(" "),a("tr",[a("td",[t._v("sql")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果这个栏位的值是要从数据库查询出来的，就需要设置一段sql给到这个")])]),t._v(" "),a("tr",[a("td",[t._v("cond")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以作为查询条件使用")])]),t._v(" "),a("tr",[a("td",[t._v("sort")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以用于排序")])]),t._v(" "),a("tr",[a("td",[t._v("show")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以显示到页面上")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("handler 标签的属性秒： handler标签用于配置stInfo的handler类用于初始化stInfo；这个标签不是必须的")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("stInfoName")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("stInfo的名称")])]),t._v(" "),a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("handler的class路径")])])])]),t._v(" "),a("h3",{attrs:{id:"stsearch-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stsearch-xml"}},[t._v("#")]),t._v(" stSearch.xml")]),t._v(" "),a("blockquote",[a("p",[t._v("stSearch标签的参数属性")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("stSearch 的名字")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("stSearch的messCode")])]),t._v(" "),a("tr",[a("td",[t._v("srcSt")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("使用stInfo.xml里面配置的stInfo")])]),t._v(" "),a("tr",[a("td",[t._v("maxLevel")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("用于表示stInfo向下最多可以relation多少层")])]),t._v(" "),a("tr",[a("td",[t._v("defCond")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("默认查询条件")])]),t._v(" "),a("tr",[a("td",[t._v("sort")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("默认排序方式")])]),t._v(" "),a("tr",[a("td",[t._v("supportMultiSort")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果设置为false，只能使用一个栏位排序")])]),t._v(" "),a("tr",[a("td",[t._v("asyncGetCount")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false（如果没有设置ejb或者没有设置slave，默认值为true）")]),t._v(" "),a("td",[t._v("如果设置为true，lookup查询总数的将会和查询数据分开查询")])]),t._v(" "),a("tr",[a("td",[t._v("mustJoinSt")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于定义这个查询中必须要join的stInfo，stInfo必须在srcSt的relation层级关系里；两个或多个stInfo需要用分号“‘;”隔开；")])]),t._v(" "),a("tr",[a("td",[t._v("ejb")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("拼Search sql 的ejb，必须要继承GenSearchSqlAdapter；如果栏位没有设置，使用系统默认的ejb；")])]),t._v(" "),a("tr",[a("td",[t._v("udfUse")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果设置为false，不会出现在自定义查询模块")])]),t._v(" "),a("tr",[a("td",[t._v("accessModule")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于指定当前stSearch查询数据对应的模块")])]),t._v(" "),a("tr",[a("td",[t._v("accessField")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("“id”")]),t._v(" "),a("td",[t._v("用于拼access Sql 时，指定srcSt通过哪个栏位和footer table 的id栏位关联")])]),t._v(" "),a("tr",[a("td",[t._v("nameCardSupport")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于设置是否支持nameCard")])]),t._v(" "),a("tr",[a("td",[t._v("hideFormat")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果设置为true；lookup将会隐藏format，用户不能设置")])]),t._v(" "),a("tr",[a("td",[t._v("hideFilter")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果设置为false，用户无法在Lookup页面添加filter条件")])]),t._v(" "),a("tr",[a("td",[t._v("supportSearch")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果设置为false，用户无法在lookup页面使用模糊查询功能")])]),t._v(" "),a("tr",[a("td",[t._v("supportDeletedData")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果为true，search可以查询已被删除的记录")])]),t._v(" "),a("tr",[a("td",[t._v("slaveEjb")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("slave的class路径")])]),t._v(" "),a("tr",[a("td",[t._v("slaveApplyTo")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("当前的slave可以使用在其他的stSearch上；这里填写stSearch name；如果需要填写两个以上的stSearch，请使用分号“；”隔开；")])]),t._v(" "),a("tr",[a("td",[t._v("skipAccess")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果设置为true，lookup将跳过Access检查")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("slaveCol标签的属性描述：slaveCol标签用于定义自定义栏位用在search的结果返回；这个标签不是必须的")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("col")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位的名称")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位的messCode")])]),t._v(" "),a("tr",[a("td",[t._v("pattern")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于标记栏位对应的"),a("a",{attrs:{href:"#pattern.xml"}},[t._v("Pattern")])])]),t._v(" "),a("tr",[a("td",[t._v("sql")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果这个栏位的值是要从数据库查询出来的，就需要设置一段sql给到这个")])]),t._v(" "),a("tr",[a("td",[t._v("cond")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以作为查询条件使用")])]),t._v(" "),a("tr",[a("td",[t._v("sort")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以用于排序")])]),t._v(" "),a("tr",[a("td",[t._v("show")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("如果值为true，这个栏位可以显示到页面上")])]),t._v(" "),a("tr",[a("td",[t._v("followField")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填一个当前stInfo下或者关联table下的field；用于将当前加的slaveField跟在这个field后面在format设置界面的左边栏显示；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("bindCond 标签的参数介绍；bingCond是stSearch默认加的一个条件；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("andOr")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果没有设置，会使用“and”去拼sql")])]),t._v(" "),a("tr",[a("td",[t._v("leftBrackets")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v('如果需要填值，一般会填"("')])]),t._v(" "),a("tr",[a("td",[t._v("leftFieldMode")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"column"')]),t._v(" "),a("td",[t._v("表示leftField的类型")])]),t._v(" "),a("tr",[a("td",[t._v("leftField")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果leftFieldMode 是“column”；那么这里就要填栏位名称；如果leftFieldMode是“value”，那么这里就填数据")])]),t._v(" "),a("tr",[a("td",[t._v("operator")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"="')]),t._v(" "),a("td",[t._v("这里填操作符号；默认为等于号")])]),t._v(" "),a("tr",[a("td",[t._v("rightFieldMode")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"value"')]),t._v(" "),a("td",[t._v("表示rightField的类型")])]),t._v(" "),a("tr",[a("td",[t._v("rightField")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果leftFieldMode 是“column”；那么这里就要填栏位名称；如果leftFieldMode是“value”，那么这里就填数据")])]),t._v(" "),a("tr",[a("td",[t._v("rightBrackets")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v('如果需要填值，一般会填")"')])]),t._v(" "),a("tr",[a("td",[t._v("condString")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("这里填一段sql的查询条件；如果这里设置了sql条件，上面的那些参数配置将会失效；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("format标签的参数介绍; format用于配置查询的系统format")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("-1")]),t._v(" "),a("td",[t._v("不能大于0；如果大于0将改为-")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("format的messCode")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("formt里面的cond 标签的参数介绍；用于设置format的默认条件；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("andOr")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果没有设置，会使用“and”去拼sql")])]),t._v(" "),a("tr",[a("td",[t._v("leftBrackets")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v('如果需要填值，一般会填"("')])]),t._v(" "),a("tr",[a("td",[t._v("leftFieldMode")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"column"')]),t._v(" "),a("td",[t._v("表示leftField的类型")])]),t._v(" "),a("tr",[a("td",[t._v("leftField")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果leftFieldMode 是“column”；那么这里就要填栏位名称；如果leftFieldMode是“value”，那么这里就填数据")])]),t._v(" "),a("tr",[a("td",[t._v("operator")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"="')]),t._v(" "),a("td",[t._v("这里填操作符号；默认为等于号")])]),t._v(" "),a("tr",[a("td",[t._v("rightFieldMode")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"value"')]),t._v(" "),a("td",[t._v("表示rightField的类型")])]),t._v(" "),a("tr",[a("td",[t._v("rightField")]),t._v(" "),a("td",[t._v("fasle")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果leftFieldMode 是“column”；那么这里就要填栏位名称；如果leftFieldMode是“value”，那么这里就填数据")])]),t._v(" "),a("tr",[a("td",[t._v("rightBrackets")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v('如果需要填值，一般会填")"')])]),t._v(" "),a("tr",[a("td",[t._v("condString")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("这里填一段sql的查询条件；如果这里设置了sql条件，上面的那些参数配置将会失效；")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("format里面的col标签的参数介绍; 用于配置默认显示栏位；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("col")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填栏位的名称")])]),t._v(" "),a("tr",[a("td",[t._v("mess")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("如果想改变栏位显示mess；可以这里填一个messCode覆盖")])]),t._v(" "),a("tr",[a("td",[t._v("width")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("栏位在lookup Table 默认显示多宽")])]),t._v(" "),a("tr",[a("td",[t._v("sortable")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("用于标记对应的栏位可以使用排序")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("format中sort标签的介绍；sort标签用于配置默认的排序；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("col")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填栏位的名称")])]),t._v(" "),a("tr",[a("td",[t._v("ascending")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("如果设置为true；将会使用由大到小排序")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("namecard标签介绍：请查看资料名片(namecard)开发")])]),t._v(" "),a("blockquote",[a("p",[t._v("handler标签介绍；handler标签用于配置lookup参数StParameter的init方法；init方法在导入数据对lookup栏位进行search检查前运行，和页面lookup栏位在查询前运行")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填一个class的路径；class里面的方法必须要有@InitStSearchParam注释的")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("stSearchInitHandler标签介绍；stSearchInitHandler标签用于配置初始化stSearch的class；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("stSearchName")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填一个stSearch的名称")])]),t._v(" "),a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填一个继承了StSearchInitHandlerAdapter的类的路径")])])])]),t._v(" "),a("p",[t._v("**注：**通过配置stInfo和stSearch，就可以使用search查询；")]),t._v(" "),a("blockquote",[a("p",[t._v("配置xml ：stInfo")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stInfo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("simpleUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("share.user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("table")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stInfo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("share.employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("table")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("relation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("col")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("createUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tarSt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("simpleUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tarCol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("relation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("col")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("lastModifyUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tarSt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("simpleUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tarCol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("stSearch")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stSearch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcSt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("maxLevel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("#employee#.code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("accessModule")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asyncGetCount")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bindCond")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("leftField")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("operator")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("!="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rightField")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("format")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("core.defFormat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("col")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("col")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("col")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("col")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("namecard")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("imgCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("photoCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("290"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("namecard")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stSearch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h4",{attrs:{id:"影响search过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影响search过程"}},[t._v("#")]),t._v(" 影响Search过程")]),t._v(" "),a("p",[t._v("**注:**在search过程中，开发者可以通过配置slave，handler去干预search；")]),t._v(" "),a("p",[t._v("1 配置slave类；需要继承SearchSlaveAdapter；然后通过beforeDatalookup和afterDatalookup两个方法干预search过程；beforeDatalookup通过添加条件，可以影响查询结果；afterDatalookup可以直接对查询结果进行修改，并返回希望得到的结果；")]),t._v(" "),a("p",[t._v("2 handler类：在stSearch.xml配置的handler标签；处理方法在导入数据对lookup栏位进行search检查前运行，和在页面lookup栏位查询前运行；")]),t._v(" "),a("p",[t._v("通过例子代码可以看到；handler里面的处理方法需要添加注释@InitStSearchParam；然后方法必须是static的，并且参数也是固定的(StParameter param, SqlEntity entity, String tableName, String colName, int row) ；")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.share.modulestsearch.InitStParam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InitStParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@InitStSearchParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stSearch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initDeptSupDeptParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StParameter")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v(" entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" tableName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" colName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tableName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"supDept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("colName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("3 initHandler类：")]),t._v(" "),a("p",[t._v("在stSearch.xml添加标签stSearchInitHandler；可以在让3PD对系统已有的stSearch进行额外的初始化处理；")]),t._v(" "),a("p",[t._v("handler类需要继承StSearchInitHandlerAdapter；")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stSearchInitHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("stSearchName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.share.modulestsearch.EmpStSearchHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmpStSearchHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StSearchInitHandlerAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initStSearch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StSearchInfo")]),t._v(" stSearchInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stSearchInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("在stInfo.xml添加标签handler；可以在让3PD对系统已有的stInfo进行额外的初始化处理；")]),t._v(" "),a("p",[t._v("handler类需要继承StInfoHandlerAdapter；")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("stInfoName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.share.modulestsearch.EmpStInfoHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmpStInfoHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StInfoHandlerAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initStInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StInfo")]),t._v(" stInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h4",{attrs:{id:"自定义的search"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义的search"}},[t._v("#")]),t._v(" 自定义的Search")]),t._v(" "),a("p",[t._v("方案1：重定义"),a("code",[t._v("searchEJB")])]),t._v(" "),a("p",[t._v("**注:**如果系统默认拼接sql功能不能满足查询的需要，可以重定义SearchEJB；")]),t._v(" "),a("p",[t._v("限制：ejb需要继承"),a("code",[t._v("GenSearchSqlAdapter")]),t._v("；")]),t._v(" "),a("p",[t._v('示例：在stSearch标签的ejb写上对应EJB的名字；ejb ="GenEmptySqlEJB"；然后继承'),a("code",[t._v("GenSearchSqlAdapter")]),t._v("类即可；返回的"),a("code",[t._v("SearchSqlInfo")]),t._v("填好查询数据的sql：searchSql和查询总数的sql：countSql；")]),t._v(" "),a("blockquote",[a("p",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Stateless")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Local")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenSearchSql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenEmptySqlEJB")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenSearchSqlAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSqlInfo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLookupSql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StSearchInfo")]),t._v(" myInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StParameter")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSqlInfo")]),t._v(" emptyData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSqlInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\temptyData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSearchSql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\temptyData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCountSql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" emptyData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("方案2：重定义searchEJB + slave")]),t._v(" "),a("p",[t._v("**注:**如果一个stSearch的数据不需要从数据库查询出来，可以使用重定义SearchEJB + 使用slave生成数据；")]),t._v(" "),a("p",[t._v("限制：ejb需要继承"),a("code",[t._v("GenSearchSqlAdapter")]),t._v("，slave需要继承"),a("code",[t._v("SearchSlaveAdapter")])]),t._v(" "),a("p",[t._v('示例：在stSearch标签的ejb写上对应EJB的名字；ejb ="GenEmptySqlEJB" slaveEjb="PatternInfoSlave"；')]),t._v(" "),a("p",[t._v("java代码")]),t._v(" "),a("p",[a("code",[t._v("GenEmptySqlEJB")]),t._v(" 请参考上面的"),a("code",[t._v("GenEmptySqlEJB")]),t._v("例子")]),t._v(" "),a("p",[a("code",[t._v("PatternInfoSlave")]),t._v("：在slave生成数据，只需要"),a("em",[t._v("override")]),t._v(" "),a("code",[t._v("afterDatalookup")]),t._v(" 方法即可；")]),t._v(" "),a("blockquote",[a("p",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Stateless")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Local")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSlave")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PatternInfoSlave")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSlaveAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SuppressWarnings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unchecked"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterDatalookup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchResult")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StParameter")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTable")]),t._v(" sqlTable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StLookupLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEmptyLookupTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addField")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTableField")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do some search coding")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" startRow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStartRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStartRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" endRow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEndRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEndRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" startRow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" endRow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawPattern")]),t._v(" pattern "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawGlobal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" rec "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addRow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"st_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"st_code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pattern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"st_desc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pattern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pattern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tsqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pattern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\tresult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setResultTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sqlTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tresult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTotalRows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("方案3：自己编写组件")]),t._v(" "),a("p",[t._v("**注:**系统现有的lookup组件无法满足用户的需求，那么可以自行编写组件，不再使用stSearch/stInfo的配置了；")]),t._v(" "),a("p",[t._v("限制：页面和查询的所有东西都需要自行处理；")]),t._v(" "),a("h2",{attrs:{id:"权限控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")]),t._v(" "),a("h3",{attrs:{id:"影响登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影响登录"}},[t._v("#")]),t._v(" 影响登录")]),t._v(" "),a("ul",[a("li",[t._v("loginHandler")])]),t._v(" "),a("p",[t._v("用户登录的过程，除了密码可以做限制外；开发者可以通过app.xml配置loginHandler标签进行登录干预；使用loginHandler的checkLoginInfoBeforeLogin方法可以在用户登录前干预用户登录；使用afterLogin方法可以在用户登录后做一些特殊处理；")]),t._v(" "),a("blockquote",[a("p",[t._v("loginHandler标签参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("class的完成路径，class需要继承LoginHandlerAdapter")])])])]),t._v(" "),a("ul",[a("li",[t._v("wsSkipAccess")])]),t._v(" "),a("p",[t._v("M18系统对于一些web service的请求，一般都会检查web service是否有权限请求数据的；会判断请求里面的参数userKey或者Authorization是否有权限；使用app.xml配置wsSkipAccess标签使一些web service的请求跳过这些权限的检查")]),t._v(" "),a("blockquote",[a("p",[t._v("wsSkipAccess标签参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("pathNames")]),t._v(" "),a("td",[t._v('如果请求的web service包含这里定义的路径，可以跳过检查；如果是多个路径，可以使用分号“;”隔开；例子："/cawLogin/checkLoginUser;/image/getImage“')])])])]),t._v(" "),a("ul",[a("li",[t._v("webSkipAccess")])]),t._v(" "),a("p",[t._v("M18系统对于一些不是web service的请求也一样会检查session的登录状态；使用app.xml配置webSkipAccess标签会使一些请求跳过检查")]),t._v(" "),a("blockquote",[a("p",[t._v("webSkipAccess标签参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("pathNames")]),t._v(" "),a("td",[t._v('如果请求路径包含这里定义的路径，可以跳过检查；如果是多个路径，可以使用分号“;”隔开；例子："/CaptchaServlet;/wfAction”')])])])]),t._v(" "),a("h3",{attrs:{id:"模块权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块权限"}},[t._v("#")]),t._v(" 模块权限")]),t._v(" "),a("p",[t._v("M18系统通过模块和菜单配置当前模块有什么权限，如何配置请查看"),a("a",{attrs:{href:"#navmenu.xml"}},[t._v("navmenu.xml")]),t._v(";")]),t._v(" "),a("h3",{attrs:{id:"单据权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单据权限"}},[t._v("#")]),t._v(" 单据权限")]),t._v(" "),a("p",[t._v("模块如果启用了权限控制，在参看单据的时候会进行单据的权限查询；如何启用请看"),a("a",{attrs:{href:"#module.xml"}},[t._v("module.xml")]),t._v(";")]),t._v(" "),a("p",[t._v("单据的权限查询sql放在模块对应的StSearchInfo.java 里面；")]),t._v(" "),a("blockquote",[a("p",[t._v("权限查询sql介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("accessStr_noBe")]),t._v(" "),a("td",[t._v("如果模块没有使用Be，将会使用这个sql判断单据的权限")])]),t._v(" "),a("tr",[a("td",[t._v("accessStr_oneBe")]),t._v(" "),a("td",[t._v("如果模块使用了Be；查单个Be里面的数据，使用这个sql查询")])]),t._v(" "),a("tr",[a("td",[t._v("accessStr_manyBe")]),t._v(" "),a("td",[t._v("如果模块使用了Be；查多个Be里面的数据，使用这个sql查询")])]),t._v(" "),a("tr",[a("td",[t._v("accessStr_mir")]),t._v(" "),a("td",[t._v("判断已删除单据的权限，使用这个sql查询")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("权限sql生成的过程")])]),t._v(" "),a("p",[t._v("每一次stSearch初始化的时候，都会运行StSearchInfo的initAccess方法初始化生成这些查询sql；这里会根据"),a("strong",[t._v("访问控制")]),t._v("模块的设置，先拼当前模块的access表（白名单和黑名单表）的sql；然后模块里面所有表（系统表除外）的lookup field（如果要忽略，请在datadict标志为skipAccess=“true”）会判断是否要检查access权限，如果要就将sql拼起来；")]),t._v(" "),a("h4",{attrs:{id:"如何影响权限数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何影响权限数据"}},[t._v("#")]),t._v(" 如何影响权限数据")]),t._v(" "),a("p",[a("strong",[t._v("访问控制")]),t._v("模块有自动计算访问控制的功能；在模块单据保存后，会根据自动计算访问控制设置的条件计算出单据的权限数据，然后保存起来；")]),t._v(" "),a("p",[t._v("**注：**然而，开发者可以通过entityHandler的autoCalcAccess方法干预这些自动计算访问控制的结果；")]),t._v(" "),a("blockquote",[a("p",[t._v("entityHandler的参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("填模块的名称，如果为空，则这个entityHandler作用于所有模块")])]),t._v(" "),a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("class的完整路径，class需要继承EntityHandlerAdapter")])])])]),t._v(" "),a("h4",{attrs:{id:"如何替换search的权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何替换search的权限"}},[t._v("#")]),t._v(" 如何替换Search的权限")]),t._v(" "),a("p",[t._v("开发者可以通过"),a("a",{attrs:{href:"#%E5%BD%B1%E5%93%8DSearch%E8%BF%87%E7%A8%8B"}},[t._v("影响Search过程")]),t._v(" 的第3点initHandler类实现；")]),t._v(" "),a("p",[t._v("在stSearch的InitHandler中修改权限查询sql；就可以替换Search的权限了；")]),t._v(" "),a("h3",{attrs:{id:"字段权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字段权限"}},[t._v("#")]),t._v(" 字段权限")]),t._v(" "),a("p",[t._v("系统表不能使用字段权限，还有所有表的“code”，“desc”，“beId”；buildin栏位也不能设置字段权限；")]),t._v(" "),a("p",[t._v("开发者可以通过"),a("a",{attrs:{href:"#module.xml"}},[t._v("module.xml")]),t._v("的table标签配置参数fieldRightSetting=‘false’，使模块的这个table下的所有字段不能使用字段权限控制；")]),t._v(" "),a("p",[t._v("**注：**可以通过RightLib的以下方法获取字段权限；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FieldRightDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFieldRight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取当前用户的字段权限，Set<String> tables传入需要获取字段权限的table name ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FieldRightDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFieldRight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//传入user id 获取对应用户的字段权限，Set<String> tables传入需要获取字段权限的table name ")]),t._v("\n")])])]),a("h2",{attrs:{id:"常用功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用功能"}},[t._v("#")]),t._v(" 常用功能")]),t._v(" "),a("h3",{attrs:{id:"关于配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于配置文件"}},[t._v("#")]),t._v(" 关于配置文件")]),t._v(" "),a("ul",[a("li",[t._v("cawserver.properties")])]),t._v(" "),a("p",[t._v("cawserver.properties放在jboss的config文件夹里面；用于配置当前服务器的初始化参数；M18系统启动后会读取这些配置，使用配置的参数工作；")]),t._v(" "),a("blockquote",[a("p",[t._v("cawserver.properties 参数介绍")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("#jboss server的识别码 在集群环境下，必须要设置为不一样\ncaw.jboss.id=cl\n\n#jboss server属于哪一个群，为空时不会执行一些集群的事件\ncaw.jboss.cluster=abc\n\n#有部分工作在服务器启动的时候需要运行，仅仅main.server为true的会执行。\n#在集群环境 请确保只有一部server为true\ncaw.main.server=true\n\n\n#注意:所有的路径不要使用\\\\结尾,由AP在代码自己处理\n#两个path必须要指向用一个文件夹。dbDoc表示db服务器可以访问的路径。appDoc表示Jboss可以访问的路径。（对应路径用于文件传输，请确保访问速度OK）\n#当两个服务器在一起的时候 请不要使用网络路径。注意 请一定要使用\\\\来作为路径分隔符\n#share path in window(192.168.10.118)\ncaw.fileData.dbDoc.path=D:\\\\CAWShareAP\ncaw.fileData.appDoc.path=\\\\\\\\192.168.10.118\\\\CAWShareAP\n\n#这个指向一个jboss的临时路径，仅仅需要jboss端可以访问的本地路径即可（如果本地址为空 将使用 caw.fileData.dbDoc.path 如果不是一部机器的情况下，这个的操作将影响速度）\ncaw.file.app.path=D:\\\\temp\\\\caw4\n\n#请调整为对外的发布路径；一般是发邮件到客户，在邮件上有链接可以操作到M18系统，所以这里应该填一个外部访问的路径；\ncaw.web.url=http://www.abc.com/jsf/\n\n#服务器内部资源访问路径\n#本配置需要修改\ncaw.internal.url=@web_url\n\n#系统将通过这个路径访问ws，推荐使用本机，如果在集群分工的情况下，可以合理分配服务器的使用，不过仍旧推荐使用本机。\n#本配置不应该修改\ncaw.ws.url=@wsdl_url/jsf/rfws/\n\n#共享文件夹（caw.file.app.path，caw.fileData.appDoc.path）文件的有效时间，根据最后修改时间算起，有效期单位是天；当这个数据没有填，或者填的不是数字，默认为30天，\ncaw.file.life.effect = 30\n\n#M18系统使用的数据库ip地址\ncaw.database.ip=192.168.10.117\n\n#M18系统使用的数据库端口\ncaw.database.port=3306\n\n#M18系统使用的数据库名字\ncaw.database.dbname=nh7\n\n#M18系统使用的数据库用户名\ncaw.database.user=nh7\n\n#M18系统使用的数据库密码\ncaw.database.password=nh7@7jiaj\n\n\n#AccessToken为空的时候,是不允许使用为登入模式访问系统。使用AccessToken访问，默认为admin用户。在开发时，推荐设置为简单的 例如ap，在正式使用的情况下，推荐设置为复杂 or 空\ncaw.ws.glAccessToken=iz\n\n#本机可以跑定时任务，如果不为1 则不跑；\ncaw.sch.quartz = 1\n\n#当caw.sch.quartz 不为1时，在本机发布任务，将会通过这个路径访问ws ，在目标机发布任务；目标机必须可以跑定时任务；\ncaw.sch.targetUrl = http://127.0.0.1:8080/jsf/rfws/\n#target 机的caw.ws.glAccessToken\ncaw.sch.targetAccessToken=iz\n")])])]),a("ul",[a("li",[t._v("reset.caw")])]),t._v(" "),a("p",[t._v("reset.caw放在jboss的config文件夹里面；用于开发环境，开发者可以在这里配置一些差数用于更方便开发；这里可以配制cawserver.properties 里面的参数，这里的配置会覆盖cawserver.properties 的配置；")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("#AP debug 模式,M18系统有一些功能是在apDebug模式下才能用的；这里设置为1启用apDebug模式\ncaw.ap.debug = 1\n#在启动的时候 强制skip同步数据库结构（注意：可能会因为缺少表or字段导致部分功能不能运行）\ncaw.ap.skip.sycnDB=1\n\n#下面几个参数，是用于将模块Check运行的信息打印在log中；module是注册哪些模块需要打印check信息，模块名称用“；”隔开，create，save，read，delete设置为1时，表示运行相应操作的checker时打印check信息；\ncaw.ap.debug.checker.create=0\ncaw.ap.debug.checker.save=0\ncaw.ap.debug.checker.read=0\ncaw.ap.debug.checker.delete=0\ncaw.ap.debug.checker.module=\n\n\n#用于锁定job,可以锁定多个job，使用；隔开，被锁定的job只能被锁定job的服务器运行\ncaw.ap.sch.debugJobName=\n#用于锁定jobGroup,可以锁定多个jobGroup，使用；隔开，被锁定的job只能被锁定job的服务器运行\ncaw.ap.sch.debugJobGroup=\n#锁定job多久，单位是小时\ncaw.ap.sch.debugTime=\n\n#如果设置为1跳过启动上传report format\ncaw.report.skipUploadFormat = 0\n\n")])])]),a("h3",{attrs:{id:"表结构信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表结构信息"}},[t._v("#")]),t._v(" 表结构信息")]),t._v(" "),a("p",[t._v("对于M18的开发者而言，了解原本系统模块/功能的后台结构对于功能的开发是必须的资料。我们这里介绍如何在系统中找到表结构信息 以及如何使用api查找对应的表结构信息。")]),t._v(" "),a("p",[t._v("在系统模块"),a("code",[t._v("数据字典")]),t._v("中可以找到对应菜单模块对应的表结构信息。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(653),alt:"mssst"}})]),t._v(" "),a("p",[t._v("在代码里面，已知table名字，获取信息")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdTable")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawGlobal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDdTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"employee"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("遍历datadict信息")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ehcache")]),t._v(" cache "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ddCache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SuppressWarnings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rawtypes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),t._v(" keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdTable")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add you code here")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"导入与导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入与导出"}},[t._v("#")]),t._v(" 导入与导出")]),t._v(" "),a("p",[t._v("M18系统用户批量数据导入和导出的功能，用于数据初始化 临时备份 以及迁移准备等使用。")]),t._v(" "),a("ul",[a("li",[t._v("导出\nM18系统支持将模块数据导出到excel文件，请查看数据导出模块；\n如果开发者需要控制导出到excel文件的数据，可以在"),a("a",{attrs:{href:"#module.xml"}},[t._v("module.xml")]),t._v("配置对应模块的"),a("code",[t._v("IExcelGener")]),t._v("， excelGener=“class的完整路径” ， class需要实现"),a("code",[t._v("IExcelGener")]),t._v("接口；使用"),a("code",[t._v("exportData")]),t._v("方法用于导出数据包括excel文件的格式；"),a("code",[t._v("appendMoreData")]),t._v("方法用于拼接导出数据；")])]),t._v(" "),a("p",[t._v("**注：**M18系统默认是用ExcelGener实现IExcelGener接口；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IExcelGener")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\\\\生成不含数据用于导入数据准备的模板"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Excel")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Workbook")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" dataExportConfigJson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\\\\将"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v("的数据生成"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Excel")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Workbook")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exportData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataExportConfig")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v(" entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("导入\nM18系统支持模块数据从excel文件中导入，请查看数据导入模块；\n如果开发者希望自己控制excel导入的数据处理，可以在"),a("a",{attrs:{href:"#module.xml"}},[t._v("module.xml")]),t._v("配置对应模块的IExcelGener和dataImportConveter；excelGener=“class的完整路径” ，class需要实现IExcelGener接口；dataImportConveter=“class的完整路径” ，class需要继承ImportConverterAdapter类；")])]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("IExcelGener")]),t._v("的"),a("code",[t._v("createTemplate")]),t._v("方法创建导入数据的excel模板；使用"),a("code",[t._v("dataImportConveter")]),t._v("的convert方法将excel的数据转换成M18系统的SqlEntity结构；使用"),a("code",[t._v("getImportResultWriter")]),t._v("方法得到"),a("code",[t._v("ImportResultWriter")]),t._v("，用于将错误信息写到excel文件中；")]),t._v(" "),a("p",[t._v("**注：**M18系统默认使用"),a("code",[t._v("EntityImportConverter")]),t._v("类转换导入的excel数据；使用ExcelImportResultWriter类将错误信息写到excel文件中；")]),t._v(" "),a("p",[t._v("**注：**如果用户不重新定义"),a("code",[t._v("IExcelGener")]),t._v("和"),a("code",[t._v("dataImportConveter")]),t._v("的情况下，想干预导入功能，还有一个办法；")]),t._v(" "),a("p",[t._v("在app.xml中定义标签entityHandler ，")]),t._v(" "),a("blockquote",[a("p",[t._v("entityHandler的参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("填模块的名称，如果为空，则这个entityHandler作用于所有模块")])]),t._v(" "),a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("class的完整路径，class需要继承EntityHandlerAdapter")])])])]),t._v(" "),a("p",[t._v("下面entityHandler的这些方法都与导入有关")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImportSkipColumn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdColumn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImportExtraColumn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleExtraBeforeAllColumn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateExtraColumnValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v(" entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sqlTableRow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" tableName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdColumn")]),t._v(" ddColumn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" cellValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImportSkipTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("modifyColumnsRemark")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" remark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" tableName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DdColumn")]),t._v(" col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataExportConfig")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" remark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("entityHandler关于导入的方法介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("getImportSkipColumn")]),t._v(" "),a("td",[t._v("返回"),a("code",[t._v("Map<String, Set<String>>")]),t._v("；map的key是table name，set是field name的set；用于表示当前模块哪个table下的哪些field将不能使用导入功能")])]),t._v(" "),a("tr",[a("td",[t._v("getImportExtraColumn")]),t._v(" "),a("td",[t._v("返回"),a("code",[t._v("Map<String, Set<String>>")]),t._v("；map的key是table name，list是DdColumn的List；用于表示当前模块哪个table需要加多一些field用与导入，这些field将会表现在导入模块界面栏位映射的组件上和显示在导入的模板excel上")])]),t._v(" "),a("tr",[a("td",[t._v("handleExtraBeforeAllColumn")]),t._v(" "),a("td",[t._v("返回一个List，表示哪些额外加入的栏位，需要在所有栏位处理之前处理；")])]),t._v(" "),a("tr",[a("td",[t._v("updateExtraColumnValue")]),t._v(" "),a("td",[t._v("用于处理额外加入的栏位值")])]),t._v(" "),a("tr",[a("td",[t._v("getImportSkipTable")]),t._v(" "),a("td",[t._v("返回一个set表示当前模块哪些table将不能使用导入功能")])]),t._v(" "),a("tr",[a("td",[t._v("modifyColumnsRemark")]),t._v(" "),a("td",[t._v("用于修改模板excel里面对模块栏位的说明")])])])]),t._v(" "),a("h3",{attrs:{id:"文档打印"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档打印"}},[t._v("#")]),t._v(" 文档打印")]),t._v(" "),a("p",[t._v("M18系统支持使用ireport进行文件打印的处理。系统通过jsper将对应的数据和格式生成pdf，并通过浏览器的查看PDF进行文件的查看并提供打印功能。")]),t._v(" "),a("blockquote",[a("p",[t._v("在开始打印的任何处理之前，请确保你对于ireport有一定的认识。")])]),t._v(" "),a("p",[t._v("请在电脑中安装ireport的最新版本，并将M18中的com.jaspersoft.studio.data_6.2.0.final.jar替换到安装目录中。"),a("strong",[t._v("注")]),t._v(":Ireport编辑软件是一个Eclipse.")]),t._v(" "),a("p",[t._v("请将caw share的jar加入到"),a("strong",[t._v("JaspersoftStudio")]),t._v("的项目中，以便系统在处理M18函数的时候可以给出正确提示。")]),t._v(" "),a("ul",[a("li",[t._v("编写 docReport.xml")])]),t._v(" "),a("blockquote",[a("p",[t._v("report属性说明")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于唯一标示一个report。对应的code推荐以@开头")])]),t._v(" "),a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("module.xml中的code，标示当前打印属于那个模块。允许设置多个模块，使用分号进行分割")])]),t._v(" "),a("tr",[a("td",[t._v("providerCode")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("provider的class名字, 用户字段获取 数据获取 以及数据分析处理等。")])]),t._v(" "),a("tr",[a("td",[t._v("reportDto")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("dto的class名字，用于处理打印参数。")])]),t._v(" "),a("tr",[a("td",[t._v("reportDtoSettingSrc")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("用于指定设置页面的位置，一般对应的reoportdto的信息可以在这个页面进行设置。")])]),t._v(" "),a("tr",[a("td",[t._v("providerMess")]),t._v(" "),a("td",[t._v("字符")]),t._v(" "),a("td",[t._v("provider对应的MessCode")])]),t._v(" "),a("tr",[a("td",[t._v("providerOrder")]),t._v(" "),a("td",[t._v("整数")]),t._v(" "),a("td",[t._v("在一个模块有多个打印设置的时候有效，用于控制打印的次序")])]),t._v(" "),a("tr",[a("td",[t._v("apDebug")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("当设置为true的时候，仅仅debug模式可见")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("format的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("format的编号，对应的编号将在系统启动的时候生成一天format的记录，默认推荐编号和report的编号一致")])]),t._v(" "),a("tr",[a("td",[t._v("description")]),t._v(" "),a("td",[t._v("format的说明字段")])]),t._v(" "),a("tr",[a("td",[t._v("remark")]),t._v(" "),a("td",[t._v("format的详细说明字段")])]),t._v(" "),a("tr",[a("td",[t._v("packageName")]),t._v(" "),a("td",[t._v("用于告知系统Jrxml存在的路径（代码路径）")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("jrxml的属性描述")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("jrxml的名字 推荐仅仅有字母组成 一般来说应该以Jrxml结尾")])]),t._v(" "),a("tr",[a("td",[t._v("main")]),t._v(" "),a("td",[t._v("标记那个jrxml为主文件，在一个格式中有且仅有一个jrxml为主文件")])])])]),t._v(" "),a("p",[t._v("resetData的属性描述")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("prCode")]),t._v(" "),a("td",[t._v("provider的class名字, 作用于同一个provider的所有xml设定")])]),t._v(" "),a("tr",[a("td",[t._v("resetClass")]),t._v(" "),a("td",[t._v("class类名，实现"),a("code",[t._v("CawJrPrintRestData")]),t._v("。用于修改已经创建的打印格式的数据获取过程，也可以给原本的格式添加额外的数据")])])])]),t._v(" "),a("p",[t._v("reportHandler的属性描述")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("reportCode")]),t._v(" "),a("td",[t._v("report的code栏位")])]),t._v(" "),a("tr",[a("td",[t._v("handlerClass")]),t._v(" "),a("td",[t._v("class类名，实现"),a("code",[t._v("ReportHandler")]),t._v("。允许开发者将系统启动过程中初始化的jrxml格式进行进一步编辑。一般用于特定功能的隐藏。")])])])]),t._v(" "),a("p",[t._v("reportShowHandler的属性描述")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("prCode")]),t._v(" "),a("td",[t._v("provider的class名字, 作用于同一个provider的所有xml设定")])]),t._v(" "),a("tr",[a("td",[t._v("handlerClass")]),t._v(" "),a("td",[t._v("class类名，实现"),a("code",[t._v("ReportShowHandler")]),t._v("。使得特定的打印功能可以控制pdf生成后是否直接下载or进行其他操作。")])])])]),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("blockquote",[a("p",[t._v("示例:")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("docReport")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("report")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@bpm_emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  \n\t\t\t"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("reportDto")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.share.data.ireport.emp.EmpJrDto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("reportDtoSettingSrc")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/view/dialog/empPrintSetting.xhtml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("providerCode")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.ireport.provider.emp.EmployeeProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("providerOrder")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("providerMess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jr.emp_provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("apDebug")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t        \n\t\t "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("format")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@bpm_emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Print"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("remark")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Print Employee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("packageName")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.share.data.ireport.resource.emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jrxml")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("emp.jrxml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jrxml")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jrxml")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("empPic.jrxml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jrxml")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("    \n\t        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jrxml")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("empUser.jrxml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jrxml")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("    \n\t     "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("report")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("docReport")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("​")]),t._v(" "),a("ul",[a("li",[t._v("添加必要的Class以及Sql")])]),t._v(" "),a("blockquote",[a("p",[t._v("添加Dto class")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmpJrDto")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModuleReportDto")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" prtPic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultTitle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Testing Ireport!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPrtPic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" prtPic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrtPic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" prtPic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prtPic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prtPic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("我们可以看到这仅仅一个简单的pojo 类，我们要求模块的dto均需要使用ModuleReportDto。")]),t._v(" "),a("blockquote",[a("p",[t._v("添加Provider")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmployeeProvider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModuleProvider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initReportStru")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawReportDataSet")]),t._v(" reData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set table alias name")]),t._v("\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlias")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"employee"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlias")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DEPT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlias")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEEPIC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"employeepic"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlias")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PICUSER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("adjustData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawReportDataSet")]),t._v(" reData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRelationTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dept"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DEPT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRelationTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEEPIC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PICUSER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assignSubReport")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EMPLOYEEPIC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawReportDataSet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("genIdsData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{Call prtEmployee(\'"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReportDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMainIdString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\')}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacQuery")]),t._v(" query "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tquery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawReportDataSet")]),t._v(" ds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillAndAdjustData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("sql例子")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("procedure")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exists")]),t._v(" prtEmployee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DELIMITER")]),t._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" prtEmployee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" idStr "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("temporary")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exists")]),t._v(" prtemptempTable \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("  \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" employee a\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" find_in_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" idStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#create index")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" I_Employee_dept  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" prtemptempTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#main query 0")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" prtemptempTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#dept 1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dept a \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exists")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" prtemptempTable b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dept"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" prtemptempTable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DELIMITER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v("：Sql部分推荐使用select *以区别读取出尽量多的栏位。")]),t._v(" "),a("ul",[a("li",[t._v("启动Jboss(使用在JaspersoftStudio可以获取数据源)，编写JrXml")])]),t._v(" "),a("p",[t._v("Jrxml推荐复制一个已有的进行修改，不推荐从零开始。除非你熟练掌握Ireport的相关技巧。")]),t._v(" "),a("p",[t._v("创建一个数据源如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:s(654),alt:"mssst"}})]),t._v(" "),a("p",[a("img",{attrs:{src:s(655),alt:"mssst"}})]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v("：上图的URL为：http://127.0.0.1:8080/jsf/rfws/cawProvider/fields/com.multiable.ireport.provider.emp.EmployeeProvider?accessToken=iz&lang=zh_CN")]),t._v(" "),a("p",[t._v("accessToken 使用cawserver.properties 中的caw.ws.glAccessToken")]),t._v(" "),a("p",[t._v("provider是上面xml中定义的名字")]),t._v(" "),a("p",[t._v("lang 返回的field 说明mess 的语言（不传输的时候, 取GlobalOption的lang）")]),t._v(" "),a("p",[t._v("skipLang 如果为true，返回的field 不会加上mess说明(可不传输,默认为false)")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v("：不限制使用(cawProvider/fields)这个ws，如果有需要，可以仿照CawJrProviderEJB自行处理")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v("：前面系统jboss的原因是为了可以使用这个URL")]),t._v(" "),a("p",[t._v("创建这个新增一个Jrxml，使用read Fields即可以获取到当前")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("将jrxml放入代码,进一步编写xml 参照1.0只不过的说明和示例")])]),t._v(" "),a("li",[a("p",[t._v("重启Jboss进行测试。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(656),alt:"mssst"}})])])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":目前系统在启动的时候将jrxml编译放到数据库里面，由于这个会受到数据量大小的影响启动时间，之后这部分将进行调整。")]),t._v(" "),a("h3",{attrs:{id:"自定义模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义模块"}},[t._v("#")]),t._v(" 自定义模块")]),t._v(" "),a("p",[t._v("自定义模块的模块模板，开发者可以自定义模块模板，通过app.xml的template标签中module标签配置；")]),t._v(" "),a("blockquote",[a("p",[t._v("module标签参数")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("模板的编号")])]),t._v(" "),a("tr",[a("td",[t._v("description")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("模板的messCode")])]),t._v(" "),a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('对应模板的模块名，对应的模块名在module.xml里面需要配置参数template="true"')])]),t._v(" "),a("tr",[a("td",[t._v("helper")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("填helper类的完成路径，需要继承CawUeHelper")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("子标签<page>")])]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("使用当前模板生成的自定义模块，模块的初始页面")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("子标签<setting>")])]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("当自定义模块选择当前设置的模板，这个标签配置的页面将会在自定义模块里面的模板选项中显示")])])])]),t._v(" "),a("p",[t._v("helper类需要继承CawUeHelper")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FmTemplateHelper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawUeHelper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" serialVersionUID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5554948686647491057L")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initModuleInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlTable")]),t._v(" ue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" jsonStr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"backEndInfo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FmtOption")]),t._v(" option "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FmtOption")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUseAttach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isSupportAttachment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUseAttach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFmShare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"初始化数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据"}},[t._v("#")]),t._v(" 初始化数据")]),t._v(" "),a("p",[t._v("M18系统的数据库信息是通过代码自动生成的。所以开发者在数据库无法留存任何的预设数据。")]),t._v(" "),a("p",[t._v("在app.xml定义一个entityDataInit。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("entityDataInit的名字")])]),t._v(" "),a("tr",[a("td",[t._v("initDataCreator")]),t._v(" "),a("td",[t._v("class类名，实现"),a("code",[t._v("InitDataCreator")]),t._v(" 在对应的init方法中编写代码生成数据。")])])])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":这个方法每次Wildfly启动的时候都会运行，请自行绑定需要初始化的数据是否已经存在数据库中。")]),t._v(" "),a("blockquote",[a("p",[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestDriverCreator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseDataCreator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasEntityData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Init test")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlEntity")]),t._v(" entity "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcDriverEntity")]),t._v(" accseeDriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcDriverEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJdbcType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Driver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net.test.jdbc.TestDriver"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGrammarType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GrammarType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UDF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIndepPw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWithDbName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\taccseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setConnStrTplt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:test://${[@D_FilePath]};memory=false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mergeToEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accseeDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"数据修复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据修复"}},[t._v("#")]),t._v(" 数据修复")]),t._v(" "),a("p",[t._v("在版本升级的过程中，系统有时候因为各种原因需要修正原本数据库中的数据。")]),t._v(" "),a("p",[t._v("在app.xml定义一个dataFix。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("class类名，需要实现"),a("code",[t._v("DataFix")]),t._v(". 在run方法中处理需要的数据修复。"),a("strong",[t._v("注")]),t._v(":这个同时也是唯一键，不要移动class位置")])]),t._v(" "),a("tr",[a("td",[t._v("ap")]),t._v(" "),a("td",[t._v("注明对应的datafix负责的ap")])]),t._v(" "),a("tr",[a("td",[t._v("desc")]),t._v(" "),a("td",[t._v("描述对应datafix修复的数据问题")])]),t._v(" "),a("tr",[a("td",[t._v("order")]),t._v(" "),a("td",[t._v("用于定义datafix的运行顺序")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("示例:")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dataFix")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.ejb.bean.cache.datafix.TestToFix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("desc")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fix test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dataFix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestToFix")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataFixAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" fixSql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"update testinfo set myIdType = 'text'; \"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawDs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fixSql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v(": 请尽量考虑可能存在的错误情况，避免数据修复没有正确运行。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":请尽量编写数据修正的检查代码，而且数据修复的代码仅仅会运行一次。")]),t._v(" "),a("blockquote",[a("p",[t._v("系统判定表"),a("code",[t._v("datafix")]),t._v("中的记录来判定对应的fix是否已经运行。")])]),t._v(" "),a("h3",{attrs:{id:"如何新增jar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何新增jar"}},[t._v("#")]),t._v(" 如何新增jar")]),t._v(" "),a("p",[t._v("为了确保在Wildfly在运行的时候可以获取到对应的第三方jar包，需要确保jar已经添加到Wildfly的运行环境中。")]),t._v(" "),a("p",[t._v("M18推荐使用module.xml(wildfly)的方式来进行处理。 M18推荐同时修改"),a("code",[t._v("MANIFEST.MF")]),t._v("以及"),a("code",[t._v("jboss-deployment-structure.xml")])]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":在编译工具中(例：Eclipse)代码无错误，仅仅说明你的编译环境中包含需要的jar。并不是能够确保运行环境中 对应的代码可以执行。\n"),a("strong",[t._v("注")]),t._v(":Wildfly有自己的classloader管理方式。")]),t._v(" "),a("p",[a("strong",[t._v("注")]),t._v(":由于在项目发布的时候，Wildfly会将ear下面的lib（或者war下面的lib）自动进行复制一份来进行运行。")]),t._v(" "),a("p",[t._v("如果多次发布(系统重启)，会生成很多空间占用。")]),t._v(" "),a("p",[t._v("具体请参考"),a("a",{attrs:{href:"https://docs.jboss.org/author/display/WFLY8/Class+Loading+in+WildFly",target:"_blank",rel:"noopener noreferrer"}},[t._v("Wildfly文档"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"定位启动错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定位启动错误"}},[t._v("#")]),t._v(" 定位启动错误")]),t._v(" "),a("p",[t._v("由于配置/jar/代码/系统环境等等原因，M18启动有时候会发生失败的情况。而启动后往往会发现很多不同的错误。请记得只理会第一个回答导致启动出错的Exception，并且修复这一个后重新启动看看。")]),t._v(" "),a("ul",[a("li",[t._v("千万不要从后往前找错误")]),t._v(" "),a("li",[t._v("不要尝试一次过解决log里面提示的所有错误")]),t._v(" "),a("li",[t._v("不要认定一定是代码上面的问题")]),t._v(" "),a("li",[t._v("如果发现无足够的信息，推荐"),a("code",[t._v("print")]),t._v(" log出来，就算是需要修改第三方的代码")]),t._v(" "),a("li",[t._v("若是在Eclipse里面，启动出错的时候推荐删除所有断点")])]),t._v(" "),a("h3",{attrs:{id:"定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定时任务"}},[t._v("#")]),t._v(" 定时任务")]),t._v(" "),a("h4",{attrs:{id:"创建定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建定时任务"}},[t._v("#")]),t._v(" 创建定时任务")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("需要创建一个job 类")]),t._v("：")]),t._v(" "),a("p",[t._v("job类需要继承CawQuartzJob，只需实现doExecute 方法即可；")])])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncJob")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawQuartzJob")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" JOBGROUP "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"caw.sync"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckMsg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doExecute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JobExecutionContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobDto")]),t._v(" dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do something\t")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[a("strong",[t._v("发布job")])]),t._v(" "),a("p",[t._v("先构建一个CawJobDto 的对象，使用方法CawJobLib.scheduleJob(dto)发布即可， CawJobDto 有一个三个参数的构造方法，第一个是jobGroup ，第二个是当前entity的id，第三个是自己创建的job的class；jobGroup+ id 必须构建出一个唯一的jobName， 还有一个必须要填的是TimeScheduleDto，这个是time组件的dto，使用页面去配置生成或者自己new一个出来都可以；jobMess可以的也可以填；CawJobDto 里面还有一个jsonData， 可以填一些job需要的参数，doExeccute 时在 dto可以获取到；")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobDto")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JOBGROUP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJsonData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeSchedule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeDto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJobMess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"syncJob"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("​")])]),t._v(" "),a("li",[a("p",[t._v("删除job")]),t._v(" "),a("p",[t._v("使用 CawJobLib 中的 deleteJob 删除即可")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobDto")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnlockUserJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JOBGROUP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntityId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnlockUserJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawJobLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("​")])])]),t._v(" "),a("h4",{attrs:{id:"关于集群下面的说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于集群下面的说明"}},[t._v("#")]),t._v(" 关于集群下面的说明")]),t._v(" "),a("p",[t._v("job被发布后，会把信息保存到cawjob表中；如果job过期了；会有定时任务将这些过期的job移除；")]),t._v(" "),a("p",[t._v("只有当服务器的cawserver.properties配置了caw.sch.quartz = 1；这台服务器才能运行M18的job；")]),t._v(" "),a("p",[t._v("如果开发者手动发布一个job在一台服务器，那么这个job只在这台服务器里跑，集群的其他服务器不会处理这个job；然后所有服务器每天每隔8小时会将本服务器运行job都移除，重新发布数库cawjob表中12个小时内会跑的job；这个时候集群服务器就会出现多台服务器抢一个job的情况，但是每一次都只会有一台服务器抢成功并运行这个job，其他服务器不运行；")]),t._v(" "),a("p",[t._v("**注：**当服务器的caw.sch.quartz = 0时，这台服务器不会运行job；但是可以通过caw.sch.targetUrl 和caw.sch.targetAccessToken配置将从这台服务器发布的job指派给固定的服务器运行；在目标服务器发布job；目标服务器必须可以运行job；")]),t._v(" "),a("blockquote",[a("p",[t._v("cawserver.properties配置")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("#本机可以跑定时任务，如果不为1 则不跑；\ncaw.sch.quartz = 1\n\n#当caw.sch.quartz 不为1时，在本机发布任务，将会通过这个路径访问ws ，在目标机发布任务；目标机必须可以跑定时任务；\ncaw.sch.targetUrl = http://127.0.0.1:8080/jsf/rfws/\n#target 机的caw.ws.glAccessToken\ncaw.sch.targetAccessToken=iz\n")])])]),a("h4",{attrs:{id:"如何测试定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何测试定时任务"}},[t._v("#")]),t._v(" 如何测试定时任务")]),t._v(" "),a("p",[t._v("如果在开发的过程中，想去debug一个job，但是可能其他人的服务器跟你用的是同一个的时候，就会出现抢运行job的情况；所有这个时候，可以使用开发者配置文件reset.caw里面的参数去锁定job只在本机运行；")]),t._v(" "),a("blockquote",[a("p",[t._v("reset.caw配置")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("#用于锁定job,可以锁定多个job，使用；隔开，被锁定的job只能被锁定job的服务器运行\ncaw.ap.sch.debugJobName=caw.sync.1\n#用于锁定jobGroup,可以锁定多个jobGroup，使用；隔开，被锁定的job只能被锁定job的服务器运行\ncaw.ap.sch.debugJobGroup=caw.sync\n#锁定job多久，单位是小时\ncaw.ap.sch.debugTime=5\n")])])]),a("blockquote",[a("p",[t._v("定时任务使用数据库表介绍\n创建定时任务\n| 表名         | 说明                |\n| ---------- | ----------------- |\n| cawjob     | 存放定时任务发布的信息       |\n| cawjoblog  | 存放定时任务运行过程的信息     |\n| cawjoblock | 存放定时任务被那台服务器锁住的信息 |\n关于集群下面的说明\n如何测试定时任务")])]),t._v(" "),a("h3",{attrs:{id:"文件流的处理方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件流的处理方式"}},[t._v("#")]),t._v(" 文件流的处理方式")]),t._v(" "),a("p",[t._v("在之前描述"),a("code",[t._v("datadict")]),t._v("属性的时候，你应该发现在对应的属性里面无法处理文件流类型的东西。")]),t._v(" "),a("p",[t._v("M18系统统一的文件流存储到"),a("code",[t._v("filedata")]),t._v("中。")]),t._v(" "),a("ul",[a("li",[t._v("同一个文件仅仅会对应"),a("code",[t._v("filedata")]),t._v("的一行记录，系统使用MD5+size来识别文件的唯一性")]),t._v(" "),a("li",[t._v("保存在"),a("code",[t._v("filedata")]),t._v("的文件不提供删除功能")]),t._v(" "),a("li",[t._v("为了避免用户遍历的方式读取出图片（图片存在不需要验证登陆的link），系统使用"),a("code",[t._v("imgcode")])])]),t._v(" "),a("blockquote",[a("p",[t._v("文件的操作")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCurdEao")]),t._v(" fileEao "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JNDILocator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookupEJB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCurdEao")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" byteArray "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\\\\需要保存的"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\\\\直接将内存的中的数据保存到db "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("仅仅合适处理小文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" fileId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fileEao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pdf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" byteArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"work.pdf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" filePath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\\\\需要保存的文件路径（服务器路径）\n\\\\使用文件将数据保存到"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DB")]),t._v("\nfileId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fileEao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pdf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"work.pdf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\\\\将已经保存的文件数据读取出来\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" filePath_read "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fileEao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFilePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\\\\如果你需要记录文件，那么将这个fileId保存起来即可\n")])])]),a("blockquote",[a("p",[t._v("图片的操作")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImageLocal")]),t._v(" imageEJB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JNDILocator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookupEJB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ImageEJB"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImageLocal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" inputStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\\\\需要处理的图片文件\n\n\\\\将图片保存 获取imgcode\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" imgcode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" imageEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uploadImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"imgName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inputStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\\\\通过key重新获取到图片文件\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),t._v(" img "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" imageEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\\\\第二个参数为ture的时候默认返回缩略图，推荐尽量使用获取缩略图\n\n\\\\如果你需要记录图片，那么将这个imgcode保存起来即可\n")])])]),a("h3",{attrs:{id:"集群cache同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群cache同步"}},[t._v("#")]),t._v(" 集群Cache同步")]),t._v(" "),a("p",[t._v("CawCache，主要是存放一些从配置读取的内容，和一些从数据库读取出来的不会频繁修改的数据(避免多次查询数据库)；现在系统中Datadict，Mess， 模块的SqlEntity等数据都是使用了CawCache存放数据.")]),t._v(" "),a("h4",{attrs:{id:"使用cawcache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用cawcache"}},[t._v("#")]),t._v(" 使用CawCache")]),t._v(" "),a("p",[t._v("开发者想要添加一种Cache，可以使用CawCache的方法添加；请查看CawCache的addSelfPopulatingCache方法")]),t._v(" "),a("p",[t._v("然后使用CawCache的putObject 或者remove方法，去操作cache中的数据；")]),t._v(" "),a("p",[t._v("通过CawCache 的getObject方法，可以拿到cache的数据")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一个参数是cache的名字，第二个参数是指cache最多有多少个，第三个参数是指cache没被使用多久后就会失效（单位是秒）；第4个参数如果为true，则读取这个cache的时候要复制一个object出来返回")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSelfPopulatingCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navMenu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBaseCacheSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavmenuEntryFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一个参数是已注册的cache名字；第二个参数是要放入到这个cache的缓存的key，需要是可序列化的key；第三个参数是要放入到这个cache的缓存内容")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cawcheName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一个参数是已注册的cache名字；第二个参数是这个cache里面缓存的key，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MenuItemConfig")]),t._v(" menuCfg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MenuItemConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("menuCache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" menukey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一个参数是已注册的cache名字；第二个参数是这个cache里面缓存的key，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userSettingCache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h4",{attrs:{id:"集群里面的注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群里面的注意事项"}},[t._v("#")]),t._v(" 集群里面的注意事项")]),t._v(" "),a("p",[t._v("在集群的情况下，由于数据的修改，缓存就有可能出现不同步的现象；")]),t._v(" "),a("p",[t._v("**注1：**使用cache的时候必须考虑好如何同步数据，不然将会出现无法预测的问题（不单单针对CawCache）")]),t._v(" "),a("p",[t._v("**注2：**并不是所有的缓存都需要同步")]),t._v(" "),a("p",[t._v("现在推荐使用以下的两种方式去同步缓存；")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("默认同步缓存方法")])]),t._v(" "),a("p",[t._v("推荐用法：cache的内容简单，只对CawCache做简单的put或delete;")]),t._v(" "),a("p",[t._v("请使用 CawClusterLib 的方法 callCawCacheClusterEvent")])])]),t._v(" "),a("p",[t._v("增加集群缓存")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterCacheDto")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterCacheDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UseInfoCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CACHE_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCacheMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menuCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCacheClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UseInfoCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callCawCacheClusterEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("p",[t._v("删除集群缓存")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterCacheDto")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterCacheDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UdfLogic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CACHE_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDeleteKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callCawCacheClusterEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("CawClusterCacheDto 介绍：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("需要同步的cache的名字")])]),t._v(" "),a("tr",[a("td",[t._v("cacheMap")]),t._v(" "),a("td",[t._v("Map<Serializable, Object>")]),t._v(" "),a("td",[t._v("这个map中缓存的值将会添加到集群的其他机器中，map存的是缓存的key-value 结构")])]),t._v(" "),a("tr",[a("td",[t._v("cacheClass")]),t._v(" "),a("td",[t._v("Class<?>")]),t._v(" "),a("td",[t._v("cacheMap中value的class类型")])]),t._v(" "),a("tr",[a("td",[t._v("deleteKeys")]),t._v(" "),a("td",[a("code",[t._v("Set<Serializable>")])]),t._v(" "),a("td",[t._v("集群的其他机器将会移除的缓存，set存的是缓存的key")])])])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("自定义同步缓存方法")])]),t._v(" "),a("p",[t._v("需要同步CawCache或者一些静态的Map，Collection等缓存，有些缓存可能不是简单的添加或删除，或者需要同时操作几种不同的缓存，那么就需要自定义class去处理了；")]),t._v(" "),a("p",[t._v("​")])])]),t._v(" "),a("p",[t._v("在app.xml中配置标签clusterListerner")]),t._v(" "),a("blockquote",[a("p",[t._v("clusterListerner标签参数介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("eventType")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("同步缓存的类型")])]),t._v(" "),a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("这里填class的完整路径；同步缓存的处理class，class 需要继承CawClusterListenerAdapter，并实现run方法")])])])]),t._v(" "),a("p",[a("strong",[t._v("使用自定义方法同步缓存")])]),t._v(" "),a("p",[t._v("在需要同步集群缓存的地方调用CawClusterLib 的callClusterEvent方法；然后其他集群的机器就会运行对应Listener的run方法了：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JSONObject")]),t._v(" jo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JSONObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tjo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cacheName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JsfCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tjo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cacheKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一个参数是xml配置的eventType；第二个参数是String，一般是传一个json，集群服务器拿到这个参数后会传给clusterListerner的run方法；")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callClusterEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CawClusterEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JSFCACHE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSONString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"object共享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#object共享"}},[t._v("#")]),t._v(" Object共享")]),t._v(" "),a("p",[t._v("M18系统支持不同系统之间进行数据共享；一般是一些设置模块使用；使用数据共享要在app.xml中配置标签dataObject；")]),t._v(" "),a("blockquote",[a("p",[t._v("dataShare标签介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名字")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("className")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("填class的完成路径，class必须继承ModuleObjectHandler")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("dataObject 配置例子")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dataObject")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.multiable.core.ejb.bean.dataobject.handler.ComboObjectHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dataObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("DataObjectHandler 例子")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ComboObjectHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModuleObjectHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"comboData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"comboData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModuleName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"comboData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"comboData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInfoMessList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" messList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\tmessList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataObject.comboDataInfo1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" messList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDepends")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" depends "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDepends")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdepends"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"udfMess"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" depends"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("ModuleObjectHandler  是实现了DataObjectHandler接口的，下面是DataObjectHandler部分方法介绍")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataObjectHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导入object上传文件后会运行这个方法，可以通过覆写这个方法干预entity的生成")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataObjectBaseDto")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("restoreDsDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DsEntryObject")]),t._v(" entryObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导出object的时候，可以通过覆写这个方法，将一些图片文件类的信息写到导出的Object里面；")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DsEntryObject")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("genDsEntry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataObjectBaseDto")]),t._v(" dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导出object的时候，可以通过覆写这个方法去干预entity的导出")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillupDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataObjectBaseDto")]),t._v(" dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataShareObjectDto")]),t._v(" dsDto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导入object进行安装的时候，可以通过覆写这个方法，干预object的安装")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" beId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataObjectBaseDto")]),t._v(" dsDto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DsInstallDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" insList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" depMapping"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" detail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"常用工具类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用工具类"}},[t._v("#")]),t._v(" 常用工具类")]),t._v(" "),a("h3",{attrs:{id:"基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("ArrayLib")])]),t._v(" "),a("td",[t._v("处理数据的工具类；值得注意的方法 1.检查数组中是否包含有一个字符串，2.合并数组")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ClassLib")])]),t._v(" "),a("td",[t._v("处理Class的工具类；主要提供了方法 1.根据class路径或者Class<?> 获取类名， 2. 获取class 的Field  3. 获取class 的方法 4.获取class 的类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("DateLib")])]),t._v(" "),a("td",[t._v("处理Date value的工具类；主要提供的方法 1 获取最大时间和最小时间，2 比较两个时间相差多少，3 对date value 进行加减，4根据String 创建Date， 5获取当前时间和一些转换date类型的方法")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("DateFormatLib")])]),t._v(" "),a("td",[t._v("处理Date类型转换的工具类；主要提供的方法 1 将Date 根据dateFormat 转换成对应的String ，2 将String 根据dateFormat 转换成Date类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ListLib")])]),t._v(" "),a("td",[t._v("处理List 的工具类；主要提供的方法有 1 获取new List，2 判断List是否为空， 3 判断两个List是否一样，4 List的排序，5获取一个Object 的Field 的Value List")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("MathLib")])]),t._v(" "),a("td",[t._v("提供数学计算的工具类；主要提供的方法有 1 对小数的四舍五入，接近的最大整数，接近的最小整数， 2 选取一串数字中最大数，最小数 ，3 获取一串数字的平均值，总和，4 获取绝对值 5 转换String 成 int，Double")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("StringLib")])]),t._v(" "),a("td",[t._v("处理String 的工具类；主要提供的方法有 ：1获取唯一的String， 2检查String是否相等，是否为空 ， 3按照不同的方案剪切String 4 按照不同的方案加上String 或者替换String ，5 提供转换size 成 MB，KB的方法 ， 6 将String 中的字符替换成 HTML 的格式")])])])]),t._v(" "),a("h3",{attrs:{id:"特定操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特定操作"}},[t._v("#")]),t._v(" 特定操作")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("SqlTableLib")])]),t._v(" "),a("td",[t._v("实现SqlTable的表内操作，以及SqlTable到POJO或JSON字符串的相互转换；主要提供的方法有： 1对比两个SqlTable 是否相等， 2 将一个SqlTable 中的一行复制到另一个SqlTable， 3 SqlTable 与PoO 之间的相互装换，4  SqlTable 与 Json 字符串之间的相互装换")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("CheckMsgLib")])]),t._v(" "),a("td",[t._v("处理CheckMsg 的工具类；主要提供的方法有 1 提供创建CheckMsg 的方法， 2将CheckMsg 和Json String 相互转换 ，3 根据CheckResult 创建ResponseBuilder ，4 将 jsonObject 或SqlTable 转换成jsonString 后放入Response 中返回 ，5创建错误信息的Response")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ConvertLib")])]),t._v(" "),a("td",[t._v("转换对象的类型的工具类；主要提供的方法 1. 转换Obeject 成 Boolean，String，Double，Long，Integer，Number，Date ， 2.将String 转换成对象的Object 类型，例如Date，Number，Boolean")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("CawLib")])]),t._v(" "),a("td",[t._v("获取caw配置信息的工具类；主要提供了方法 1. 获取服务器ip地址，2.获取cawserver.properties配置文件信息，3. 获取唯一的key")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("发送邮件示例")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EJB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MacEmailSenderEJB"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacEmailSenderLocal")]),t._v(" emailEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacEmail")]),t._v(" email "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MacEmailAttachment")]),t._v(" atta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttachments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAttachment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("atta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nemail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test@mac.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nemail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test1@mac.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nemail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSubject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sunject - test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nemail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckResult")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" emailEJB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendEmailWithId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" emailSettingId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v(":emailSettingId是邮件服务器设定的Id，如果不传输将使用默认格式。")]),t._v(" "),a("blockquote",[a("p",[t._v("审核追踪示例")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuditTrailData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" datas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuditTrailData")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuditTrailData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEntityId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entityId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setExeTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setiRev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iRev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMenuCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setModuleName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOperation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOperationDesc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ndatas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuditTrailLib")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAuditTrail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注")]),t._v("：start是代码开始运行时的时间戳。")])])}),[],!1,null,null,null);a.default=e.exports}}]);