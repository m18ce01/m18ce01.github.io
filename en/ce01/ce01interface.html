<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>M18 Developer Center</title>
    <meta name="description" content="Make Something People Want">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.979bc6e4.css" as="style"><link rel="preload" href="/assets/js/app.49b5115d.js" as="script"><link rel="preload" href="/assets/js/3.14966609.js" as="script"><link rel="preload" href="/assets/js/28.42a3faf1.js" as="script"><link rel="prefetch" href="/assets/js/10.cf29adfb.js"><link rel="prefetch" href="/assets/js/11.858dfadd.js"><link rel="prefetch" href="/assets/js/12.d45e9d70.js"><link rel="prefetch" href="/assets/js/13.60e0ea99.js"><link rel="prefetch" href="/assets/js/14.40c517cc.js"><link rel="prefetch" href="/assets/js/15.9d88f368.js"><link rel="prefetch" href="/assets/js/16.3f500d5a.js"><link rel="prefetch" href="/assets/js/17.20311369.js"><link rel="prefetch" href="/assets/js/18.63f6ab6d.js"><link rel="prefetch" href="/assets/js/19.845c1349.js"><link rel="prefetch" href="/assets/js/20.10b304cc.js"><link rel="prefetch" href="/assets/js/21.fa0e1988.js"><link rel="prefetch" href="/assets/js/22.bd99ba79.js"><link rel="prefetch" href="/assets/js/23.a40cec06.js"><link rel="prefetch" href="/assets/js/24.850c8402.js"><link rel="prefetch" href="/assets/js/25.b41c6767.js"><link rel="prefetch" href="/assets/js/26.104e87e6.js"><link rel="prefetch" href="/assets/js/27.30b86430.js"><link rel="prefetch" href="/assets/js/29.c5af7014.js"><link rel="prefetch" href="/assets/js/30.46b87e51.js"><link rel="prefetch" href="/assets/js/31.10279171.js"><link rel="prefetch" href="/assets/js/32.9ec739b4.js"><link rel="prefetch" href="/assets/js/33.a693f889.js"><link rel="prefetch" href="/assets/js/34.0c1839a2.js"><link rel="prefetch" href="/assets/js/35.87337855.js"><link rel="prefetch" href="/assets/js/36.75e373ae.js"><link rel="prefetch" href="/assets/js/37.5f154f50.js"><link rel="prefetch" href="/assets/js/38.0d1474d5.js"><link rel="prefetch" href="/assets/js/39.fb69038e.js"><link rel="prefetch" href="/assets/js/4.49d74b52.js"><link rel="prefetch" href="/assets/js/40.68bc3549.js"><link rel="prefetch" href="/assets/js/41.d264fa19.js"><link rel="prefetch" href="/assets/js/42.0055f5e4.js"><link rel="prefetch" href="/assets/js/43.c062b9f8.js"><link rel="prefetch" href="/assets/js/44.13588e3b.js"><link rel="prefetch" href="/assets/js/45.d67dfe62.js"><link rel="prefetch" href="/assets/js/46.f113214f.js"><link rel="prefetch" href="/assets/js/47.b6bf90ca.js"><link rel="prefetch" href="/assets/js/48.83c61ebb.js"><link rel="prefetch" href="/assets/js/49.ac4ee610.js"><link rel="prefetch" href="/assets/js/5.19bcf32b.js"><link rel="prefetch" href="/assets/js/50.29dc8b08.js"><link rel="prefetch" href="/assets/js/51.f1a85f1c.js"><link rel="prefetch" href="/assets/js/52.8794da15.js"><link rel="prefetch" href="/assets/js/53.8142d691.js"><link rel="prefetch" href="/assets/js/54.e25a0115.js"><link rel="prefetch" href="/assets/js/55.38bbde14.js"><link rel="prefetch" href="/assets/js/56.90123632.js"><link rel="prefetch" href="/assets/js/57.460f2524.js"><link rel="prefetch" href="/assets/js/58.56139ce9.js"><link rel="prefetch" href="/assets/js/59.34771849.js"><link rel="prefetch" href="/assets/js/6.db742054.js"><link rel="prefetch" href="/assets/js/60.60cb69c2.js"><link rel="prefetch" href="/assets/js/7.17e85a1c.js"><link rel="prefetch" href="/assets/js/8.ae1ec258.js"><link rel="prefetch" href="/assets/js/9.eda3ac80.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.4ce4b4c2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.979bc6e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">M18 Developer Center</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/en/wsdoc/" class="nav-link">WebServices</a></div><div class="nav-item"><a href="/en/m18/" class="nav-link">App</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link">中文文档</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/en/tutorial/" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/en/wsdoc/" class="nav-link">WebServices</a></div><div class="nav-item"><a href="/en/m18/" class="nav-link">App</a></div><div class="nav-item"><a href="/zh-CN/" class="nav-link">中文文档</a></div><div class="nav-item"><a href="https://community.multiable.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/ce01/ce01interface.html#massmailhandler" class="sidebar-link">MassMailHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-handleemail" class="sidebar-link">Function handleEmail</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-sendemail" class="sidebar-link">Function sendEmail</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#updatefrozendate" class="sidebar-link">UpdateFrozenDate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-2" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-beforeupdatefrozen" class="sidebar-link">Function beforeUpdateFrozen</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-afterupdatefrozen" class="sidebar-link">Function afterUpdateFrozen</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#erpserverinitialized" class="sidebar-link">ErpServerInitialized</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-3" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-contextinitialized" class="sidebar-link">Function contextInitialized</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-afterinitialized" class="sidebar-link">Function afterInitialized</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#generaterecord" class="sidebar-link">GenerateRecord</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-4" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-beforesaverecord" class="sidebar-link">Function beforeSaveRecord</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#specbsruleitem" class="sidebar-link">SpecBsRuleItem</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-5" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getspecbsruleitem" class="sidebar-link">Function getSpecBsRuleItem</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#asavechkhandler" class="sidebar-link">ASaveChkHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-6" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getasavechksql" class="sidebar-link">Function getASaveChkSql</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#generatedejblot" class="sidebar-link">GeneratedEJBLot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-7" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-originaccept" class="sidebar-link">Function originAccept</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-generate" class="sidebar-link">Function generate</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#generatedjsflot" class="sidebar-link">GeneratedJSFLot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-8" class="sidebar-link">Purpose</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#loadtradefooter" class="sidebar-link">LoadTradeFooter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-9" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getmultipropricedesc" class="sidebar-link">Function getMultiProPriceDesc</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-assign-footer-updesc" class="sidebar-link">Function assignfooterupdesc</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#assignlotnohelper" class="sidebar-link">AssignLotnoHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-10" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-isaccept" class="sidebar-link">Function isAccept</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getassignlotno" class="sidebar-link">Function getAssignLotno</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-sortstock" class="sidebar-link">Function sortStock</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-isstockfit" class="sidebar-link">Function isStockFit</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#imaccalchandler" class="sidebar-link">IMacCalcHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-11" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getorder" class="sidebar-link">Function getOrder</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-efe-mainfooter-up" class="sidebar-link">Function efemainfooterup</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-calc-invamt" class="sidebar-link">Function calc_invamt</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getinchargeqtyfield" class="sidebar-link">Function getInChargeQtyField</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getfooterupfield" class="sidebar-link">Function getFooterUpField</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getfooterucfield" class="sidebar-link">Function getFooterUcField</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#updateprocost" class="sidebar-link">UpdateProCost</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-12" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#detailed-description" class="sidebar-link">Detailed Description</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#loadbomdatasourcehelper" class="sidebar-link">LoadBomDataSourceHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-13" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-updatebomdatasourcedata" class="sidebar-link">Function updateBomDataSourceData</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#modulesettinghelper" class="sidebar-link">ModuleSettingHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-14" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-checkinventorymodule" class="sidebar-link">Function checkInventoryModule</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getstkmodule" class="sidebar-link">Function getStkModule</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#generatevoucher" class="sidebar-link">GenerateVoucher</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-15" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getudforder" class="sidebar-link">Function getUDFOrder</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-generateudfvoucher" class="sidebar-link">Function GenerateUDFVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-beforegeneratevoucher" class="sidebar-link">Function beforeGenerateVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-beforegent" class="sidebar-link">Function beforeGenT</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-aftergeneratevoucher" class="sidebar-link">Function afterGenerateVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-aftergenerateinstancevoucher" class="sidebar-link">Function afterGenerateInstanceVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-aftergeneratemodulevoucher" class="sidebar-link">Function afterGenerateModuleVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-aftergeneratetranvoucher" class="sidebar-link">Function afterGenerateTranVoucher</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-afterbatchrevertvoucher" class="sidebar-link">Function afterBatchRevertVoucher</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#prqallocate" class="sidebar-link">PrqAllocate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-16" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-supply-demand" class="sidebar-link">Function supply_demand</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#loadlocktranhelper" class="sidebar-link">LoadLockTranHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-17" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-addloadlocktrancond" class="sidebar-link">Function addLoadLockTranCond</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#tradingsettinghelper" class="sidebar-link">TradingSettingHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-18" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-getlasttrantablename" class="sidebar-link">Function getLastTranTableName</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-addtradingsettingdata" class="sidebar-link">Function addTradingSettingData</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#ecnhelper" class="sidebar-link">EcnHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-19" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-ecnchangeprocessextradata" class="sidebar-link">Function ecnChangeProcessExtraData</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-ecnchangematextradata" class="sidebar-link">Function ecnChangeMatExtraData</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#depositdatahelper" class="sidebar-link">DepositDataHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-20" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendardepositreceipt" class="sidebar-link">Function  appendArDepositReceipt</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendapdepositreceipt" class="sidebar-link">Function  appendApDepositReceipt</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-2" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendarosdeposit" class="sidebar-link">Function  appendArOsDeposit</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-3" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendaposdeposit" class="sidebar-link">Function  appendApOsDeposit</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-4" class="sidebar-link">Example</a></li></ul></li><li><a href="/en/ce01/ce01interface.html#financedatahelper" class="sidebar-link">FinanceDataHelper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#purpose-21" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-updatearinvoiceremain" class="sidebar-link">Function  updateArInvoiceRemain</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-5" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-updateapinvoiceremain" class="sidebar-link">Function  updateApInvoiceRemain</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-6" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendarosinvoice" class="sidebar-link">Function  appendArOsInvoice</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-7" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#function-appendaposinvoice" class="sidebar-link">Function  appendApOsInvoice</a></li><li class="sidebar-sub-header"><a href="/en/ce01/ce01interface.html#example-8" class="sidebar-link">Example</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>nav: en</p> <h1 id="m18-erp-ejb-interfaces-back-end-interface"><a href="#m18-erp-ejb-interfaces-back-end-interface" aria-hidden="true" class="header-anchor">#</a> M18 ERP EJB Interfaces (Back-end Interface)</h1> <p><code>Version: 1.1 | Release Date: 7/12/2018</code></p> <h2 id="massmailhandler"><a href="#massmailhandler" aria-hidden="true" class="header-anchor">#</a> MassMailHandler</h2> <h3 id="purpose"><a href="#purpose" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>It is used to handle email when sending email by [Mass Email of Documents].</p> <br> <h3 id="function-handleemail"><a href="#function-handleemail" aria-hidden="true" class="header-anchor">#</a> Function handleEmail</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">handleEmail</span><span class="token punctuation">(</span><span class="token class-name">MacEmail</span> email<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> massmail<span class="token punctuation">,</span> <span class="token class-name">CawReport</span> report<span class="token punctuation">,</span> <span class="token class-name">CawReportDataSet</span> dataSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>It is used to handle email when sending email by [Mass Email of Documents].</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>email</td> <td><code>MacEmail</code></td> <td>The email</td></tr> <tr><td>massmail</td> <td><code>SqlTable</code></td> <td>The main table of [Mass Email of Documents]</td></tr> <tr><td>report</td> <td><code>CawReport</code></td> <td>CawReport</td></tr> <tr><td>dataSet</td> <td><code>CawReportDataSet</code></td> <td>CawReportDataSet</td></tr></tbody></table> <br> <hr> <h3 id="function-sendemail"><a href="#function-sendemail" aria-hidden="true" class="header-anchor">#</a> Function sendEmail</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MacEmail</span><span class="token punctuation">&gt;</span></span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> massmail<span class="token punctuation">,</span> <span class="token class-name">CawReport</span> report<span class="token punctuation">,</span> <span class="token class-name">CawReportDataSet</span> dataSet<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> fileKey<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> fileMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>It is used to get more email address when sending email by [Mass Email of Documents].</p> <p>Eg:  Core App can get the email addresses from cus/ven/staff/cnDept/virDept.</p> <p>Eg:  Ac App can get the email addresses from Debtor/Creditor.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>massmail</td> <td><code>SqlTable</code></td> <td>The main table of [Mass Email of Documents]</td></tr> <tr><td>report</td> <td><code>CawReport</code></td> <td>CawReport</td></tr> <tr><td>dataSet</td> <td><code>CawReportDataSet</code></td> <td>CawReportDataSet</td></tr> <tr><td>fileKey</td> <td><code>Map&lt;Long, String&gt;</code></td> <td>The preview file key-value pairs. <code>key</code> is the transaction id while <code>value</code> is the file name.</td></tr> <tr><td>fileMap</td> <td><code>Map&lt;String, String&gt;</code></td> <td>The preview file path key-value pairs. <code>key</code> is the file name while <code>value</code> is file path.</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>Set&lt;MacEmail&gt;</code></td> <td>Extra email addresses.</td></tr></tbody></table> <br> <br> <h2 id="updatefrozendate"><a href="#updatefrozendate" aria-hidden="true" class="header-anchor">#</a> UpdateFrozenDate</h2> <h3 id="purpose-2"><a href="#purpose-2" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>It is used when developers want to interact with M18 when frozen date is ready to update or updated.</p> <br> <h3 id="function-beforeupdatefrozen"><a href="#function-beforeupdatefrozen" aria-hidden="true" class="header-anchor">#</a> Function beforeUpdateFrozen</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">beforeUpdateFrozen</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">Long</span> frozenTypeId<span class="token punctuation">,</span> <span class="token class-name">Date</span> frozenDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger before updating frozen date.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>Long</code></td> <td>The business entity id</td></tr> <tr><td>frozenTypeId</td> <td><code>Long</code></td> <td>The forzen type id</td></tr> <tr><td>frozenDate</td> <td><code>Date</code></td> <td>The frozen date</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The <code>messCode</code> to describe the error.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">beforeUpdateFrozen</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">Long</span> frozenTypeId<span class="token punctuation">,</span> <span class="token class-name">Date</span> frozenDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SqlTable</span> data <span class="token operator">=</span> <span class="token class-name">MacCheckerUtil</span><span class="token punctuation">.</span><span class="token function">excuteQuery</span><span class="token punctuation">(</span><span class="token string">&quot;frozentype&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; id = &quot;</span> <span class="token operator">+</span> frozenTypeId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTable</span> beFile <span class="token operator">=</span> <span class="token class-name">MacUtil</span><span class="token punctuation">.</span><span class="token function">getBeGlobalSetting</span><span class="token punctuation">(</span>beId<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>beFile <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> beFile<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>frozenDate<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span> beFile<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;stkClosed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token string">&quot;ce01_core.frozenPeriodSTKError&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><br> <hr> <h3 id="function-afterupdatefrozen"><a href="#function-afterupdatefrozen" aria-hidden="true" class="header-anchor">#</a> Function afterUpdateFrozen</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterUpdateFrozen</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">Long</span> frozenTypeId<span class="token punctuation">,</span> <span class="token class-name">Date</span> frozenDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger after updated the frozen date.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>Long</code></td> <td>The business entity id</td></tr> <tr><td>frozenTypeId</td> <td><code>Long</code></td> <td>The frozen type id</td></tr> <tr><td>frozenDate</td> <td><code>Date</code></td> <td>The frozen date</td></tr></tbody></table> <br> <br> <h2 id="erpserverinitialized"><a href="#erpserverinitialized" aria-hidden="true" class="header-anchor">#</a> ErpServerInitialized</h2> <h3 id="purpose-3"><a href="#purpose-3" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>This interface will be triggered after the database is updated and before the JBoss started completely.</p> <p>It is usually used to initialize the cache or prepare default data.</p> <br> <h3 id="function-contextinitialized"><a href="#function-contextinitialized" aria-hidden="true" class="header-anchor">#</a> Function contextInitialized</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when the database is updated and before the JBoss started completely.</p> <br> <hr> <h3 id="function-afterinitialized"><a href="#function-afterinitialized" aria-hidden="true" class="header-anchor">#</a> Function afterInitialized</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered after <code>contextInitialized()</code>.</p> <br> <br> <h2 id="generaterecord"><a href="#generaterecord" aria-hidden="true" class="header-anchor">#</a> GenerateRecord</h2> <h3 id="purpose-4"><a href="#purpose-4" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to interact with M18 when the system tried to create a record from another module. (Example: Delivery note generate Sales Invoice record)</p> <br> <h3 id="function-beforesaverecord"><a href="#function-beforesaverecord" aria-hidden="true" class="header-anchor">#</a> Function beforeSaveRecord</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">beforeSaveRecord</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> fromEntity<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token class-name">String</span> jsonParam<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when the target entity(e.g. Sales Invoice) is ready to save. Return <code>false</code> if developers need to prohibit the save process.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>fromEntity</td> <td><code>SqlEntity</code></td> <td>The entity of from module. Example: Entity of Delivery Note.</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The entity of to module. Example: Entity of Sales Invoice.</td></tr> <tr><td>jsonParam</td> <td><code>String</code></td> <td>Some parameters.</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td>If <code>false</code>, recode will not be saved.</td></tr></tbody></table> <br> <br> <h2 id="specbsruleitem"><a href="#specbsruleitem" aria-hidden="true" class="header-anchor">#</a> SpecBsRuleItem</h2> <h3 id="purpose-5"><a href="#purpose-5" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to interact with M18 when business rule is needed in the system.</p> <br> <h3 id="function-getspecbsruleitem"><a href="#function-getspecbsruleitem" aria-hidden="true" class="header-anchor">#</a> Function getSpecBsRuleItem</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BsRuleItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpecBsRuleItem</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered when M18 request for business rule items. Developers can define additional business rule in Java and return to the system.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>Long</code></td> <td>The current business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The triggered module's name</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>List&lt;BsRuleItem&gt;</code></td> <td>A list of additional business rule Items.</td></tr></tbody></table> <p><strong>Example</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrdgSpecBsRuleItem</span> <span class="token keyword">implements</span> <span class="token class-name">SpecBsRuleItem</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BsRuleItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpecBsRuleItem</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">MacUtil</span><span class="token punctuation">.</span><span class="token function">matchAppModule</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">,</span> <span class="token class-name">TradeStaticVar</span><span class="token punctuation">.</span>appName<span class="token punctuation">)</span>
				<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TradeUtil</span><span class="token punctuation">.</span><span class="token function">isTradingUdfEditor</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BsRuleItem</span><span class="token punctuation">&gt;</span></span> specItems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BsRuleItem</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">BsRule</span> rules <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BsRule</span><span class="token punctuation">)</span> <span class="token class-name">CawCache</span><span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token class-name">ErpStaticVar</span><span class="token punctuation">.</span>bsRule<span class="token punctuation">,</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>rules <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TradeUtil</span><span class="token punctuation">.</span><span class="token function">isAllowNs</span><span class="token punctuation">(</span>beId<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">TradeUtil</span><span class="token punctuation">.</span><span class="token function">checkInventoryModule</span><span class="token punctuation">(</span>beId<span class="token punctuation">,</span> moduleName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">BsRuleItem</span> allowNsItem <span class="token operator">=</span> rules<span class="token punctuation">.</span><span class="token function">getChkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;allowNs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				specItems<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>allowNsItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> specItems<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <h2 id="asavechkhandler"><a href="#asavechkhandler" aria-hidden="true" class="header-anchor">#</a> ASaveChkHandler</h2> <h3 id="purpose-6"><a href="#purpose-6" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to interact with M18 when a transaction is saved. Usually used to check the foreign key constrain/data when saving a transaction with footer values.</p> <p>For example, If the currency id in sales order(SO) is not equal to the currency id in the delivery note stated in the SO footer. the sales order cannot be saved.</p> <br> <h3 id="function-getasavechksql"><a href="#function-getasavechksql" aria-hidden="true" class="header-anchor">#</a> Function getASaveChkSql</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getASaveChkSql</span><span class="token punctuation">(</span><span class="token class-name">ASaveChkItem</span> item<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> mainData<span class="token punctuation">,</span> <span class="token class-name">String</span> chkValue<span class="token punctuation">,</span> <span class="token class-name">String</span> joinkeycol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Define a SQL which used to check if the above following example is valid:</p> <p>If the currency id in sales order(SO) is not equal to the currency id in the delivery note stated in the SO footer. the sales order cannot be saved.</p> <p>If the dataset returned by running the SQL is non-empty, the transaction cannot be saved and error will pop up.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>item</td> <td><code>ASaveChkItem</code></td> <td>The <code>ASaveChkItem</code> object</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>mainData</td> <td><code>SqlTable</code></td> <td>The main table of saving record</td></tr> <tr><td>chkValue</td> <td><code>String</code></td> <td>The value of check field</td></tr> <tr><td>joinkeycol</td> <td><code>String</code></td> <td>The join key condition</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>SQL statement</td></tr></tbody></table> <br> <br> <h2 id="generatedejblot"><a href="#generatedejblot" aria-hidden="true" class="header-anchor">#</a> GeneratedEJBLot</h2> <h3 id="purpose-7"><a href="#purpose-7" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to interact with M18 when lot number is ready to generate in EJB.</p> <br> <h3 id="function-originaccept"><a href="#function-originaccept" aria-hidden="true" class="header-anchor">#</a> Function originAccept</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">originAccept</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered when the lot number is ready to generate. Used to determine if the current module should generate the lot number using this interface.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>module</td> <td><code>String</code></td> <td>Module name</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td><code>true</code> to generate the lot number using generate() in this interface. <code>fales</code> to generate the lot number using M18 default method.</td></tr></tbody></table> <br> <hr> <h3 id="function-generate"><a href="#function-generate" aria-hidden="true" class="header-anchor">#</a> Function generate</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> rowIndex<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">SqlTable</span> footer<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> emptyField<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> lotField<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> proField<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered when <code>originAccept()</code> return <code>true</code>. It is used to generate the lot number.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>module</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>beId</td> <td><code>Long</code></td> <td>The business entity id</td></tr> <tr><td>rowIndex</td> <td><code>int</code></td> <td>The row index of footer table</td></tr> <tr><td>footer</td> <td><code>SqlTable</code></td> <td>The footer table</td></tr> <tr><td>emptyField</td> <td><code>String[]</code></td> <td>Ignore the empty row according to the empty fields.</td></tr> <tr><td>lotField</td> <td><code>String</code></td> <td>The lot number field</td></tr> <tr><td>proField</td> <td><code>String</code></td> <td>The product field</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The lot number generated</td></tr></tbody></table> <br> <br> <h2 id="generatedjsflot"><a href="#generatedjsflot" aria-hidden="true" class="header-anchor">#</a> GeneratedJSFLot</h2> <h3 id="purpose-8"><a href="#purpose-8" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>It is used when lot number is ready to generate In JSF. Functions and methods are the same as <code>GeneratedEJBLot</code>, please refer to <a href="#GeneratedEJBLot">GeneratedEJBLot</a> for more details.</p> <br> <br> <h2 id="loadtradefooter"><a href="#loadtradefooter" aria-hidden="true" class="header-anchor">#</a> LoadTradeFooter</h2> <h3 id="purpose-9"><a href="#purpose-9" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Triggered when loading footer data from origin and used to assign unit price and description fields in footer.</p> <br> <h3 id="function-getmultipropricedesc"><a href="#function-getmultipropricedesc" aria-hidden="true" class="header-anchor">#</a> Function getMultiProPriceDesc</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">SqlTable</span> <span class="token function">getMultiProPriceDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">Long</span> refId<span class="token punctuation">,</span> <span class="token class-name">Long</span> virDeptId<span class="token punctuation">,</span> <span class="token class-name">String</span> date<span class="token punctuation">,</span> <span class="token class-name">String</span> upOrigin<span class="token punctuation">,</span> <span class="token class-name">String</span> descOrigin<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> footer<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> proField<span class="token punctuation">,</span> <span class="token class-name">String</span> jsonParam<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered after the system loaded the footer data from origin, developer can use this function to amend or override the result set.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>module</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>beId</td> <td><code>Long</code></td> <td>The business entity id</td></tr> <tr><td>refId</td> <td><code>Long</code></td> <td>The customer/vendor id</td></tr> <tr><td>virDeptId</td> <td><code>Long</code></td> <td>The business unit id</td></tr> <tr><td>date</td> <td><code>String</code></td> <td>The date of the transaction</td></tr> <tr><td>upOrigin</td> <td><code>String</code></td> <td>Product price origin</td></tr> <tr><td>descOrigin</td> <td><code>String</code></td> <td>Product description origin</td></tr> <tr><td>footer</td> <td><code>SqlTable</code></td> <td>The footer table instance</td></tr> <tr><td>proField</td> <td><code>String[]</code></td> <td>String[] { &quot;proId&quot;, &quot;unitId&quot;, &quot;qty&quot; }</td></tr> <tr><td>jsonParam</td> <td><code>String</code></td> <td>Some parameters</td></tr> <tr><td>result</td> <td><code>SqlTable</code></td> <td>The result table</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>SqlTable</code></td> <td>Return a sqlTable with amended result set.</td></tr></tbody></table> <br> <hr> <h3 id="function-assign-footer-updesc"><a href="#function-assign-footer-updesc" aria-hidden="true" class="header-anchor">#</a> Function assign_footer_updesc</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">assign_footer_updesc</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> footer<span class="token punctuation">,</span> <span class="token keyword">int</span> footerIndex<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> tarTable<span class="token punctuation">,</span> <span class="token keyword">int</span> rec<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Triggered after the system assigned brief description and detail description or unit price. Developers can amended the final version of the fields' value before display it in the user interface.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>footer</td> <td><code>SqlTable</code></td> <td>The footer table</td></tr> <tr><td>footerIndex</td> <td><code>int</code></td> <td>The row index of footer table</td></tr> <tr><td>tarTable</td> <td><code>SqlTable</code></td> <td>The result table for assigning unit price or assigning different description.</td></tr> <tr><td>rec</td> <td><code>int</code></td> <td>The row index of result table</td></tr></tbody></table> <br> <br> <h2 id="assignlotnohelper"><a href="#assignlotnohelper" aria-hidden="true" class="header-anchor">#</a> AssignLotnoHelper</h2> <h3 id="purpose-10"><a href="#purpose-10" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>It is used for developer to interact with M18 to amended the lot number table after the system has generate the default setting.</p> <br> <h3 id="function-isaccept"><a href="#function-isaccept" aria-hidden="true" class="header-anchor">#</a> Function isAccept</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAccept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Determine if the other function in this interface should be run.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td><code>true</code> to run other function in this interface. <code>false</code> to ignore this interface.</td></tr></tbody></table> <br> <hr> <h3 id="function-getassignlotno"><a href="#function-getassignlotno" aria-hidden="true" class="header-anchor">#</a> Function getAssignLotno</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">SqlTable</span> <span class="token function">getAssignLotno</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when M18 has generated lot number for the product. Developers can make use of this function to amend the lot number assigned in <code>stock</code>.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>module</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>stock</td> <td><code>SqlTable</code></td> <td>The original assigned lot number table</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>SqlTable</code></td> <td>New assigned lot number table.</td></tr></tbody></table> <br> <hr> <h3 id="function-sortstock"><a href="#function-sortstock" aria-hidden="true" class="header-anchor">#</a> Function sortStock</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sortStock</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stock<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortFieldList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> sortTypeList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger right after <code>getAssignLotno()</code>. Used to sort the lot number table.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>module</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>stock</td> <td><code>SqlTable</code></td> <td>The lot number table</td></tr> <tr><td>sortFieldList</td> <td><code>List&lt;String&gt;</code></td> <td>A list of sorting fields.</td></tr> <tr><td>sortTypeList</td> <td><code>List&lt;Boolean&gt;</code></td> <td>A list of sorting direction. The order of the direction mapped with the list of field list.  <code>true</code> means ascending. <code>false</code> means descending.</td></tr></tbody></table> <br> <hr> <h3 id="function-isstockfit"><a href="#function-isstockfit" aria-hidden="true" class="header-anchor">#</a> Function isStockFit</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isStockFit</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stock<span class="token punctuation">,</span> <span class="token keyword">int</span> stockIndex<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> footer<span class="token punctuation">,</span> <span class="token keyword">int</span> footerIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Determine if the lot number should be assigned.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>module</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>stock</td> <td><code>SqlTable</code></td> <td>The lot number table</td></tr> <tr><td>stockIndex</td> <td><code>int</code></td> <td>The row index of lot number table</td></tr> <tr><td>footer</td> <td><code>SqlTable</code></td> <td>The footer table</td></tr> <tr><td>footerIndex</td> <td><code>int</code></td> <td>The row index of footer table</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td>If <code>false</code>, the lot number will not assigned to footer table.</td></tr></tbody></table> <br> <br> <h2 id="imaccalchandler"><a href="#imaccalchandler" aria-hidden="true" class="header-anchor">#</a> IMacCalcHandler</h2> <h3 id="purpose-11"><a href="#purpose-11" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>This interface is used for interacting with M18 using M18 Mobile Application.</p> <br> <h3 id="function-getorder"><a href="#function-getorder" aria-hidden="true" class="header-anchor">#</a> Function getOrder</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Define the order of the interface, the lower the number, the earlier the interface will be called.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>int</code></td> <td>Return order number.</td></tr></tbody></table> <br> <hr> <h3 id="function-efe-mainfooter-up"><a href="#function-efe-mainfooter-up" aria-hidden="true" class="header-anchor">#</a> Function efe_mainfooter_up</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">efe_mainfooter_up</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> tranType<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> footer<span class="token punctuation">,</span> <span class="token keyword">int</span> rowIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when unit price is ready to be filled.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>tranType</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>footer</td> <td><code>SqlTable</code></td> <td>The footer table</td></tr> <tr><td>rowIndex</td> <td><code>int</code></td> <td>The row index of footer table</td></tr></tbody></table> <br> <hr> <h3 id="function-calc-invamt"><a href="#function-calc-invamt" aria-hidden="true" class="header-anchor">#</a> Function calc_invamt</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">calc_invamt</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> tranType<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> mainData<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> mainFooter<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> mainDisc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to calculate &lt;Total Amount / Total Charge / Total Discount / Amount&gt; in header before the transaction saved.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>tranType</td> <td><code>String</code></td> <td>The module name</td></tr> <tr><td>mainData</td> <td><code>SqlTable</code></td> <td>The main table</td></tr> <tr><td>mainFooter</td> <td><code>SqlTable</code></td> <td>The footer table</td></tr> <tr><td>mainDisc</td> <td><code>SqlTable</code></td> <td>The discount table</td></tr></tbody></table> <br> <hr> <h3 id="function-getinchargeqtyfield"><a href="#function-getinchargeqtyfield" aria-hidden="true" class="header-anchor">#</a> Function getInChargeQtyField</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getInChargeQtyField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;qty&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>It is used to get inChargeQty field name in footer table.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>Return the inChargeQty field in footer table.</td></tr></tbody></table> <br> <hr> <h3 id="function-getfooterupfield"><a href="#function-getfooterupfield" aria-hidden="true" class="header-anchor">#</a> Function getFooterUpField</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getFooterUpField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;up&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>It is used to get unit price field name in footer table.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>Return the unit price field in footer table.</td></tr></tbody></table> <br> <hr> <h3 id="function-getfooterucfield"><a href="#function-getfooterucfield" aria-hidden="true" class="header-anchor">#</a> Function getFooterUcField</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getFooterUcField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;uc&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>It is used to get unit cost field name in footer table.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>Return unit cost field name in footer table.</td></tr></tbody></table> <br> <br> <h2 id="updateprocost"><a href="#updateprocost" aria-hidden="true" class="header-anchor">#</a> UpdateProCost</h2> <h3 id="purpose-12"><a href="#purpose-12" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>It is used for developer to interact with M18 when running Close Stock.</p> <br> <h3 id="detailed-description"><a href="#detailed-description" aria-hidden="true" class="header-anchor">#</a> Detailed Description</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UpdateProCost</span> <span class="token punctuation">{</span>

	<span class="token comment">/**
	 * For Product LLC
	 * this function can be replaced by using procedure named get_pro_llc_*
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">SqlTable</span> <span class="token function">getMatList</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * For Data Updating(Stock In UC)
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">beforeLoadData</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> codeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * can append special field used in the getCalcUc
	 * or
	 * update data
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterLoadData</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> codeList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stockIn<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stockOut<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stock_open<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * 1: return false(CalcUcStatus.skipOther) means skip the other instance of UpdateProCost
	 * 2: for special value please set it to CalcUcStatus.uc(and set CalcUcStatus.setUc = true)
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">CalcUcStatus</span> <span class="token function">getCalcUc</span><span class="token punctuation">(</span><span class="token class-name">String</span> stk_mth<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStockIn<span class="token punctuation">,</span> <span class="token keyword">int</span> rowIndex<span class="token punctuation">,</span> <span class="token keyword">double</span> calcUc<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> tempVarList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> tempStockIn<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> tempStockOut<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">calcFIFOUc</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> inVARLIST<span class="token punctuation">,</span> <span class="token class-name">Long</span> proId<span class="token punctuation">,</span> <span class="token class-name">Date</span> tranDate<span class="token punctuation">,</span> <span class="token keyword">int</span> outIndex<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stockIn<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stockOut<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stock_open<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> outAss<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> retAss<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> retUesd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * For Product Cost Updating(PC)
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterUpdateUc</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> codeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * For Data Updating After Close Stock
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterCloseStock</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * For Data Updating After Reverse Stock
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">afterReverseStock</span><span class="token punctuation">(</span><span class="token class-name">Long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> varList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <h2 id="loadbomdatasourcehelper"><a href="#loadbomdatasourcehelper" aria-hidden="true" class="header-anchor">#</a> LoadBomDataSourceHelper</h2> <h3 id="purpose-13"><a href="#purpose-13" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>For developer to adjust the bill of materials data after loading the instant cost sheet data.</p> <br> <h3 id="function-updatebomdatasourcedata"><a href="#function-updatebomdatasourcedata" aria-hidden="true" class="header-anchor">#</a> Function updateBomDataSourceData</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlTable</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateBomDataSourceData</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">int</span> bomRec<span class="token punctuation">,</span> <span class="token keyword">int</span> footerIndex<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlTable</span><span class="token punctuation">&gt;</span></span> bomInfo<span class="token punctuation">,</span> <span class="token class-name">String</span> bomDataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger after the instant cost sheet data is loaded.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The SqlEntity of the module</td></tr> <tr><td>bomRec</td> <td><code>int</code></td> <td>The row index of the bill of material list.</td></tr> <tr><td>footerIndex</td> <td><code>int</code></td> <td>The row index of the main footer table.</td></tr> <tr><td>bomInfo</td> <td><code>List&lt;SqlTable&gt;</code></td> <td>A group of <code>SqlTable</code>, use <code>bomInfo.get(0)</code> to get the table of bill of material list.</td></tr> <tr><td>bomDataSource</td> <td><code>String</code></td> <td>The data source.</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td>Return the amended <code>bomInfo</code>.</td></tr></tbody></table> <br> <br> <h2 id="modulesettinghelper"><a href="#modulesettinghelper" aria-hidden="true" class="header-anchor">#</a> ModuleSettingHelper</h2> <h3 id="purpose-14"><a href="#purpose-14" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Determine the if the module should behave like that in stock module.</p> <br> <h3 id="function-checkinventorymodule"><a href="#function-checkinventorymodule" aria-hidden="true" class="header-anchor">#</a> Function checkInventoryModule</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkInventoryModule</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Determine if it is an inventory module.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>boolean</code></td> <td>if <code>true</code>, this module will act like an inventory module.</td></tr></tbody></table> <br> <hr> <h3 id="function-getstkmodule"><a href="#function-getstkmodule" aria-hidden="true" class="header-anchor">#</a> Function getStkModule</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">SqlTable</span> <span class="token function">getStkModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Developer can define a module to be used in business flow process.</p> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>SqlTable</code></td> <td>A new <code>SqlTable</code> with one column(<code>module</code>) only. Provide the module name in every records to add additional module to the business flow process editor.</td></tr></tbody></table> <br> <br> <h2 id="generatevoucher"><a href="#generatevoucher" aria-hidden="true" class="header-anchor">#</a> GenerateVoucher</h2> <h3 id="purpose-15"><a href="#purpose-15" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>For developers to interact with M18 when generating voucher from transactions.</p> <br> <h3 id="function-getudforder"><a href="#function-getudforder" aria-hidden="true" class="header-anchor">#</a> Function getUDFOrder</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">int</span> <span class="token function">getUDFOrder</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Determine if the function <code>GenerateUDFVoucher()</code> should be run. The number must be larger than <code>-1</code>.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module of the transaction</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The <code>SqlEntity</code> of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is of stock transaction</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>int</code></td> <td>The result integer should be larger than <code>-1</code> if <code>GenerateUDFVoucher()</code> needed to be run.</td></tr></tbody></table> <br> <hr> <h3 id="function-generateudfvoucher"><a href="#function-generateudfvoucher" aria-hidden="true" class="header-anchor">#</a> Function GenerateUDFVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">Object</span> <span class="token class-name">GenerateUDFVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Override the original system default voucher generation rules. Provide the new SQL to the system and generate a voucher.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module of the transaction</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The <code>SqlEntity</code> of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is of stock transaction</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>Object</code></td> <td>Return <code>null</code> to ignore this function. Return <code>CheckMsg</code> object to prohibit the process to be completed, the transaction will be fail to save. Return <code>List&lt;String&gt;</code> which include all the SQL statements needed to generate the voucher.</td></tr></tbody></table> <br> <hr> <h3 id="function-beforegeneratevoucher"><a href="#function-beforegeneratevoucher" aria-hidden="true" class="header-anchor">#</a> Function beforeGenerateVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">beforeGenerateVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when <code>GenerateUDFVoucher()</code> return <code>null</code> and developers can provide additional SQL statements before the default SQL statements is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The SqlEntity of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is stock related</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run before the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-beforegent"><a href="#function-beforegent" aria-hidden="true" class="header-anchor">#</a> Function beforeGenT</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">beforeGenT</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when <code>GenerateUDFVoucher()</code> return <code>null</code> and developers can provide additional SQL statements before the default SQL statements to generate the footer of the voucher is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The SqlEntity of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is stock related</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run before the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-aftergeneratevoucher"><a href="#function-aftergeneratevoucher" aria-hidden="true" class="header-anchor">#</a> Function afterGenerateVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">afterGenerateVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">,</span> <span class="token class-name">Long</span> voucherId<span class="token punctuation">,</span> <span class="token keyword">boolean</span> genModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when <code>GenerateUDFVoucher()</code> return <code>null</code> and developers can provide additional SQL statements after all the default SQL statements of the voucher is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The SqlEntity of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is stock related</td></tr> <tr><td>voucherId</td> <td><code>Long</code></td> <td>The id of the voucher configuration editor</td></tr> <tr><td>genModel</td> <td><code>boolean</code></td> <td>Indicate if the voucher is generated once the transaction is saved (Instant Voucher)</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run after the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-aftergenerateinstancevoucher"><a href="#function-aftergenerateinstancevoucher" aria-hidden="true" class="header-anchor">#</a> Function afterGenerateInstanceVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">afterGenerateInstanceVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger after <code>afterGenerateVoucher()</code> and the voucher is generated once the transaction is saved (Instant Voucher).</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>entity</td> <td><code>SqlEntity</code></td> <td>The SqlEntity of the transaction</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Indicate if the transaction is stock related</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run after the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-aftergeneratemodulevoucher"><a href="#function-aftergeneratemodulevoucher" aria-hidden="true" class="header-anchor">#</a> Function afterGenerateModuleVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">afterGenerateModuleVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when the voucher is batch generated per module and all the system default SQL statements is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>ids</td> <td><code>List&lt;Long&gt;</code></td> <td>A group of transaction ids</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Determine if the transaction is stock type</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run after the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-aftergeneratetranvoucher"><a href="#function-aftergeneratetranvoucher" aria-hidden="true" class="header-anchor">#</a> Function afterGenerateTranVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">afterGenerateTranVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleName<span class="token punctuation">,</span> <span class="token keyword">long</span> ids<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when the voucher is batch generated per transaction and all the system default SQL statements is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>moduleName</td> <td><code>String</code></td> <td>The module name going to check</td></tr> <tr><td>ids</td> <td><code>long</code></td> <td>The transaction id</td></tr> <tr><td>isStock</td> <td><code>boolean</code></td> <td>Determine if the transaction is stock type</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run after the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <hr> <h3 id="function-afterbatchrevertvoucher"><a href="#function-afterbatchrevertvoucher" aria-hidden="true" class="header-anchor">#</a> Function afterBatchRevertVoucher</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">afterBatchRevertVoucher</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> jlId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when the vouchers are ready to reverted and all the system default SQL statements is generated.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>jlId</td> <td><code>long</code></td> <td>The journal voucher's id that ready to be revert</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>The SQL statement that need to be run after the SQL statement generated by the system is run.</td></tr></tbody></table> <br> <br> <h2 id="prqallocate"><a href="#prqallocate" aria-hidden="true" class="header-anchor">#</a> PrqAllocate</h2> <h3 id="purpose-16"><a href="#purpose-16" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Interact with M18 when dealing with MRP Generation.</p> <br> <h3 id="function-supply-demand"><a href="#function-supply-demand" aria-hidden="true" class="header-anchor">#</a> Function supply_demand</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">void</span> <span class="token function">supply_demand</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> etdList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> etaList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> stkList<span class="token punctuation">,</span> <span class="token class-name">SqlTable</span> etd_supply_List<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Allocate the demand and supply quantity for special case in MRP generation.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>etdList</td> <td><code>SqlTable</code></td> <td>Demand list in step 2</td></tr> <tr><td>etaList</td> <td><code>SqlTable</code></td> <td>Supply list in step 2</td></tr> <tr><td>stkList</td> <td><code>SqlTable</code></td> <td>Supply stock quantity table</td></tr> <tr><td>etd_supply_List</td> <td><code>SqlTable</code></td> <td>The allocation result on [Available Quantity Setup].</td></tr></tbody></table> <br> <br> <h2 id="loadlocktranhelper"><a href="#loadlocktranhelper" aria-hidden="true" class="header-anchor">#</a> LoadLockTranHelper</h2> <h3 id="purpose-17"><a href="#purpose-17" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Interact with M18 [Lock / Release Material] Editor.</p> <br> <h3 id="function-addloadlocktrancond"><a href="#function-addloadlocktrancond" aria-hidden="true" class="header-anchor">#</a> Function addLoadLockTranCond</h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLoadLockTranCond</span><span class="token punctuation">(</span><span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token class-name">String</span> loadType<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">module</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FormatCond</span><span class="token punctuation">&gt;</span></span> conds<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Trigger when loading matched material with/without lock. Developers can modify the user's conditions and affect the searching result.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>loadType</td> <td><code>String</code></td> <td>Determine if locked material should be loaded. Options: <code>lock</code>, <code>release</code></td></tr> <tr><td>module</td> <td><code>String</code></td> <td>The module that the system going to search</td></tr> <tr><td>conds</td> <td><code>List&lt;FormatCond&gt;</code></td> <td>The conditions defined by users</td></tr></tbody></table> <h2 id="tradingsettinghelper"><a href="#tradingsettinghelper" aria-hidden="true" class="header-anchor">#</a> TradingSettingHelper</h2> <h3 id="purpose-18"><a href="#purpose-18" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to expand the [Preference Setup (Trade)] setting module.</p> <br> <h3 id="function-getlasttrantablename"><a href="#function-getlasttrantablename" aria-hidden="true" class="header-anchor">#</a> Function <code>getLastTranTableName</code></h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getLastTranTableName</span><span class="token punctuation">(</span><span class="token class-name">String</span> origin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Get the table name of the type of the &quot;last transaction&quot; source in the cache.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>origin</td> <td><code>String</code></td> <td>&quot;Last transaction&quot; source type</td></tr></tbody></table> <p><strong>Result</strong></p> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>String</code></td> <td>return the table name of the type of the &quot;last transaction&quot; source in the cache.</td></tr></tbody></table> <hr> <h3 id="function-addtradingsettingdata"><a href="#function-addtradingsettingdata" aria-hidden="true" class="header-anchor">#</a> Function <code>addTradingSettingData</code></h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">addTradingSettingData</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">SqlTable</span><span class="token punctuation">&gt;</span></span> cacheMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Add extra cached data for the <code>TradeStaticVar.tradingSetting</code> cache.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>cacheMap</td> <td><code>Map&lt;String, SqlTable&gt;</code></td> <td><code>TradeStaticVar.tradingSetting</code> cache data</td></tr></tbody></table> <h2 id="ecnhelper"><a href="#ecnhelper" aria-hidden="true" class="header-anchor">#</a> EcnHelper</h2> <h3 id="purpose-19"><a href="#purpose-19" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to extend the [Engineering Change Note] module</p> <br> <h3 id="function-ecnchangeprocessextradata"><a href="#function-ecnchangeprocessextradata" aria-hidden="true" class="header-anchor">#</a> Function <code>ecnChangeProcessExtraData</code></h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">ecnChangeProcessExtraData</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> ecnpEntity<span class="token punctuation">,</span> <span class="token keyword">int</span> ecnptRec<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> bomEntity<span class="token punctuation">,</span> <span class="token keyword">int</span> bomptRec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used for the [Engineering Change Note (Work Process)] module, the data added to the extension is replaced with the BOM change order.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>ecnpEntity</td> <td><code>SqlEntity</code></td> <td>The entity of [Engineering Change Note (Work Process)]</td></tr> <tr><td>ecnptRec</td> <td><code>int</code></td> <td>The row index of [Engineering Change Note (Work Process)] footer table</td></tr> <tr><td>bomEntity</td> <td><code>SqlEntity</code></td> <td>The entity of [BOM]</td></tr> <tr><td>bomptRec</td> <td><code>int</code></td> <td>The row index of [BOM] process footer</td></tr></tbody></table> <hr> <h3 id="function-ecnchangematextradata"><a href="#function-ecnchangematextradata" aria-hidden="true" class="header-anchor">#</a> Function <code>ecnChangeMatExtraData</code></h3> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">ecnChangeMatExtraData</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> ecnmEntity<span class="token punctuation">,</span> <span class="token keyword">int</span> ecnmtRec<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> bomEntity<span class="token punctuation">,</span> <span class="token keyword">int</span> bomtRec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used for the [Engineering Change Note (Material)] module, the data added to the extension is replaced with the BOM change order.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>ecnmEntity</td> <td><code>SqlEntity</code></td> <td>The entity of [Engineering Change Note (Material)]</td></tr> <tr><td>ecnmtRec</td> <td><code>int</code></td> <td>The row index of [Engineering Change Note (Material)] footer table</td></tr> <tr><td>bomEntity</td> <td><code>SqlEntity</code></td> <td>The entity of [BOM]</td></tr> <tr><td>bomtRec</td> <td><code>int</code></td> <td>The row index of [BOM] material footer</td></tr></tbody></table> <h2 id="depositdatahelper"><a href="#depositdatahelper" aria-hidden="true" class="header-anchor">#</a> DepositDataHelper</h2> <h3 id="purpose-20"><a href="#purpose-20" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to extend deposit receivable and to receive/settle deposit.</p> <br> <h3 id="function-appendardepositreceipt"><a href="#function-appendardepositreceipt" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendArDepositReceipt</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendArDepositReceipt</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> 			<span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> 	 loadGroupCo<span class="token punctuation">,</span> <span class="token class-name">String</span> arapAlloType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended deposit receipt/deposit utilised data, such as the deposit received in [POS Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Data of deposit receipt</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Debtor Type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Debtor id</td></tr> <tr><td>sourceId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr> <tr><td>orderList</td> <td><code>String</code></td> <td>The deposit list which need to load (load all when empty)</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr> <tr><td>arapAlloType</td> <td><code>String</code></td> <td>The deposit type to read in [AR - AP Off-Set Slip]</td></tr></tbody></table> <h3 id="example"><a href="#example" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When a deposit receipt is load, you need to include the deposit received by [POS Invoice], as extended below</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendArDepositReceipt</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span>   	<span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> 	<span class="token class-name">String</span> arapAlloType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_poscoreac_recregdeposet (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> 			<span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> sourceId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> orderList <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> moduleFrom 		<span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-appendapdepositreceipt"><a href="#function-appendapdepositreceipt" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendApDepositReceipt</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendApDepositReceipt</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> 			<span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> 	 loadGroupCo<span class="token punctuation">,</span> <span class="token class-name">String</span> arapAlloType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended deposit payment/deposit utilised data, such as the deposit payment in [Subcontract Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Data of deposit payment</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Creditor Type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Creditor id</td></tr> <tr><td>sourceId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr> <tr><td>orderList</td> <td><code>String</code></td> <td>The deposit list which need to load (load all when empty)</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr> <tr><td>arapAlloType</td> <td><code>String</code></td> <td>The deposit type to read in [AR - AP Off-Set Slip]</td></tr></tbody></table> <h3 id="example-2"><a href="#example-2" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When the deposit payment is load, the deposit used in [Subcontract Invoice] needs to be deducted as follows:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendApDepositReceipt</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span> 		<span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> 	<span class="token class-name">String</span> arapAlloType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_pdcoreac_payregdeposet (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> 			<span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> sourceId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> orderList <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> moduleFrom 		<span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> depMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> depDomMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">int</span> deci <span class="token operator">=</span> <span class="token class-name">MacUtil</span><span class="token punctuation">.</span><span class="token function">getAmtDecimal</span><span class="token punctuation">(</span>beId<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rec <span class="token operator">:</span> myTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">String</span> sTranType <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sTranType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">long</span> sTranId <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sTranId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> refType <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;refType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">long</span> sorId <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sorId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> lot <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;lot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token class-name">String</span> key <span class="token operator">=</span> sTranType <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> sTranId <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> 					refType <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> sorId <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> lot<span class="token punctuation">;</span>

				<span class="token keyword">double</span> depoAmt <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;depoAmt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">double</span> domDepoAmt <span class="token operator">=</span> myTable<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;domDepoAmt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>depMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					depoAmt <span class="token operator">=</span> <span class="token class-name">MathLib</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>depoAmt <span class="token operator">+</span> depMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> deci<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>depDomMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					domDepoAmt <span class="token operator">=</span> <span class="token class-name">MathLib</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>domDepoAmt <span class="token operator">+</span> depDomMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> deci<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				depMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> depoAmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
				depDomMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> domDepoAmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> recList <span class="token operator">=</span> <span class="token class-name">ListLib</span><span class="token punctuation">.</span><span class="token function">newList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rec <span class="token operator">:</span> retTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">String</span> sTranType <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sTranType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">long</span> sTranId <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sTranId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> refType <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;refType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">long</span> sorId <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;sorId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> lot <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getValueStr</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;lot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">double</span> bal <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;bal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">double</span> balAmt <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;balAmt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">double</span> balDomAmt <span class="token operator">=</span> retTable<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;balDomAmt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token class-name">String</span> key <span class="token operator">=</span> sTranType <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> sTranId <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> 					refType <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> sorId <span class="token operator">+</span> <span class="token class-name">StringLib</span><span class="token punctuation">.</span>separate <span class="token operator">+</span> lot<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>depMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					bal <span class="token operator">=</span> <span class="token class-name">MathLib</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>bal <span class="token operator">+</span> depMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> deci<span class="token punctuation">)</span><span class="token punctuation">;</span>
					balAmt <span class="token operator">=</span> <span class="token class-name">MathLib</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>balAmt <span class="token operator">-</span> depMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> deci<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>depDomMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					balDomAmt <span class="token operator">=</span> <span class="token class-name">MathLib</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>balDomAmt <span class="token operator">-</span> depDomMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> deci<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				retTable<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;bal&quot;</span><span class="token punctuation">,</span> bal<span class="token punctuation">)</span><span class="token punctuation">;</span>
				retTable<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;balAmt&quot;</span><span class="token punctuation">,</span> balAmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
				retTable<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token string">&quot;balDomAmt&quot;</span><span class="token punctuation">,</span> balDomAmt<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>balAmt <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					recList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>recList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				retTable<span class="token punctuation">.</span><span class="token function">deleteRows</span><span class="token punctuation">(</span>recList<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-appendarosdeposit"><a href="#function-appendarosdeposit" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendArOsDeposit</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendArOsDeposit</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> 	tranType<span class="token punctuation">,</span> <span class="token keyword">long</span> tranId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadAll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>The data used to load extended deposit order, such as the deposit in a [Consignment Order]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Data of deposit</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Debtor id</td></tr> <tr><td>tranType</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>tranId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr> <tr><td>orderList</td> <td><code>String</code></td> <td>The deposit list which need to load (load all when empty)</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr> <tr><td>loadAll</td> <td><code>boolean</code></td> <td>Load with no balance</td></tr></tbody></table> <h3 id="example-3"><a href="#example-3" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When the deposit order is load, you need to add the deposit for the  [Consignment Order], which is extended below</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendArOsDeposit</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> 			tranType<span class="token punctuation">,</span> <span class="token keyword">long</span> tranId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadAll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_consigncoamt2 (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tranType <span class="token operator">+</span> 	 <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> tranId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> orderList <span class="token operator">+</span> <span class="token string">&quot;',&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> 		<span class="token punctuation">(</span>loadAll <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

	<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-appendaposdeposit"><a href="#function-appendaposdeposit" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendApOsDeposit</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendApOsDeposit</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> 	tranType<span class="token punctuation">,</span> <span class="token keyword">long</span> tranId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadAll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>The data used to load extended deposit order, such as the deposit in a [Subcontract Order]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Data of deposit</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Creditor id</td></tr> <tr><td>tranType</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>tranId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr> <tr><td>orderList</td> <td><code>String</code></td> <td>The deposit list which need to load (load all when empty)</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr> <tr><td>loadAll</td> <td><code>boolean</code></td> <td>Load with no balance</td></tr></tbody></table> <h3 id="example-4"><a href="#example-4" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When the deposit order is load, you need to add the deposit for the  [Subcontract Order], which is extended below</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendApOsDeposit</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> 			tranType<span class="token punctuation">,</span> <span class="token keyword">long</span> tranId<span class="token punctuation">,</span> <span class="token class-name">String</span> tDate<span class="token punctuation">,</span> <span class="token class-name">String</span> orderList<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadAll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_pdcoreac_amt (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tranType <span class="token operator">+</span> 	<span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> tranId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> orderList <span class="token operator">+</span> <span class="token string">&quot;',&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> 		<span class="token punctuation">(</span>loadAll <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

	<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="financedatahelper"><a href="#financedatahelper" aria-hidden="true" class="header-anchor">#</a> FinanceDataHelper</h2> <h3 id="purpose-21"><a href="#purpose-21" aria-hidden="true" class="header-anchor">#</a> Purpose</h3> <p>Used to extend AR invoice.</p> <br> <h3 id="function-updatearinvoiceremain"><a href="#function-updatearinvoiceremain" aria-hidden="true" class="header-anchor">#</a> Function  <code>updateArInvoiceRemain</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">updateArInvoiceRemain</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token keyword">long</span> sTranId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiId<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> tDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended AR invoice  balance amount, such as [XXXX AR Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>The invoice balance amount data</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Debtor type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Debtor id</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>sourceId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>sTranId</td> <td><code>long</code></td> <td>AR Invoice id</td></tr> <tr><td>multiId</td> <td><code>long</code></td> <td>[Multiple Receipt] id</td></tr> <tr><td>sTranType</td> <td><code>String</code></td> <td>AR Invoice type</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr></tbody></table> <h3 id="example-5"><a href="#example-5" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When loading the balance amount of [XXXX AR Invoice], extended as follows</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">updateArInvoiceRemain</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token keyword">long</span> sTranId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiId<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> tDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_xxxx_arRemain (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> 			<span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> moduleFrom <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> sourceId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> sTranType <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> sTranId <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> 		<span class="token operator">+</span> multiRecId <span class="token operator">+</span> <span class="token string">&quot;,'&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;')&quot;</span><span class="token punctuation">;</span>	

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-updateapinvoiceremain"><a href="#function-updateapinvoiceremain" aria-hidden="true" class="header-anchor">#</a> Function  <code>updateApInvoiceRemain</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">updateApInvoiceRemain</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token keyword">long</span> sTranId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiId<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> tDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended AP invoice  balance amount, such as [XXXX AP Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>The invoice balance amount data</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Creditor type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Creditor id</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>sourceId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>sTranId</td> <td><code>long</code></td> <td>AP Invoice id</td></tr> <tr><td>multiId</td> <td><code>long</code></td> <td>[Multiple Payment] id</td></tr> <tr><td>sTranType</td> <td><code>String</code></td> <td>AP Invoice type</td></tr> <tr><td>tDate</td> <td><code>String</code></td> <td>As at date</td></tr></tbody></table> <h3 id="example-6"><a href="#example-6" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When loading the balance amount of [XXXX AP Invoice], extended as follows</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">updateApInvoiceRemain</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">long</span> sourceId<span class="token punctuation">,</span> <span class="token keyword">long</span> sTranId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiId<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> tDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_xxxx_apRemain (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> 			<span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> moduleFrom <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> sourceId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> sTranType <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> sTranId <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> 		<span class="token operator">+</span> multiRecId <span class="token operator">+</span> <span class="token string">&quot;,'&quot;</span> <span class="token operator">+</span> tDate <span class="token operator">+</span> <span class="token string">&quot;')&quot;</span><span class="token punctuation">;</span>	

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-appendarosinvoice"><a href="#function-appendarosinvoice" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendArOsInvoice</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendArOsInvoice</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 		<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> recregId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiRecId<span class="token punctuation">,</span> <span class="token class-name">String</span> sDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> 	 eDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sStaff<span class="token punctuation">,</span> <span class="token class-name">String</span> eStaff<span class="token punctuation">,</span> <span class="token keyword">int</span> loadCrNote<span class="token punctuation">,</span> <span class="token class-name">String</span> invList<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended AR invoice outstanding invoice, such as [XXXX AR Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Outstanding AR Invoice data</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Debtor type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Debtor id</td></tr> <tr><td>recregId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>multiRecId</td> <td><code>long</code></td> <td>[Multiple Receipt] id</td></tr> <tr><td>sDate</td> <td><code>String</code></td> <td>Start date</td></tr> <tr><td>eDate</td> <td><code>String</code></td> <td>End date</td></tr> <tr><td>sDDate</td> <td><code>String</code></td> <td>Start due date</td></tr> <tr><td>eDDate</td> <td><code>String</code></td> <td>End due date</td></tr> <tr><td>sStaff</td> <td><code>String</code></td> <td>Start staff code</td></tr> <tr><td>eStaff</td> <td><code>String</code></td> <td>End staff code</td></tr> <tr><td>loadCrNote</td> <td><code>int</code></td> <td>Load with no balance</td></tr> <tr><td>invList</td> <td><code>String</code></td> <td>The invoice list which need to load (load all when empty)</td></tr> <tr><td>sTranType</td> <td><code>String</code></td> <td>AR invoice type</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr></tbody></table> <h3 id="example-7"><a href="#example-7" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When loading the outstanding amount of [XXXX AR Invoice], extended as follows</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendArOsInvoice</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> recregId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiRecId<span class="token punctuation">,</span> <span class="token class-name">String</span> sDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDDate<span class="token punctuation">,</span> 		<span class="token class-name">String</span> sStaff<span class="token punctuation">,</span> <span class="token class-name">String</span> eStaff<span class="token punctuation">,</span> <span class="token keyword">int</span> loadCrNote<span class="token punctuation">,</span> <span class="token class-name">String</span> invList<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> <span class="token class-name">String</span> 			moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_xxxx_napbal (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> 			<span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> payRegId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> multiPayId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> sDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> 			sDDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eDDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> sStaff <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eStaff <span class="token operator">+</span> <span class="token string">&quot;',&quot;</span> <span class="token operator">+</span> loadDbNote <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> 		invList <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> sTranType <span class="token operator">+</span> <span class="token string">&quot;', '&quot;</span> <span class="token operator">+</span> moduleFrom <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="function-appendaposinvoice"><a href="#function-appendaposinvoice" aria-hidden="true" class="header-anchor">#</a> Function  <code>appendApOsInvoice</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">appendApOsInvoice</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> 		<span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> <span class="token keyword">long</span> payRegId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiPayId<span class="token punctuation">,</span> <span class="token class-name">String</span> sDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> 	eDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sStaff<span class="token punctuation">,</span> <span class="token class-name">String</span> eStaff<span class="token punctuation">,</span> <span class="token keyword">int</span> loadDbNote<span class="token punctuation">,</span> <span class="token class-name">String</span> invList<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> 		<span class="token class-name">String</span> moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Description</strong></p> <p>Used to load the extended AP invoice outstanding invoice, such as [XXXX AP Invoice]</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>retTable</td> <td><code>SqlTable</code></td> <td>Outstanding AR Invoice data</td></tr> <tr><td>beId</td> <td><code>long</code></td> <td>The business entity id</td></tr> <tr><td>uId</td> <td><code>long</code></td> <td>User id</td></tr> <tr><td>AIType</td> <td><code>String</code></td> <td>Creditor type</td></tr> <tr><td>AIId</td> <td><code>long</code></td> <td>Creditor id</td></tr> <tr><td>payRegId</td> <td><code>long</code></td> <td>The id of the transaction which load the data</td></tr> <tr><td>multiPayId</td> <td><code>long</code></td> <td>[Multiple Payment] id</td></tr> <tr><td>sDate</td> <td><code>String</code></td> <td>Start date</td></tr> <tr><td>eDate</td> <td><code>String</code></td> <td>End date</td></tr> <tr><td>sDDate</td> <td><code>String</code></td> <td>Start due date</td></tr> <tr><td>eDDate</td> <td><code>String</code></td> <td>End due date</td></tr> <tr><td>sStaff</td> <td><code>String</code></td> <td>Start staff code</td></tr> <tr><td>eStaff</td> <td><code>String</code></td> <td>End staff code</td></tr> <tr><td>loadDbNote</td> <td><code>int</code></td> <td>Load with no balance</td></tr> <tr><td>invList</td> <td><code>String</code></td> <td>The invoice list which need to load (load all when empty)</td></tr> <tr><td>sTranType</td> <td><code>String</code></td> <td>AP invoice type</td></tr> <tr><td>moduleFrom</td> <td><code>String</code></td> <td>The transaction type which load the data</td></tr> <tr><td>loadGroupCo</td> <td><code>boolean</code></td> <td>Load group company data</td></tr></tbody></table> <h3 id="example-8"><a href="#example-8" aria-hidden="true" class="header-anchor">#</a> <strong>Example</strong></h3> <p>When loading the outstanding amount of [XXXX AP Invoice], extended as follows</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendApOsInvoice</span><span class="token punctuation">(</span><span class="token class-name">SqlTable</span> retTable<span class="token punctuation">,</span> <span class="token keyword">long</span> beId<span class="token punctuation">,</span> <span class="token keyword">long</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">AIType</span><span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token class-name">AIId</span><span class="token punctuation">,</span> 	<span class="token keyword">long</span> payRegId<span class="token punctuation">,</span> <span class="token keyword">long</span> multiPayId<span class="token punctuation">,</span> <span class="token class-name">String</span> sDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDate<span class="token punctuation">,</span> <span class="token class-name">String</span> sDDate<span class="token punctuation">,</span> <span class="token class-name">String</span> eDDate<span class="token punctuation">,</span> 		<span class="token class-name">String</span> sStaff<span class="token punctuation">,</span> <span class="token class-name">String</span> eStaff<span class="token punctuation">,</span> <span class="token keyword">int</span> loadDbNote<span class="token punctuation">,</span> <span class="token class-name">String</span> invList<span class="token punctuation">,</span> <span class="token class-name">String</span> sTranType<span class="token punctuation">,</span> <span class="token class-name">String</span> 			moduleFrom<span class="token punctuation">,</span> <span class="token keyword">boolean</span> loadGroupCo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CALL l_prodac_napbal (&quot;</span> <span class="token operator">+</span> beId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> uId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> <span class="token class-name">AIType</span> <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> 			<span class="token class-name">AIId</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> payRegId <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> multiPayId <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> sDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> 			sDDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eDDate <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> sStaff <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> eStaff <span class="token operator">+</span> <span class="token string">&quot;',&quot;</span> <span class="token operator">+</span> loadDbNote <span class="token operator">+</span> <span class="token string">&quot;, '&quot;</span> <span class="token operator">+</span> 		invList <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> sTranType <span class="token operator">+</span> <span class="token string">&quot;', '&quot;</span> <span class="token operator">+</span> moduleFrom <span class="token operator">+</span> <span class="token string">&quot;', &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>loadGroupCo <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>

		<span class="token class-name">SqlTable</span> myTable <span class="token operator">=</span> <span class="token class-name">CawDs</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myTable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> myTable<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">SqlTableLib</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>retTable<span class="token punctuation">,</span> myTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.49b5115d.js" defer></script><script src="/assets/js/3.14966609.js" defer></script><script src="/assets/js/28.42a3faf1.js" defer></script>
  </body>
</html>
